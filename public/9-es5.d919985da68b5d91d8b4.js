function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"7Cdu":function(e,t,a){"use strict";a.d(t,"a",(function(){return Wa}));var i=a("fXoL"),n=a("0IaG"),c=a("c3AT"),o=a("tyNb"),s=a("ofXK"),r=a("f0Cb"),l=a("kmnG"),f=a("qFsG"),u=a("3Pt+"),b=a("d3UM"),d=a("FKr1"),g=a("bSwM"),p=a("jaxi"),h=a("bTqV"),m=a("NFeN"),v=a("I7HA"),T=a("FtGj"),k=a("vSFt"),C=a("+0xr"),F=a("R0Ic"),U=[Object(F.n)("highlightRows",[Object(F.k)("active",Object(F.l)({"background-color":"yellow"})),Object(F.k)("inactive",Object(F.l)({"background-color":"transparent"})),Object(F.m)("active => inactive",[Object(F.e)("1s")]),Object(F.m)("void => inactive",[Object(F.l)({"background-color":"yellow"}),Object(F.e)("1s",Object(F.l)({"background-color":"transparent"}))])])],D=a("zXF6"),y=a("2uAV"),x=a("iB1i"),w=a("j5Dc"),I=a("Xa2L");function L(e,t){1&e&&i.Pb(0,"th",29)}function P(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",34),i.cc("click",(function(){return i.Bc(a),i.gc().$implicit.stop()})),i.Pb(1,"i",35),i.Tb()}}function S(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",36),i.cc("click",(function(){i.Bc(a);var e=i.gc().index;return i.gc(2).removeQueueElement(e)})),i.Pb(1,"i",37),i.Tb()}}function J(e,t){if(1&e&&(i.Ub(0,"td",30),i.Ub(1,"div",31),i.Jc(2,P,2,0,"button",32),i.Jc(3,S,2,0,"button",33),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(2),i.nc("ngIf",a.uploading),i.Cb(1),i.nc("ngIf",!a.uploading)}}function O(e,t){1&e&&(i.Ub(0,"th",38),i.Lc(1,"Prefix"),i.Tb())}function R(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"mat-form-field",40),i.Ub(2,"input",41),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.response.success[0].prefix=e})),i.Tb(),i.Tb(),i.Rb()}if(2&e){var n=i.gc().$implicit;i.Cb(2),i.nc("ngModel",n.response.success[0].prefix)}}function M(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,R,3,1,"ng-container",39),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function j(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1,"DataFile name"),i.Tb())}function $(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"mat-form-field",40),i.Ub(2,"input",42),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.response.success[0].name=e})),i.Tb(),i.Tb(),i.Rb()}if(2&e){var n=i.gc().$implicit;i.Cb(2),i.nc("ngModel",n.response.success[0].name)}}function _(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,$,3,1,"ng-container",39),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function A(e,t){1&e&&(i.Ub(0,"th",38),i.Lc(1,"Suffix"),i.Tb())}function E(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"mat-form-field",40),i.Ub(2,"input",43),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.response.success[0].suffix=e})),i.Tb(),i.Tb(),i.Rb()}if(2&e){var n=i.gc().$implicit;i.Cb(2),i.nc("ngModel",n.response.success[0].suffix)}}function B(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,E,3,1,"ng-container",39),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function V(e,t){1&e&&i.Pb(0,"th",29)}function N(e,t){1&e&&i.Pb(0,"td",44)}function z(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1,"Original filename"),i.Tb())}function H(e,t){if(1&e&&(i.Ub(0,"span",46),i.Lc(1),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.Mc(a)}}function q(e,t){if(1&e&&(i.Ub(0,"strong"),i.Lc(1,"*Required format: "),i.Jc(2,H,2,1,"span",45),i.Tb()),2&e){var a=i.gc(4);i.Cb(2),i.nc("ngForOf",a.uploaderOptions.allowedExtensions)}}function K(e,t){if(1&e&&(i.Ub(0,"p"),i.Jc(1,q,3,1,"strong",39),i.Tb()),2&e){var a=i.gc(3);i.Cb(1),i.nc("ngIf",a.uploaderOptions.allowedExtensions.length)}}function G(e,t){if(1&e&&(i.Ub(0,"td",30),i.Lc(1),i.Jc(2,K,2,1,"p",39),i.Tb()),2&e){var a=t.$implicit,n=i.gc(2);i.Cb(1),i.Nc(" ",null==a?null:a.originalName," "),i.Cb(1),i.nc("ngIf",n.uploaderOptions.allowedExtensions.indexOf("*")<0&&-1==n.uploaderOptions.allowedExtensions.indexOf(a.originalName.split(".").pop().toLowerCase()))}}function X(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Size "),i.Tb())}function Q(e,t){if(1&e&&(i.Ub(0,"p"),i.Ub(1,"strong"),i.Lc(2),i.hc(3,"number"),i.Tb(),i.Tb()),2&e){var a=i.gc(3);i.Cb(2),i.Nc("*file size of less than ",i.jc(3,1,(null==a.uploaderOptions?null:a.uploaderOptions.allowedFileSize)/1024/1024,".2")," MB is required.")}}function Y(e,t){if(1&e&&(i.Ub(0,"td",30),i.Lc(1),i.hc(2,"number"),i.Jc(3,Q,4,4,"p",39),i.Tb()),2&e){var a=t.$implicit,n=i.gc(2);i.Cb(1),i.Nc(" ",i.jc(2,2,(null==a?null:a.size)/1024/1024,".2")," MB "),i.Cb(2),i.nc("ngIf",a.size>n.uploaderOptions.allowedFileSize)}}function W(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Progress "),i.Tb())}function Z(e,t){if(1&e&&(i.Ub(0,"td",30),i.Ub(1,"div",31),i.Pb(2,"mat-progress-spinner",47),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(2),i.nc("diameter",30)("value",a.progress.percent)}}function ee(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Status "),i.Tb())}function te(e,t){1&e&&(i.Ub(0,"span",52),i.Pb(1,"i",53),i.Lc(2,"Aborted"),i.Tb())}function ae(e,t){1&e&&(i.Ub(0,"span",54),i.Pb(1,"i",55),i.Lc(2,"Uploading"),i.Tb())}function ie(e,t){1&e&&(i.Ub(0,"span",56),i.Pb(1,"i",57),i.Lc(2,"Success"),i.Tb())}function ne(e,t){1&e&&(i.Ub(0,"span",58),i.Pb(1,"i",53),i.Lc(2,"Error"),i.Tb())}function ce(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,te,3,0,"span",48),i.Jc(2,ae,3,0,"span",49),i.Jc(3,ie,3,0,"span",50),i.Jc(4,ne,3,0,"span",51),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.abort),i.Cb(1),i.nc("ngIf",a.uploading),i.Cb(1),i.nc("ngIf",a.done&&!a.error),i.Cb(1),i.nc("ngIf",a.error)}}function oe(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Speed "),i.Tb())}function se(e,t){if(1&e&&(i.Ub(0,"span"),i.Lc(1),i.Tb()),2&e){var a=i.gc().$implicit;i.Cb(1),i.Mc(a.progress.speedHumanized)}}function re(e,t){if(1&e&&(i.Ub(0,"span"),i.Lc(1),i.Tb()),2&e){var a=i.gc().$implicit;i.Cb(1),i.Nc("Average: ",a.speedAverageHumanized,"")}}function le(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,se,2,1,"span",39),i.Jc(2,re,2,1,"span",39),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.uploading),i.Cb(1),i.nc("ngIf",a.done)}}function fe(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Tags "),i.Tb())}function ue(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"bdp-tag-input",59),i.cc("tagChange",(function(e){i.Bc(a);var t=i.gc().$implicit;return i.gc(2).onTagChanged(e,t.response.success[0])})),i.Tb(),i.Rb()}if(2&e){var n=i.gc().$implicit,c=i.gc(2);i.Cb(1),i.nc("packages",c.project.packages)("tasks",c.tasks)("tags",n.response.success[0].tags)("disabled",c.isDataFileUpdating[n.response.success[0].id])}}function be(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,ue,2,4,"ng-container",39),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function de(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Link "),i.Tb())}var ge=function(e){return["/dataFile",e,"info"]};function pe(e,t){if(1&e&&(i.Ub(0,"a",61),i.Pb(1,"span",62),i.Tb()),2&e){var a=i.gc().$implicit;i.nc("routerLink",i.rc(1,ge,a.response.success[0].id))}}function he(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,pe,2,3,"a",60),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function me(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Controls "),i.Tb())}function ve(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",64),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc(2).onDeleteDataFile(e.response.success[0].id)})),i.Pb(1,"i",65),i.Tb()}}function Te(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",64),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc(2).onUpdateDataFile(e.response.success[0])})),i.Pb(1,"i",66),i.Tb()}}function ke(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,ve,2,0,"button",63),i.Jc(2,Te,2,0,"button",63),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status),i.Cb(1),i.nc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function Ce(e,t){1&e&&i.Pb(0,"tr",67)}function Fe(e,t){if(1&e){var a=i.Vb();i.Ub(0,"tr",68),i.cc("@highlightRows.done",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(2).resetState(e,n)})),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.nc("@highlightRows",n&&n.response&&n.response.success&&n.response.success[0]&&c.highlightController[n.response.success[0].id]?"active":"inactive")}}function Ue(e,t){if(1&e&&i.Pb(0,"tr",69),2&e){var a=t.$implicit,n=i.gc(2);i.nc("@highlightRows",a&&a.response&&a.response.success&&a.response.success[0]&&n.highlightController[a.response.success[0].id]?"active":"inactive")}}var De=function(){return["deleteIcon","status","name","size","speed","link"]},ye=function(){return["progress","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function xe(e,t){if(1&e&&(i.Ub(0,"table",8),i.Sb(1,9),i.Jc(2,L,1,0,"th",10),i.Jc(3,J,4,2,"td",11),i.Rb(),i.Sb(4,12),i.Jc(5,O,2,0,"th",13),i.Jc(6,M,2,1,"td",11),i.Rb(),i.Sb(7,14),i.Jc(8,j,2,0,"th",10),i.Jc(9,_,2,1,"td",11),i.Rb(),i.Sb(10,15),i.Jc(11,A,2,0,"th",13),i.Jc(12,B,2,1,"td",11),i.Rb(),i.Sb(13,16),i.Jc(14,V,1,0,"th",10),i.Jc(15,N,1,0,"td",17),i.Rb(),i.Sb(16,18),i.Jc(17,z,2,0,"th",10),i.Jc(18,G,3,2,"td",11),i.Rb(),i.Sb(19,19),i.Jc(20,X,2,0,"th",10),i.Jc(21,Y,4,5,"td",11),i.Rb(),i.Sb(22,20),i.Jc(23,W,2,0,"th",10),i.Jc(24,Z,3,2,"td",11),i.Rb(),i.Sb(25,21),i.Jc(26,ee,2,0,"th",10),i.Jc(27,ce,5,4,"td",11),i.Rb(),i.Sb(28,22),i.Jc(29,oe,2,0,"th",10),i.Jc(30,le,3,2,"td",11),i.Rb(),i.Sb(31,23),i.Jc(32,fe,2,0,"th",10),i.Jc(33,be,2,1,"td",11),i.Rb(),i.Sb(34,24),i.Jc(35,de,2,0,"th",10),i.Jc(36,he,2,1,"td",11),i.Rb(),i.Sb(37,25),i.Jc(38,me,2,0,"th",10),i.Jc(39,ke,3,2,"td",11),i.Rb(),i.Jc(40,Ce,1,0,"tr",26),i.Jc(41,Fe,1,1,"tr",27),i.Jc(42,Ue,1,1,"tr",28),i.Tb()),2&e){var a=i.gc();i.nc("dataSource",a.uploader.queue),i.Cb(40),i.nc("matHeaderRowDef",i.qc(4,De)),i.Cb(1),i.nc("matRowDefColumns",i.qc(5,De)),i.Cb(1),i.nc("matRowDefColumns",i.qc(6,ye))}}var we,Ie=function(e){return{"nv-file-over":e}},Le=((we=function(){function e(t,a,n){_classCallCheck(this,e),this.uploader=t,this.projectService=a,this.infoService=n,this.navigateDataFile=new i.o,this.deleteDataFile=new i.o,this.updateDataFile=new i.o,this.separatorKeysCodes=[T.g,T.c],this.uploadEvents=new i.o,this.hasBaseDropZoneOver=!1,this.isDataFileUpdating={},this.highlightController={},this.uploaderOptions={url:"",withCredentials:!0,filterExtensions:!0,allowedExtensions:this.allowedExtensions||[],allowedFileSize:1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:"",keepFileName:!1,tags:[],name:"",desc:"",prefix:"",suffix:""},maxUploads:2}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._subs=[],this.filteredTags=[],this.zone=new i.A({enableLongStackTrace:!0}),this.uploaderOptions={url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload",withCredentials:!0,filterExtensions:!(Array.isArray(this.allowedExtensions)&&this.allowedExtensions.indexOf("*")>=0),allowedExtensions:this.allowedExtensions||[],allowedFileSize:this.fileLimits||1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:this.folder,keepFileName:this.keepFileName,tags:this.tags,name:this.name,desc:this.desc,prefix:this.prefix,suffix:this.suffix},maxUploads:3},this.total_progress=0,this.responses=[],this.files=[],this._subs.push(this.infoService.incomingDataChange$.subscribe((function(t){if("update"===t.type&&"DataFile"===t.target){if(Array.isArray(e.uploader.queue)){var a=t.data;if(!a)return;for(var i=0;i<e.uploader.queue.length;i++){var n=e.uploader.queue[i],c=void 0;if(n&&(n.response&&Array.isArray(n.response.success)&&(c=n.response.success[0]),c&&a.id===c.id)){c.prefix=a.prefix,c.name=a.name,c.suffix=a.suffix,c.desc=a.desc,c.tags=a.tags,e.highlightController[a.id]=!0;break}}}}else if("remove"===t.type&&"DataFile"===t.target&&Array.isArray(e.uploader.queue))for(var o=0;o<e.uploader.queue.length;o++){var s=e.uploader.queue[o];if(s.response&&s.response.success&&s.response.success[0]&&s.response.success[0].id===t.data.id){e.removeQueueElement(o);break}}})))}},{key:"ngOnChanges",value:function(e){for(var t in e)if("folder"===t)this.folder=e[t].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{folder:this.folder})});else if("keepFileName"===t){var a=Object.assign({},this.uploaderOptions.data,{keepFileName:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:a})}else if("tags"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{tags:e[t].currentValue})});else if("name"===t){var i=Object.assign({},this.uploaderOptions.data,{name:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:i})}else"desc"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{desc:e[t].currentValue})}):"prefix"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{prefix:e[t].currentValue})}):"suffix"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{suffix:e[t].currentValue})}):"project"===t?(this.project=e[t].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload"})):"fileLimits"===t&&(this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{allowedFileSize:parseFloat(e[t].currentValue)})}));this.uploader.setOptions(this.uploaderOptions)}},{key:"fileOverBase",value:function(e){-1!==(e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer).types.indexOf("Files")&&(this.hasBaseDropZoneOver=!0)}},{key:"fileLeave",value:function(e){var t=this;setTimeout((function(){return t.hasBaseDropZoneOver=!1}),0)}},{key:"gotoDataFile",value:function(e){window&&window.open()}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.uploader.queue.length;t++){var a=this.uploader.queue[t];if(a.response&&a.response.success&&a.response.success[0]&&a.response.success[0].id===e){this.removeQueueElement(t);break}}this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(new k.a(e))}},{key:"removeQueueElement",value:function(e){this.uploader.removeFileFromQueue(e),this.uploaderProgress.renderRows()}},{key:"handleMultipleUpload",value:function(e){var t=this,a=this.responses.findIndex((function(t){return t.id===e.id}));-1===a?this.responses.push(e):this.zone.run((function(){t.responses[a]=e}));var i=e.response;i&&i.isError&&e.setError(i.errors[0].details),this.uploaderProgress.renderRows()}},{key:"cssItemRowColor",value:function(e){return{"text-danger":e.error,success:e.done,warning:e.uploading,danger:e.error,active:e.abort}}},{key:"fileDropEvent",value:function(e){var t=this;console.log(this.uploader.queue),setTimeout((function(){t.hasBaseDropZoneOver=!1,t.uploaderProgress.renderRows()}),0)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"startUpload",value:function(){this.uploadEvents.emit("startUpload")}},{key:"resetState",value:function(e,t){t&&t.response&&t.response.success&&t.response.success[0]&&delete this.highlightController[t.response.success[0].id]}},{key:"ngOnDestroy",value:function(){for(var e=0;e<this._subs.length;e++)this._subs[e].unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||we)(i.Ob(D.a),i.Ob(c.a),i.Ob(y.a))},we.\u0275cmp=i.Ib({type:we,selectors:[["chi-file-uploader"]],viewQuery:function(e,t){var a;1&e&&i.Rc(C.n,!0),2&e&&i.xc(a=i.dc())&&(t.uploaderProgress=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",fileLimits:"fileLimits",tags:"tags",validTags:"validTags",name:"name",desc:"desc",tasks:"tasks",prefix:"prefix",suffix:"suffix"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},features:[i.Ab],decls:14,vars:6,consts:[[1,"mt-3"],["chiFileDropper","","multiple","true",1,"my-drop-zone",3,"options","ngClass","dragover","dragleave","drop","onUpload"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-5x","fa-upload"],["type","file","id","upload_file_selector","chiFileSelector","","multiple","",1,"hide-input",3,"options"],["for","upload_file_selector",1,"input-label"],[1,"box__dragndrop"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","empty"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","size"],["matColumnDef","progress"],["matColumnDef","status"],["matColumnDef","speed"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","style","border-bottom: 1px solid black;",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent","mat-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","mat-button","",3,"click"],[1,"fas","fa-ban","fa-fw","fa-lg"],["mat-icon-button","","color","primary",3,"click"],[1,"far","fa-times-circle","fa-fw","fa-lg","mr-2"],["mat-header-cell","",2,"width","80px"],[4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],["mat-cell",""],["class","label label-primary",4,"ngFor","ngForOf"],[1,"label","label-primary"],[3,"diameter","value"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-muted"],["aria-hidden","true",1,"fas","fa-times","fa-fw","mr-2"],[1,"text-primary"],[1,"fas","fa-spin","fa-circle-notch","fa-fw","mr-2"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw","mr-2"],[1,"text-danger"],[3,"packages","tasks","tags","disabled","tagChange"],["target","_blank",3,"routerLink",4,"ngIf"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""],["mat-row","",2,"border-bottom","1px solid black"]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.cc("dragover",(function(e){return t.fileOverBase(e)}))("dragleave",(function(e){return t.fileLeave(e)}))("drop",(function(e){return t.fileDropEvent(e)}))("onUpload",(function(e){return t.handleMultipleUpload(e)})),i.Ub(2,"div",2),i.Pb(3,"i",3),i.Pb(4,"br"),i.Pb(5,"input",4),i.Ub(6,"label",5),i.Ub(7,"strong"),i.Lc(8,"Choose a file"),i.Tb(),i.Ub(9,"span",6),i.Lc(10," or drag it here"),i.Tb(),i.Lc(11,". "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Jc(12,xe,43,7,"table",7),i.Pb(13,"br")),2&e&&(i.Cb(1),i.nc("options",t.uploaderOptions)("ngClass",i.rc(4,Ie,t.hasBaseDropZoneOver)),i.Cb(4),i.nc("options",t.uploaderOptions),i.Cb(7),i.nc("ngIf",t.uploader.queue.length>0))},directives:[x.a,s.l,w.a,s.n,C.n,C.c,C.i,C.b,C.k,C.m,C.h,C.a,h.b,l.b,f.a,u.b,u.e,u.i,u.l,s.m,I.a,v.a,o.f,C.j,C.l],pipes:[s.e],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}.hide-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;z-index:-1;position:absolute}.input-label[_ngcontent-%COMP%]{max-width:80%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden}.input-label[_ngcontent-%COMP%]:hover   strong[_ngcontent-%COMP%]{color:#39bfd3}@-webkit-keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"],data:{animation:[U]}}),we),Pe=a("YiK1");function Se(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",6),i.cc("click",(function(){return i.Bc(a),i.gc(2).linkAccount()})),i.Lc(1,"Link to your google accounts"),i.Tb()}}function Je(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",7),i.cc("click",(function(){return i.Bc(a),i.gc(2).linkAccount()})),i.Lc(1,"Switch account"),i.Tb()}}function Oe(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",8),i.cc("click",(function(){return i.Bc(a),i.gc(2).showPicker()})),i.Lc(1,"Import from google drive"),i.Tb()}}function Re(e,t){1&e&&i.Pb(0,"th",29)}function Me(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",30),i.Ub(1,"div",31),i.Ub(2,"button",32),i.cc("click",(function(){i.Bc(a);var e=t.$implicit;return i.gc(3).removeFromList(e.id)})),i.Pb(3,"i",33),i.Tb(),i.Tb(),i.Tb()}}function je(e,t){1&e&&(i.Ub(0,"th",34),i.Lc(1,"Prefix"),i.Tb())}function $e(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-form-field",36),i.Ub(1,"input",37),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.dataFile.prefix=e})),i.Tb(),i.Tb()}if(2&e){var n=i.gc().$implicit;i.Cb(1),i.nc("ngModel",n.dataFile.prefix)}}function _e(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,$e,2,1,"mat-form-field",35),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",null==a.dataFile?null:a.dataFile.id)}}function Ae(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1,"DataFile name"),i.Tb())}function Ee(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-form-field",36),i.Ub(1,"input",38),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.dataFile.name=e})),i.Tb(),i.Tb()}if(2&e){var n=i.gc().$implicit;i.Cb(1),i.nc("ngModel",n.dataFile.name)}}function Be(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,Ee,2,1,"mat-form-field",35),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.dataFile)}}function Ve(e,t){1&e&&(i.Ub(0,"th",34),i.Lc(1,"Suffix"),i.Tb())}function Ne(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-form-field",36),i.Ub(1,"input",39),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().$implicit.dataFile.suffix=e})),i.Tb(),i.Tb()}if(2&e){var n=i.gc().$implicit;i.Cb(1),i.nc("ngModel",n.dataFile.suffix)}}function ze(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,Ne,2,1,"mat-form-field",35),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.dataFile)}}function He(e,t){1&e&&(i.Ub(0,"th",34),i.Lc(1,"Mime Type"),i.Tb())}function qe(e,t){if(1&e&&(i.Ub(0,"td",30),i.Ub(1,"span"),i.Lc(2),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(2),i.Mc(a.mimeType)}}function Ke(e,t){1&e&&i.Pb(0,"th",29)}function Ge(e,t){if(1&e&&(i.Ub(0,"td",30),i.Pb(1,"img",40),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("src",a.iconUrl,i.Ec)}}function Xe(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1,"Original Filename"),i.Tb())}function Qe(e,t){if(1&e&&(i.Ub(0,"td",30),i.Ub(1,"a",41),i.Lc(2),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("href",a.embedUrl,i.Ec),i.Cb(1),i.Mc(a.name)}}function Ye(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Status "),i.Tb())}function We(e,t){1&e&&(i.Ub(0,"span",47),i.Pb(1,"i",48),i.Lc(2," Pending"),i.Tb())}function Ze(e,t){1&e&&(i.Ub(0,"span",49),i.Pb(1,"i",50),i.Lc(2," Processing"),i.Tb())}function et(e,t){1&e&&(i.Ub(0,"span",51),i.Pb(1,"i",52),i.Lc(2," Imported"),i.Tb())}function tt(e,t){1&e&&(i.Ub(0,"span",53),i.Pb(1,"i",54),i.Lc(2," Error"),i.Tb())}function at(e,t){1&e&&(i.Ub(0,"td",42),i.Jc(1,We,3,0,"span",43),i.Jc(2,Ze,3,0,"span",44),i.Jc(3,et,3,0,"span",45),i.Jc(4,tt,3,0,"span",46),i.Tb()),2&e&&(i.nc("ngSwitch",t.$implicit.status),i.Cb(1),i.nc("ngSwitchCase","pending"),i.Cb(1),i.nc("ngSwitchCase","importing"),i.Cb(1),i.nc("ngSwitchCase","success"),i.Cb(1),i.nc("ngSwitchCase","error"))}function it(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Tags "),i.Tb())}function nt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"bdp-tag-input",56),i.cc("tagChange",(function(e){i.Bc(a);var t=i.gc().$implicit;return i.gc(3).onTagChanged(e,t.dataFile)})),i.Tb()}if(2&e){var n=i.gc().$implicit,c=i.gc(3);i.nc("packages",c.project.packages)("tasks",c.tasks)("tags",n.dataFile.tags)}}function ct(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,nt,1,3,"bdp-tag-input",55),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.dataFile)}}function ot(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Link "),i.Tb())}var st=function(e){return["/dataFile",e,"info"]};function rt(e,t){if(1&e&&(i.Ub(0,"a",58),i.Pb(1,"span",59),i.Tb()),2&e){var a=i.gc().$implicit;i.nc("routerLink",i.rc(1,st,a.dataFile.id))}}function lt(e,t){if(1&e&&(i.Ub(0,"td",30),i.Ub(1,"div",31),i.Jc(2,rt,2,3,"a",57),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(2),i.nc("ngIf",a.dataFile)}}function ft(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Controls "),i.Tb())}function ut(e,t){1&e&&(i.Ub(0,"span"),i.Lc(1,"Import"),i.Tb())}function bt(e,t){1&e&&(i.Ub(0,"span"),i.Lc(1,"Importing"),i.Tb())}function dt(e,t){1&e&&(i.Ub(0,"span"),i.Lc(1,"Imported"),i.Tb())}function gt(e,t){1&e&&(i.Ub(0,"span"),i.Lc(1,"Error"),i.Tb())}function pt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",30),i.Ub(1,"button",60),i.cc("click",(function(){i.Bc(a);var e=t.$implicit;return i.gc(3).importFile(e)})),i.Pb(2,"span",61),i.Jc(3,ut,2,0,"span",62),i.Jc(4,bt,2,0,"span",62),i.Jc(5,dt,2,0,"span",62),i.Jc(6,gt,2,0,"span",62),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(1),i.nc("disabled","pending"!==n.status),i.Cb(2),i.nc("ngIf","pending"==n.status),i.Cb(1),i.nc("ngIf","importing"==n.status),i.Cb(1),i.nc("ngIf","success"==n.status),i.Cb(1),i.nc("ngIf","error"==n.status)}}function ht(e,t){1&e&&(i.Ub(0,"th",29),i.Lc(1," Controls "),i.Tb())}function mt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",63),i.cc("click",(function(){i.Bc(a);var e=i.gc(2).$implicit;return i.gc(3).onUpdateDataFile(e.dataFile)})),i.Pb(1,"i",66),i.Tb()}}function vt(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"button",63),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc(3).onDeleteDataFile(e.dataFile.id,e.id)})),i.Pb(2,"i",64),i.Tb(),i.Jc(3,mt,2,0,"button",65),i.Rb()}if(2&e){var n=i.gc().$implicit;i.Cb(3),i.nc("ngIf",3!==n.status)}}function Tt(e,t){if(1&e&&(i.Ub(0,"td",30),i.Jc(1,vt,4,1,"ng-container",62),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.dataFile&&"success"==a.status)}}function kt(e,t){1&e&&i.Pb(0,"tr",67)}function Ct(e,t){if(1&e){var a=i.Vb();i.Ub(0,"tr",68),i.cc("@highlightRows.done",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(3).resetState(e,n.dataFile)})),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(3);i.nc("@highlightRows",n&&n.dataFile&&c.highlightController[n.dataFile.id]?"active":"inactive")}}function Ft(e,t){if(1&e&&i.Pb(0,"tr",68),2&e){var a=t.$implicit,n=i.gc(3);i.nc("@highlightRows",a&&a.dataFile&&n.highlightController[a.dataFile.id]?"active":"inactive")}}var Ut=function(){return["deleteIcon","iconUrl","name","mimeType","status","importBtn"]},Dt=function(){return["link","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function yt(e,t){if(1&e&&(i.Ub(0,"div",9),i.Ub(1,"table",10),i.Sb(2,11),i.Jc(3,Re,1,0,"th",12),i.Jc(4,Me,4,0,"td",13),i.Rb(),i.Sb(5,14),i.Jc(6,je,2,0,"th",15),i.Jc(7,_e,2,1,"td",13),i.Rb(),i.Sb(8,16),i.Jc(9,Ae,2,0,"th",12),i.Jc(10,Be,2,1,"td",13),i.Rb(),i.Sb(11,17),i.Jc(12,Ve,2,0,"th",15),i.Jc(13,ze,2,1,"td",13),i.Rb(),i.Sb(14,18),i.Jc(15,He,2,0,"th",15),i.Jc(16,qe,3,1,"td",13),i.Rb(),i.Sb(17,19),i.Jc(18,Ke,1,0,"th",12),i.Jc(19,Ge,2,1,"td",13),i.Rb(),i.Sb(20,20),i.Jc(21,Xe,2,0,"th",12),i.Jc(22,Qe,3,2,"td",13),i.Rb(),i.Sb(23,21),i.Jc(24,Ye,2,0,"th",12),i.Jc(25,at,5,5,"td",22),i.Rb(),i.Sb(26,23),i.Jc(27,it,2,0,"th",12),i.Jc(28,ct,2,1,"td",13),i.Rb(),i.Sb(29,24),i.Jc(30,ot,2,0,"th",12),i.Jc(31,lt,3,1,"td",13),i.Rb(),i.Sb(32,25),i.Jc(33,ft,2,0,"th",12),i.Jc(34,pt,7,5,"td",13),i.Rb(),i.Sb(35,26),i.Jc(36,ht,2,0,"th",12),i.Jc(37,Tt,2,1,"td",13),i.Rb(),i.Jc(38,kt,1,0,"tr",27),i.Jc(39,Ct,1,1,"tr",28),i.Jc(40,Ft,1,1,"tr",28),i.Tb(),i.Tb()),2&e){var a=i.gc(2);i.Cb(1),i.nc("dataSource",a._selectedDocs),i.Cb(37),i.nc("matHeaderRowDef",i.qc(4,Ut)),i.Cb(1),i.nc("matRowDefColumns",i.qc(5,Ut)),i.Cb(1),i.nc("matRowDefColumns",i.qc(6,Dt))}}function xt(e,t){if(1&e&&(i.Ub(0,"div",1),i.Jc(1,Se,2,0,"button",2),i.Jc(2,Je,2,0,"button",3),i.Jc(3,Oe,2,0,"button",4),i.Jc(4,yt,41,7,"div",5),i.Tb()),2&e){var a=i.gc();i.Cb(1),i.nc("ngIf",!a.oauthToken),i.Cb(1),i.nc("ngIf",a.authApiLoaded&&a.oauthToken),i.Cb(1),i.nc("ngIf",a.pickerApiLoaded&&a.oauthToken),i.Cb(1),i.nc("ngIf",a._selectedDocs.length>0)}}var wt,It=((wt=function(){function e(t,a,n,c){_classCallCheck(this,e),this.projectService=t,this.router=a,this.systemService=n,this.infoService=c,this.navigateDataFile=new i.o,this.deleteDataFile=new i.o,this.updateDataFile=new i.o,this.pickerApiLoaded=!1,this.authApiLoaded=!1,this.oauthToken=void 0,this._gapi=gapi,this.clientId="",this.appId="",this.scope=["https://www.googleapis.com/auth/drive.readonly"]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this._subs=[],this.highlightController={},this.zone=new i.A({enableLongStackTrace:!0}),this.authToPicker={},this.authToAuthResult={},this._selectedDocs=this.projectService._googleDriveImportQueue,this._gapi.load("picker",{callback:function(){return e.zone.run((function(){return e.pickerApiLoaded=!0}))}}),this._gapi.load("auth",{callback:function(){return e.zone.run((function(){return e.authApiLoaded=!0}))}}),this.projectService.sysInfo.googleClientID){this.clientId=this.projectService.sysInfo.googleClientID;var t=this.clientId.split("-");this.appId=t[0]}else this._subs.push(this.systemService.sysInfo$.subscribe((function(t){t&&(e.clientId=t.googleClientID,e.appId=e.clientId.split("-")[0])})));this._subs.push(this.infoService.incomingDataChange$.subscribe((function(t){if("DataFile"===t.target)if("update"===t.type)for(var a=t.data,i=0;i<e._selectedDocs.length;i++){var n=e._selectedDocs[i].dataFile;if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]=!0;break}}else if("remove"===t.type)for(var c=0;c<e._selectedDocs.length;c++)if(e._selectedDocs[c].dataFile&&e._selectedDocs[c].dataFile.id===t.data.id){e._selectedDocs.splice(c,1),e.selectedDocTable&&e.selectedDocTable.renderRows();break}})))}},{key:"linkAccount",value:function(){var e=this;this._gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1,authuser:-1},(function(t){e.zone.run((function(){return e.oauthToken=t.access_token})),e.authToAuthResult[e.oauthToken]=t,e.showPicker()}))}},{key:"showPicker",value:function(){var e=this;this.authToPicker[this.oauthToken]?this.authToPicker[this.oauthToken].setVisible(!0):this.pickerApiLoaded&&this.oauthToken&&(this.authToPicker[this.oauthToken]=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.DOCS_IMAGES).addView(google.picker.ViewId.PRESENTATIONS).addView(google.picker.ViewId.SPREADSHEETS).setOAuthToken(this.oauthToken).setAppId(this.appId).setDeveloperKey(this.apiKey).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setMaxItems(5).setCallback((function(t){return e.pickerCallback(t)})).build(),this.authToPicker[this.oauthToken].setVisible(!0))}},{key:"pickerCallback",value:function(e){if(Object.keys(this).length>0){var t=[];e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&(t=e[google.picker.Response.DOCUMENTS],this.appendFiles(t,this.oauthToken))}}},{key:"appendFiles",value:function(e,t){var a=this;t&&(e.forEach((function(e){e.oauthToken=a.oauthToken,e.status="pending",e.dataFile=void 0})),this._selectedDocs.push.apply(this._selectedDocs,e),this.selectedDocTable&&this.selectedDocTable.renderRows())}},{key:"removeFromList",value:function(e){for(var t=0;t<this._selectedDocs.length;t++)if(this._selectedDocs[t].id===e){this._selectedDocs.splice(t,1);break}this.selectedDocTable&&this.selectedDocTable.renderRows()}},{key:"importFile",value:function(e){this.zone.run((function(){return e.status="importing"}));var t=this.projectService.importData(e.id,e.name,this.desc||e.description,e.mimeType,e.oauthToken,this.project.id,this.prefix,this.suffix,this.name,this.tags||[],this.folder||"",!!this.keepFileName).subscribe((function(a){t.unsubscribe(),a.isError?e.status="error":(e.status="success",e.dataFile=a.success)}))}},{key:"gotoDataFile",value:function(e){this.router.navigate(["/dataFile",e,"info"])}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onDeleteDataFile",value:function(e,t){this.removeFromList(t),this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"ngOnDestroy",value:function(){for(var e=Object.keys(this.authToPicker),t=0;t<e.length;t++)this.authToPicker[e[t]].dispose(),delete this.authToPicker[e[t]];e=Object.keys(this.authToAuthResult);for(var a=0;a<e.length;a++)this.authToAuthResult[this.oauthToken]["g-oauth-window"].close();this.authToPicker=void 0,delete this._gapi;for(var i=0;i<this._subs.length;i++)this._subs[i].unsubscribe()}},{key:"selectedDocs",get:function(){return this._selectedDocs}}]),e}()).\u0275fac=function(e){return new(e||wt)(i.Ob(c.a),i.Ob(o.c),i.Ob(Pe.a),i.Ob(y.a))},wt.\u0275cmp=i.Ib({type:wt,selectors:[["chi-google-picker"]],viewQuery:function(e,t){var a;1&e&&i.Rc(C.n,!0),2&e&&i.xc(a=i.dc())&&(t.selectedDocTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",tags:"tags",keepFileName:"keepFileName",folder:"folder",apiKey:"apiKey",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:1,vars:1,consts:[["class","container-fluid p-3",4,"ngIf"],[1,"container-fluid","p-3"],["mat-raised-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","mt-3","mat-button","",3,"click",4,"ngIf"],["class","mt-3","mat-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],["mat-button","",1,"mt-3",3,"click"],["mat-button","","color","primary",1,"mt-3",3,"click"],[1,"row"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","mimeType"],["matColumnDef","iconUrl"],["matColumnDef","name"],["matColumnDef","status"],["mat-cell","","class","px-2",3,"ngSwitch",4,"matCellDef"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","importBtn"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],["style","width: 100%;",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[3,"src"],["target","_blank",3,"href"],["mat-cell","",1,"px-2",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],[1,"text-info"],[1,"fa","fa-hourglass-half"],[1,"text-warning"],[1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"text-danger"],[1,"fas","fa-times","fa-fw"],[3,"packages","tasks","tags","tagChange",4,"ngIf"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-raised-button","",3,"disabled","click"],[1,"fas","fa-cloud-upload-alt","fa-fw","fa-lg","mr-4"],[4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&i.Jc(0,xt,5,4,"div",0),2&e&&i.nc("ngIf",t.clientId)},directives:[s.n,h.b,C.n,C.c,C.i,C.b,C.k,C.m,C.h,C.a,l.b,f.a,u.b,u.e,u.i,u.l,s.p,s.q,v.a,h.a,o.f,C.j,C.l],encapsulation:2,data:{animation:[U]}}),wt);function Lt(e,t){1&e&&i.Pb(0,"th",23)}function Pt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Ub(1,"div",25),i.Ub(2,"button",26),i.cc("click",(function(){i.Bc(a);var e=t.$implicit;return i.gc(2).removeFromList(e.dataFile.id)})),i.Pb(3,"i",27),i.Tb(),i.Tb(),i.Tb()}}function St(e,t){1&e&&(i.Ub(0,"th",28),i.Lc(1,"Prefix"),i.Tb())}function Jt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Ub(1,"mat-form-field",1),i.Ub(2,"input",29),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.dataFile.prefix=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.dataFile.prefix)}}function Ot(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1,"DataFile name"),i.Tb())}function Rt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Ub(1,"mat-form-field",1),i.Ub(2,"input",30),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.dataFile.name=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.dataFile.name)}}function Mt(e,t){1&e&&(i.Ub(0,"th",28),i.Lc(1,"Suffix"),i.Tb())}function jt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Ub(1,"mat-form-field",1),i.Ub(2,"input",31),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.dataFile.suffix=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.dataFile.suffix)}}function $t(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1," Status "),i.Tb())}function _t(e,t){1&e&&(i.Ub(0,"span"),i.Pb(1,"span",33),i.Lc(2,"Importing"),i.Tb())}function At(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",34),i.Lc(2,"Success"),i.Tb(),i.Tb())}function Et(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",35),i.Lc(2,"Deleting"),i.Tb(),i.Tb())}function Bt(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",36),i.Lc(2,"Error"),i.Tb(),i.Tb())}function Vt(e,t){if(1&e&&(i.Ub(0,"td",24),i.Jc(1,_t,3,0,"span",32),i.Jc(2,At,3,0,"span",32),i.Jc(3,Et,3,0,"span",32),i.Jc(4,Bt,3,0,"span",32),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",0===a.dataFile.status),i.Cb(1),i.nc("ngIf",1===a.dataFile.status),i.Cb(1),i.nc("ngIf",3===a.dataFile.status),i.Cb(1),i.nc("ngIf",4===a.dataFile.status)}}function Nt(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1," Tags "),i.Tb())}function zt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Ub(1,"bdp-tag-input",37),i.cc("tagChange",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(2).onTagChanged(e,n.dataFile)})),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.Cb(1),i.nc("packages",c.project.packages)("tasks",c.tasks)("tags",n.dataFile.tags)}}function Ht(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1,"Original Path"),i.Tb())}function qt(e,t){if(1&e&&(i.Ub(0,"td",24),i.Ub(1,"span"),i.Lc(2),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.Cb(2),i.Mc(a.originalPath)}}function Kt(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1," Link "),i.Tb())}function Gt(e,t){1&e&&i.Pb(0,"td",24)}function Xt(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1," Controls "),i.Tb())}var Qt=function(e){return["/dataFile",e,"info"]};function Yt(e,t){if(1&e&&(i.Ub(0,"a",42),i.Pb(1,"i",43),i.Tb()),2&e){var a=i.gc().$implicit;i.nc("routerLink",i.rc(1,Qt,a.dataFile.id))}}function Wt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",39),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc(2).onUpdateDataFile(e.dataFile)})),i.Pb(1,"i",44),i.Tb()}}function Zt(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",24),i.Jc(1,Yt,2,3,"a",38),i.Ub(2,"button",39),i.cc("click",(function(){i.Bc(a);var e=t.$implicit;return i.gc(2).onDeleteDataFile(e.dataFile.id)})),i.Pb(3,"i",40),i.Tb(),i.Jc(4,Wt,2,0,"button",41),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(1),i.nc("ngIf",n),i.Cb(3),i.nc("ngIf",3!==n.status)}}function ea(e,t){1&e&&i.Pb(0,"tr",45)}function ta(e,t){if(1&e){var a=i.Vb();i.Ub(0,"tr",46),i.cc("@highlightRows.done",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(2).resetState(e,n.dataFile)})),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.nc("@highlightRows",n&&n.dataFile&&c.highlightController[n.dataFile.id]?"active":"inactive")}}var aa=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","OriginalPath","tags","controls"]};function ia(e,t){if(1&e&&(i.Ub(0,"table",8),i.Sb(1,9),i.Jc(2,Lt,1,0,"th",10),i.Jc(3,Pt,4,0,"td",11),i.Rb(),i.Sb(4,12),i.Jc(5,St,2,0,"th",13),i.Jc(6,Jt,3,1,"td",11),i.Rb(),i.Sb(7,14),i.Jc(8,Ot,2,0,"th",10),i.Jc(9,Rt,3,1,"td",11),i.Rb(),i.Sb(10,15),i.Jc(11,Mt,2,0,"th",13),i.Jc(12,jt,3,1,"td",11),i.Rb(),i.Sb(13,16),i.Jc(14,$t,2,0,"th",10),i.Jc(15,Vt,5,4,"td",11),i.Rb(),i.Sb(16,17),i.Jc(17,Nt,2,0,"th",10),i.Jc(18,zt,2,3,"td",11),i.Rb(),i.Sb(19,18),i.Jc(20,Ht,2,0,"th",10),i.Jc(21,qt,3,1,"td",11),i.Rb(),i.Sb(22,19),i.Jc(23,Kt,2,0,"th",10),i.Jc(24,Gt,1,0,"td",11),i.Rb(),i.Sb(25,20),i.Jc(26,Xt,2,0,"th",10),i.Jc(27,Zt,5,2,"td",11),i.Rb(),i.Jc(28,ea,1,0,"tr",21),i.Jc(29,ta,1,1,"tr",22),i.Tb()),2&e){var a=i.gc();i.nc("dataSource",a.importedRecords),i.Cb(28),i.nc("matHeaderRowDef",i.qc(3,aa)),i.Cb(1),i.nc("matRowDefColumns",i.qc(4,aa))}}var na,ca=((na=function(){function e(t,a,n){_classCallCheck(this,e),this.infoService=t,this.projectService=a,this.router=n,this.navigateDataFile=new i.o,this.deleteDataFile=new i.o,this.updateDataFile=new i.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.highlightController={},this.directLink=!1,this._subs=[],this.importedRecords=[],this.newPath="",this._subs.push(this.infoService.incomingDataChange$.subscribe((function(t){if("update"===t.type&&"DataFile"===t.target)for(var a=t.data,i=0;i<e.importedRecords.length;i++){var n=e.importedRecords[i].dataFile;if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]||(e.highlightController[a.id]=!0);break}}else"remove"===t.type&&"DataFile"===t.target&&e.removeFromList(t.data.id)})))}},{key:"importFromFolder",value:function(){var e=this;if(this.newPath){var t=this.newPath;this.newPath="";var a=this.projectService.importFromPath(t,this.project.id,this.directLink,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder||"",this.keepFileName).subscribe((function(i){a.unsubscribe(),i.success&&(e.importedRecords.push({originalPath:t,dataFile:i.success}),e.importedTable&&e.importedTable.renderRows())}))}}},{key:"removeFromList",value:function(e){for(var t=0;t<this.importedRecords.length;t++)if(this.importedRecords[t].dataFile&&this.importedRecords[t].dataFile.id&&this.importedRecords[t].dataFile.id===e){this.importedRecords.splice(t,1);break}this.importedTable&&this.importedTable.renderRows()}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){this.removeFromList(e),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){for(var e=0;e<this._subs.length;e++)this._subs[e].unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||na)(i.Ob(y.a),i.Ob(c.a),i.Ob(o.c))},na.\u0275cmp=i.Ib({type:na,selectors:[["chi-path-importer"]],viewQuery:function(e,t){var a;1&e&&i.Rc(C.n,!0),2&e&&i.xc(a=i.dc())&&(t.importedTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:14,vars:4,consts:[[1,"mt-3"],[2,"width","100%"],["matInput","","type","text","placeholder","The path on the server to import",3,"ngModel","ngModelChange"],["align","end"],[3,"ngModel","ngModelChange"],[1,"text-muted"],["mat-raised-button","","color","primary",1,"my-5",3,"disabled","click"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","OriginalPath"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times"],["mat-header-cell","",2,"width","80px"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"fas","fa-spin","fa-circle-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","text-success"],["aria-hidden","true",1,"far","fa-trash-alt","text-success"],["aria-hidden","true",1,"fas","fa-times","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i.Ub(0,"h4",0),i.Lc(1,"Importing from the server path"),i.Tb(),i.Ub(2,"mat-form-field",1),i.Ub(3,"input",2),i.cc("ngModelChange",(function(e){return t.newPath=e})),i.Tb(),i.Ub(4,"mat-hint",3),i.Lc(5,"Please specify the folder path that already on the server."),i.Tb(),i.Tb(),i.Ub(6,"mat-checkbox",4),i.cc("ngModelChange",(function(e){return t.directLink=e})),i.Lc(7," Creating soft links directly\n"),i.Tb(),i.Ub(8,"div"),i.Ub(9,"small",5),i.Lc(10,"*Creating soft links directly is fast but you may encounter `file not found` errors in some situations."),i.Tb(),i.Tb(),i.Ub(11,"button",6),i.cc("click",(function(){return t.importFromFolder()})),i.Lc(12,"Import"),i.Tb(),i.Jc(13,ia,30,5,"table",7)),2&e&&(i.Cb(3),i.nc("ngModel",t.newPath),i.Cb(3),i.nc("ngModel",t.directLink),i.Cb(5),i.nc("disabled",!t.newPath),i.Cb(2),i.nc("ngIf",t.importedRecords.length>0))},directives:[l.b,f.a,u.b,u.i,u.l,l.e,g.a,h.b,s.n,C.n,C.c,C.i,C.b,C.k,C.m,C.h,C.a,u.e,v.a,h.a,o.f,C.j,C.l],encapsulation:2,data:{animation:[U]}}),na);function oa(e,t){1&e&&i.Pb(0,"th",18)}function sa(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Ub(1,"div",20),i.Ub(2,"button",21),i.cc("click",(function(){i.Bc(a);var e=t.index;return i.gc(2).removeRecords(e)})),i.Pb(3,"i",22),i.Tb(),i.Tb(),i.Tb()}}function ra(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1,"Prefix"),i.Tb())}function la(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Ub(1,"mat-form-field",24),i.Ub(2,"input",25),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.prefix=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.prefix)}}function fa(e,t){1&e&&(i.Ub(0,"th",18),i.Lc(1,"DataFile name"),i.Tb())}function ua(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Ub(1,"mat-form-field",24),i.Ub(2,"input",26),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.name=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.name)}}function ba(e,t){1&e&&(i.Ub(0,"th",23),i.Lc(1,"Suffix"),i.Tb())}function da(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Ub(1,"mat-form-field",24),i.Ub(2,"input",27),i.cc("ngModelChange",(function(e){return i.Bc(a),t.$implicit.suffix=e})),i.Tb(),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(2),i.nc("ngModel",n.suffix)}}function ga(e,t){1&e&&(i.Ub(0,"th",18),i.Lc(1," Status "),i.Tb())}function pa(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",29),i.Lc(2,"Aborted"),i.Tb(),i.Tb())}function ha(e,t){1&e&&(i.Ub(0,"span"),i.Pb(1,"span",30),i.Lc(2,"Uploading"),i.Tb())}function ma(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",31),i.Lc(2,"Success"),i.Tb(),i.Tb())}function va(e,t){1&e&&(i.Ub(0,"span"),i.Ub(1,"span",32),i.Lc(2,"Error"),i.Tb(),i.Tb())}function Ta(e,t){if(1&e&&(i.Ub(0,"td",19),i.Jc(1,pa,3,0,"span",28),i.Jc(2,ha,3,0,"span",28),i.Jc(3,ma,3,0,"span",28),i.Jc(4,va,3,0,"span",28),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a.abort),i.Cb(1),i.nc("ngIf",a.uploading),i.Cb(1),i.nc("ngIf",a.done&&!a.error),i.Cb(1),i.nc("ngIf",a.error)}}function ka(e,t){1&e&&(i.Ub(0,"th",18),i.Lc(1," Tags "),i.Tb())}function Ca(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Ub(1,"bdp-tag-input",33),i.cc("tagChange",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(2).onTagChanged(e,n)})),i.Tb(),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.Cb(1),i.nc("packages",c.project.packages)("tasks",c.tasks)("tags",n.tags)}}function Fa(e,t){1&e&&(i.Ub(0,"th",18),i.Lc(1," Link "),i.Tb())}var Ua=function(e){return["/dataFile",e,"info"]};function Da(e,t){if(1&e&&(i.Ub(0,"a",35),i.Pb(1,"span",36),i.Tb()),2&e){var a=i.gc().$implicit;i.nc("routerLink",i.rc(1,Ua,a.id))}}function ya(e,t){if(1&e&&(i.Ub(0,"td",19),i.Jc(1,Da,2,3,"a",34),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf",a)}}function xa(e,t){1&e&&(i.Ub(0,"th",18),i.Lc(1," Controls "),i.Tb())}function wa(e,t){if(1&e&&(i.Ub(0,"a",35),i.Pb(1,"span",36),i.Tb()),2&e){var a=i.gc().$implicit;i.nc("routerLink",i.rc(1,Ua,a.id))}}function Ia(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",40),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc(2).onUpdateDataFile(e)})),i.Pb(1,"i",41),i.Tb()}if(2&e){var n=i.gc().$implicit,c=i.gc(2);i.nc("disabled",c.updatingIndicator[n.id])}}function La(e,t){if(1&e){var a=i.Vb();i.Ub(0,"td",19),i.Jc(1,wa,2,3,"a",34),i.Ub(2,"button",37),i.cc("click",(function(){i.Bc(a);var e=t.$implicit;return i.gc(2).onDeleteDataFile(e.id)})),i.Pb(3,"i",38),i.Tb(),i.Jc(4,Ia,2,1,"button",39),i.Tb()}if(2&e){var n=t.$implicit;i.Cb(1),i.nc("ngIf",n),i.Cb(3),i.nc("ngIf",3!==n.status)}}function Pa(e,t){1&e&&i.Pb(0,"tr",42)}function Sa(e,t){if(1&e){var a=i.Vb();i.Ub(0,"tr",43),i.cc("@highlightRows.done",(function(e){i.Bc(a);var n=t.$implicit;return i.gc(2).resetState(e,n)})),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.nc("@highlightRows",n&&c.highlightController[n.id]?"active":"inactive")}}var Ja=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Oa(e,t){if(1&e&&(i.Ub(0,"table",4),i.Sb(1,5),i.Jc(2,oa,1,0,"th",6),i.Jc(3,sa,4,0,"td",7),i.Rb(),i.Sb(4,8),i.Jc(5,ra,2,0,"th",9),i.Jc(6,la,3,1,"td",7),i.Rb(),i.Sb(7,10),i.Jc(8,fa,2,0,"th",6),i.Jc(9,ua,3,1,"td",7),i.Rb(),i.Sb(10,11),i.Jc(11,ba,2,0,"th",9),i.Jc(12,da,3,1,"td",7),i.Rb(),i.Sb(13,12),i.Jc(14,ga,2,0,"th",6),i.Jc(15,Ta,5,4,"td",7),i.Rb(),i.Sb(16,13),i.Jc(17,ka,2,0,"th",6),i.Jc(18,Ca,2,3,"td",7),i.Rb(),i.Sb(19,14),i.Jc(20,Fa,2,0,"th",6),i.Jc(21,ya,2,1,"td",7),i.Rb(),i.Sb(22,15),i.Jc(23,xa,2,0,"th",6),i.Jc(24,La,5,2,"td",7),i.Rb(),i.Jc(25,Pa,1,0,"tr",16),i.Jc(26,Sa,1,1,"tr",17),i.Tb()),2&e){var a=i.gc();i.nc("dataSource",a.addedFolders),i.Cb(25),i.nc("matHeaderRowDef",i.qc(3,Ja)),i.Cb(1),i.nc("matRowDefColumns",i.qc(4,Ja))}}var Ra,Ma=((Ra=function(){function e(t,a){_classCallCheck(this,e),this.projectService=t,this.infoService=a,this.navigateDataFile=new i.o,this.deleteDataFile=new i.o,this.updateDataFile=new i.o,this._subs=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.highlightController={},this.updatingIndicator={},this.addedFolders=[],this._subs.push(this.infoService.incomingDataChange$.subscribe((function(t){if("update"===t.type&&"DataFile"===t.target)for(var a=t.data,i=0;i<e.addedFolders.length;i++){var n=e.addedFolders[i];if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]=!0;break}}else if("remove"===t.type&&"DataFile"===t.target)for(var c=0;c<e.addedFolders.length;c++){var o=e.addedFolders[c];if(o&&o.id===t.data.id){e.removeRecords(c);break}}})))}},{key:"createFolder",value:function(){var e=this;this.projectService.createFolder(this.project.id,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder,this.keepFileName).subscribe((function(t){t.isError||(e.addedFolders.push(t.success),e.addedFolderTable&&e.addedFolderTable.renderRows())}))}},{key:"removeRecords",value:function(e){console.log(e),this.addedFolders.splice(e,1),this.addedFolderTable.renderRows()}},{key:"resetState",value:function(e,t){var a=this;t.id&&(delete this.highlightController[t.id],setTimeout((function(){delete a.updatingIndicator[t.id]}),1e3))}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updatingIndicator[e.id]=!0,this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.addedFolders.length;t++)if(this.addedFolders[t].id===e){this.addedFolders.splice(t,1);break}this.addedFolderTable.renderRows(),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){this._subs.map((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||Ra)(i.Ob(c.a),i.Ob(y.a))},Ra.\u0275cmp=i.Ib({type:Ra,selectors:[["chi-add-folder"]],viewQuery:function(e,t){var a;1&e&&i.Rc(C.n,!0),2&e&&i.xc(a=i.dc())&&(t.addedFolderTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:5,vars:1,consts:[[1,"p-3"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],[1,"fas","fa-folder-plus","mr-3","fa-fw","fa-lg"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-muted"],[1,"fas","fa-spin","fa-circle-o-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","fa-fw","text-success"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-icon-button","","type","button",3,"disabled","click"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"button",1),i.cc("click",(function(){return t.createFolder()})),i.Pb(2,"span",2),i.Lc(3,"Add an empty folder "),i.Tb(),i.Jc(4,Oa,27,5,"table",3),i.Tb()),2&e&&(i.Cb(4),i.nc("ngIf",t.addedFolders.length>0))},directives:[h.b,s.n,C.n,C.c,C.i,C.b,C.k,C.m,C.h,C.a,l.b,f.a,u.b,u.e,u.i,u.l,v.a,h.a,o.f,C.j,C.l],encapsulation:2,data:{animation:[U]}}),Ra);function ja(e,t){if(1&e&&(i.Ub(0,"div",34),i.Pb(1,"h1",35),i.Ub(2,"button",36),i.Ub(3,"mat-icon"),i.Lc(4,"close"),i.Tb(),i.Tb(),i.Tb()),2&e){var a=i.gc(2);i.Cb(1),i.nc("innerHTML",a.title,i.Cc)}}function $a(e,t){if(1&e){var a=i.Vb();i.Ub(0,"div",5),i.Ub(1,"bdp-tag-input",37),i.cc("tagChange",(function(e){return i.Bc(a),i.gc(2).onTagChanged(e)})),i.Tb(),i.Tb()}if(2&e){var n=i.gc(2);i.Cb(1),i.nc("packages",n.project.packages)("tasks",n.tasks)("tags",n.tags)}}function _a(e,t){if(1&e&&(i.Ub(0,"mat-option",24),i.Ub(1,"u",4),i.Lc(2),i.Tb(),i.Lc(3),i.Ub(4,"u",4),i.Lc(5),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.nc("value",a.id),i.Cb(2),i.Mc(a.prefix),i.Cb(1),i.Mc(a.name),i.Cb(2),i.Mc(a.suffix)}}function Aa(e,t){1&e&&(i.Sb(0),i.Ub(1,"span",38),i.Lc(2,"All extensions"),i.Tb(),i.Rb())}function Ea(e,t){if(1&e&&(i.Ub(0,"span",40),i.Lc(1),i.Tb()),2&e){var a=t.$implicit;i.Cb(1),i.Mc(a)}}function Ba(e,t){if(1&e&&i.Jc(0,Ea,2,1,"span",39),2&e){var a=i.gc(2);i.nc("ngForOf",a.allowedFormats)}}function Va(e,t){1&e&&(i.Ub(0,"div",41),i.Ub(1,"div",42),i.Ub(2,"span",43),i.Lc(3,"No valid extensions!"),i.Pb(4,"br"),i.Lc(5,"You might want to check if you have specify packages for this project."),i.Tb(),i.Tb(),i.Tb())}function Na(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"chi-file-uploader",44),i.cc("updateDataFile",(function(e){return i.Bc(a),i.gc(2).onUpdateDataFile(e)}))("navigateDataFile",(function(e){return i.Bc(a),i.gc(2).onNavigateDataFile(e)}))("deleteDataFile",(function(e){return i.Bc(a),i.gc(2).onDeleteDataFile(e)})),i.Tb(),i.Rb()}if(2&e){var n=i.gc(2);i.Cb(1),i.nc("project",n.project)("allowedExtensions",n.allowedFormats)("fileLimits",n.sysConfig.fileLimits)("tasks",n.tasks)("tags",n.tags)("folder",n.parentDataFileID)("keepFileName",n.keepFileName)("name",n.name)("desc",n.desc)("prefix",n.prefix)("suffix",n.suffix)}}function za(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"chi-google-picker",45),i.cc("updateDataFile",(function(e){return i.Bc(a),i.gc(2).onUpdateDataFile(e)}))("navigateDataFile",(function(e){return i.Bc(a),i.gc(2).onNavigateDataFile(e)}))("deleteDataFile",(function(e){return i.Bc(a),i.gc(2).onDeleteDataFile(e)})),i.Tb(),i.Rb()}if(2&e){var n=i.gc(2);i.Cb(1),i.nc("project",n.project)("allowedExtensions",n.allowedFormats)("apiKey",n.sysConfig.googlePickerAPIKey)("tasks",n.tasks)("tags",n.tags)("folder",n.parentDataFileID)("keepFileName",n.keepFileName)("name",n.name)("desc",n.desc)("prefix",n.prefix)("suffix",n.suffix)}}function Ha(e,t){if(1&e){var a=i.Vb();i.Ub(0,"chi-path-importer",47),i.cc("updateDataFile",(function(e){return i.Bc(a),i.gc(3).onUpdateDataFile(e)}))("navigateDataFile",(function(e){return i.Bc(a),i.gc(3).onNavigateDataFile(e)}))("deleteDataFile",(function(e){return i.Bc(a),i.gc(3).onDeleteDataFile(e)})),i.Tb()}if(2&e){var n=i.gc(3);i.nc("project",n.project)("allowedExtensions",n.allowedFormats)("tasks",n.tasks)("tags",n.tags)("folder",n.parentDataFileID)("keepFileName",n.keepFileName)("name",n.name)("desc",n.desc)("prefix",n.prefix)("suffix",n.suffix)}}function qa(e,t){if(1&e&&(i.Sb(0),i.Jc(1,Ha,1,10,"chi-path-importer",46),i.Rb()),2&e){var a=i.gc(2);i.Cb(1),i.nc("ngIf",a.currentUser&&a.currentUser.auths&&a.currentUser.auths.bdp&&a.currentUser.auths.bdp>=3)}}function Ka(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"chi-add-folder",47),i.cc("updateDataFile",(function(e){return i.Bc(a),i.gc(2).onUpdateDataFile(e)}))("navigateDataFile",(function(e){return i.Bc(a),i.gc(2).onNavigateDataFile(e)}))("deleteDataFile",(function(e){return i.Bc(a),i.gc(2).onDeleteDataFile(e)})),i.Tb(),i.Rb()}if(2&e){var n=i.gc(2);i.Cb(1),i.nc("project",n.project)("allowedExtensions",n.allowedFormats)("tasks",n.tasks)("tags",n.tags)("folder",n.parentDataFileID)("keepFileName",n.keepFileName)("name",n.name)("desc",n.desc)("prefix",n.prefix)("suffix",n.suffix)}}function Ga(e,t){1&e&&(i.Ub(0,"div",41),i.Ub(1,"span",43),i.Lc(2,"No valid extensions!"),i.Pb(3,"br"),i.Lc(4,"You might want to check if you have specify packages for this project."),i.Tb(),i.Tb())}function Xa(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Jc(1,ja,5,1,"div",1),i.Ub(2,"div",2),i.Ub(3,"div",3),i.Ub(4,"strong"),i.Lc(5,"1. Specify file information (optional)"),i.Tb(),i.Pb(6,"br"),i.Ub(7,"small",4),i.Lc(8,"*You may specify the basic information latter."),i.Tb(),i.Pb(9,"br"),i.Ub(10,"small",4),i.Lc(11,"*All files will be uploaded with the information"),i.Tb(),i.Tb(),i.Ub(12,"div",5),i.Ub(13,"mat-form-field",6),i.Ub(14,"input",7),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().prefix=e})),i.Tb(),i.Ub(15,"span",8),i.Lc(16,"Prefix: "),i.Tb(),i.Tb(),i.Ub(17,"mat-form-field",6),i.Ub(18,"input",9),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().suffix=e})),i.Tb(),i.Ub(19,"span",8),i.Lc(20,"Suffix: "),i.Tb(),i.Tb(),i.Ub(21,"mat-form-field",10),i.Ub(22,"input",11),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().name=e})),i.Tb(),i.Ub(23,"b",12),i.Lc(24,"Name: "),i.Tb(),i.Ub(25,"span",13),i.Pb(26,"u",14),i.Tb(),i.Ub(27,"span",15),i.Pb(28,"u",14),i.Tb(),i.Ub(29,"mat-hint",16),i.Lc(30,"Leave it blank if using the original file name(s)."),i.Tb(),i.Ub(31,"mat-hint",17),i.Lc(32,"Max 80 characters"),i.Tb(),i.Tb(),i.Ub(33,"mat-form-field",10),i.Ub(34,"textarea",18),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().desc=e})),i.Lc(35),i.Tb(),i.Ub(36,"mat-hint",16),i.Lc(37,"You may specify the description latter."),i.Tb(),i.Ub(38,"mat-hint",17),i.Lc(39,"Max 300 characters"),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(40,"div",2),i.Ub(41,"div",3),i.Ub(42,"strong"),i.Lc(43,"2. Define tags for your files (optional)"),i.Tb(),i.Pb(44,"br"),i.Ub(45,"small",4),i.Lc(46,"*You may also specify tags for your files."),i.Tb(),i.Tb(),i.Jc(47,$a,2,3,"div",19),i.Tb(),i.Ub(48,"div",2),i.Ub(49,"div",3),i.Ub(50,"strong"),i.Lc(51,"3. Set a folder to upload (optional)"),i.Tb(),i.Pb(52,"br"),i.Ub(53,"small",4),i.Lc(54,"*Only needed when your expect your files in a folder."),i.Tb(),i.Tb(),i.Ub(55,"div",5),i.Ub(56,"mat-form-field",10),i.Ub(57,"mat-select",20),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().parentDataFileID=e})),i.Ub(58,"mat-option"),i.Lc(59,"--- No folder ---"),i.Tb(),i.Jc(60,_a,6,4,"mat-option",21),i.Tb(),i.Tb(),i.Ub(61,"mat-checkbox",22),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().keepFileName=e})),i.Lc(62,"Keep the underlying filename in the folder"),i.Tb(),i.Pb(63,"br"),i.Ub(64,"small",4),i.Lc(65,"*Note: The uploading will fail if the filename already exists in the folder"),i.Tb(),i.Tb(),i.Tb(),i.Ub(66,"div",2),i.Ub(67,"div",3),i.Ub(68,"strong"),i.Lc(69,"4. Specify the file source"),i.Tb(),i.Tb(),i.Ub(70,"div",5),i.Ub(71,"mat-button-toggle-group",23),i.cc("ngModelChange",(function(e){return i.Bc(a),i.gc().onImportTypeChanged(e)})),i.Ub(72,"mat-button-toggle",24),i.Pb(73,"i",25),i.Lc(74," Your Computer "),i.Tb(),i.Ub(75,"mat-button-toggle",24),i.Pb(76,"i",26),i.Lc(77," Add a folder "),i.Tb(),i.Ub(78,"mat-button-toggle",24),i.Pb(79,"i",27),i.Lc(80," Google Drive "),i.Tb(),i.Ub(81,"mat-button-toggle",24),i.Pb(82,"i",28),i.Lc(83," Server Path "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(84,"div",2),i.Ub(85,"div",3),i.Ub(86,"strong"),i.Lc(87,"5. Upload and set files"),i.Tb(),i.Pb(88,"br"),i.Tb(),i.Ub(89,"div",5),i.Lc(90," The Valid file extensions: "),i.Jc(91,Aa,3,0,"ng-container",29),i.Jc(92,Ba,1,1,"ng-template",null,30,i.Kc),i.Tb(),i.Jc(94,Va,6,0,"div",31),i.Ub(95,"div",32),i.Jc(96,Na,2,11,"ng-container",33),i.Jc(97,za,2,11,"ng-container",33),i.Jc(98,qa,2,1,"ng-container",33),i.Jc(99,Ka,2,10,"ng-container",33),i.Tb(),i.Jc(100,Ga,5,0,"div",31),i.Tb(),i.Rb()}if(2&e){var n=i.yc(93),c=i.gc();i.Cb(1),i.nc("ngIf",c.dialogRef),i.Cb(13),i.nc("ngModel",c.prefix),i.Cb(4),i.nc("ngModel",c.suffix),i.Cb(4),i.nc("ngModel",c.name),i.Cb(4),i.nc("innerHTML",c.prefix,i.Cc),i.Cb(2),i.nc("innerHTML",c.suffix,i.Cc),i.Cb(6),i.nc("ngModel",c.desc),i.Cb(1),i.Mc(c.desc),i.Cb(12),i.nc("ngIf",c.project&&c.project.packages.length>0),i.Cb(10),i.nc("ngModel",c.parentDataFileID),i.Cb(3),i.nc("ngForOf",c.folders),i.Cb(1),i.nc("ngModel",c.keepFileName)("disabled",!c.parentDataFileID),i.Cb(10),i.nc("ngModel",c.importType),i.Cb(1),i.nc("value","local"),i.Cb(3),i.nc("value","folder"),i.Cb(3),i.nc("value","google"),i.Cb(3),i.nc("value","server"),i.Cb(10),i.nc("ngIf",c.allowedFormats.indexOf("*")>=0)("ngIfElse",n),i.Cb(3),i.nc("ngIf",0==c.allowedFormats.length),i.Cb(1),i.nc("ngSwitch",c.importType),i.Cb(1),i.nc("ngSwitchCase","local"),i.Cb(1),i.nc("ngSwitchCase","google"),i.Cb(1),i.nc("ngSwitchCase","server"),i.Cb(1),i.nc("ngSwitchCase","folder"),i.Cb(1),i.nc("ngIf",0==c.allowedFormats.length)}}function Qa(e,t){1&e&&(i.Ub(0,"mat-dialog-actions"),i.Ub(1,"button",48),i.Ub(2,"mat-icon"),i.Lc(3,"close"),i.Tb(),i.Lc(4," Close"),i.Tb(),i.Tb())}var Ya,Wa=((Ya=function(){function e(t,a,n,c){_classCallCheck(this,e),this.projectService=t,this.router=a,this.dialogRef=n,this.data=c,this.importTypeChanged=new i.o,this.keepFileName=!0,this._subs=[],this.tags=[],c?(this.project=c.project,this.allowedFormats=c.allowedFormats.indexOf("*")>=0?["*"]:c.allowedFormats,this.sysConfig=c.sysConfig,this.importType=c.importType||"local",this.tasks=c.tasks,this.parentDataFileID=c.parentDataFileID||"",this.currentUser=c.currentUser,this.name=c.name||"",this.desc=c.desc||"",this.prefix=c.prefix||"",this.suffix=c.suffix||"",this.title=c.title||"Import data files "+(c.project&&c.project.name?"to the project: ".concat(c.project.name,"."):""),this.tags=Array.isArray(c.tags)?c.tags:[],console.log(this.tags)):(this.allowedFormats=[],this.tasks=[],this.prefix="",this.suffix="",this.desc="",this.name="",this.parentDataFileID="",this.importType="local",this.tags=[],this.title="")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onImportTypeChanged",value:function(e){this.importType=e,this.importTypeChanged.emit(e)}},{key:"onTagChanged",value:function(e){console.log(e),this.tags=e}},{key:"onUpdateDataFile",value:function(e){var t=this.projectService.updateDataFileInfo(e).subscribe((function(){return t.unsubscribe()}))}},{key:"onDeleteDataFile",value:function(e){var t=this.projectService.deleteDataFileById(e).subscribe((function(){return t.unsubscribe()}))}},{key:"onNavigateDataFile",value:function(e){this.dialogRef&&this.dialogRef.close(),this.router.navigate(["/dataFile",e,"info"])}},{key:"ngOnDestroy",value:function(){this._subs.map((function(e){return e&&e.unsubscribe?e.unsubscribe():""}))}},{key:"folders",get:function(){return this.project&&this.project.dataFiles?this.project.dataFiles.filter((function(e){return"Folder"===e.format})):[]}}]),e}()).\u0275fac=function(e){return new(e||Ya)(i.Ob(c.a),i.Ob(o.c),i.Ob(n.g,8),i.Ob(n.a,8))},Ya.\u0275cmp=i.Ib({type:Ya,selectors:[["bdp-file-importer"]],inputs:{allowedFormats:"allowedFormats",project:"project",sysConfig:"sysConfig",importType:"importType",tasks:"tasks",currentUser:"currentUser",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",keepFileName:"keepFileName",title:"title",tags:"tags",parentDataFileID:"parentDataFileID"},outputs:{importTypeChanged:"importTypeChanged"},decls:3,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-row justify-content-between",4,"ngIf"],[1,"row","my-5"],[1,"col-lg-2","col-xl-3"],[1,"text-muted"],[1,"col-lg-10","col-xl-9"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The name for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2","text-primary"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["align","start"],["align","end"],["matInput","","placeholder","The description for the data file(s). (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],["class","col-lg-10 col-xl-9",4,"ngIf"],["placeholder","select a folder to import",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange"],["name","fileSource","aria-label","File Source",1,"ml-3",3,"ngModel","ngModelChange"],[3,"value"],[1,"far","fa-hdd","fa-fw","mr-2"],[1,"fas","fa-folder-plus","fa-fw","mr-2"],[1,"fab","fa-google-drive","fa-fw","mr-2"],[1,"fas","fa-server","fa-fw","mr-2"],[4,"ngIf","ngIfElse"],["extBlock",""],["class","col-12",4,"ngIf"],[1,"col-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-flex","flex-row","justify-content-between"],["mat-dialog-title","",2,"font-weight","800",3,"innerHTML"],["mat-icon-button","","mat-dialog-close",""],[3,"packages","tasks","tags","tagChange"],[1,"badge","badge-success","mx-1"],["class","badge badge-primary mx-1",4,"ngFor","ngForOf"],[1,"badge","badge-primary","mx-1"],[1,"col-12"],[1,"ml-3"],[1,"text-danger"],[3,"project","allowedExtensions","fileLimits","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","apiKey","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile",4,"ngIf"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],["mat-stroked-button","","mat-dialog-close",""]],template:function(e,t){1&e&&(i.Jc(0,Xa,101,27,"ng-container",0),i.Pb(1,"mat-divider"),i.Jc(2,Qa,5,0,"mat-dialog-actions",0)),2&e&&(i.nc("ngIf",t.project&&t.currentUser),i.Cb(2),i.nc("ngIf",t.dialogRef))},directives:[s.n,r.a,l.b,f.a,u.b,u.e,u.i,u.l,l.f,l.g,l.e,b.a,d.k,s.m,g.a,p.b,p.a,s.p,s.q,n.h,h.b,n.d,m.a,v.a,Le,It,ca,Ma,n.c],encapsulation:2}),Ya)},I7HA:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var i=a("fXoL"),n=a("+mqT"),c=a("FtGj"),o=a("0IaG"),s=a("ofXK"),r=a("f0Cb"),l=a("kmnG"),f=a("d3UM"),u=a("3Pt+"),b=a("bTqV"),d=a("A5z7"),g=a("NFeN"),p=a("FKr1");function h(e,t){1&e&&(i.Ub(0,"mat-icon",27),i.Lc(1,"cancel"),i.Tb())}function m(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-chip",25),i.cc("removed",(function(){i.Bc(a);var e=t.$implicit;return i.gc(2).toggleTag(e)})),i.Lc(1),i.Jc(2,h,2,0,"mat-icon",26),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.nc("removable",!0)("selectable",!1),i.Cb(1),i.Nc(" ",n," "),i.Cb(1),i.nc("ngIf",c.tags.indexOf(n)>=0&&"Folder"!==n)}}function v(e,t){if(1&e&&(i.Ub(0,"div",21),i.Ub(1,"h3"),i.Lc(2,"Current selected tags: "),i.Tb(),i.Ub(3,"mat-chip-list",22,23),i.Jc(5,m,3,4,"mat-chip",24),i.Tb(),i.Tb()),2&e){var a=i.gc();i.Cb(3),i.nc("selectable",!1),i.Cb(2),i.nc("ngForOf",a.tags)}}function T(e,t){if(1&e&&(i.Ub(0,"mat-option",28),i.Ub(1,"b"),i.Lc(2),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.nc("value",a),i.Cb(2),i.Mc(null==a?null:a.name)}}function k(e,t){if(1&e&&(i.Ub(0,"div"),i.Lc(1," Package name: "),i.Ub(2,"b"),i.Lc(3),i.Tb(),i.Pb(4,"br"),i.Lc(5," Package description: "),i.Pb(6,"div",29),i.Tb()),2&e){var a=i.gc();i.Cb(3),i.Mc(a.selectedPackage.name),i.Cb(3),i.nc("innerHTML",a.selectedPackage.desc,i.Cc)}}function C(e,t){1&e&&i.Pb(0,"i",37)}function F(e,t){1&e&&i.Pb(0,"i",38)}function U(e,t){1&e&&i.Pb(0,"i",39)}function D(e,t){1&e&&i.Pb(0,"i",40)}function y(e,t){if(1&e&&(i.Ub(0,"mat-option",31),i.Jc(1,C,1,0,"i",32),i.Jc(2,F,1,0,"i",33),i.Jc(3,U,1,0,"i",34),i.Jc(4,D,1,0,"i",35),i.Ub(5,"b",36),i.Lc(6),i.Tb(),i.Tb()),2&e){var a=t.$implicit;i.nc("value",a),i.Cb(1),i.nc("ngIf","workflow"==a.type),i.Cb(1),i.nc("ngIf","standard"==a.type),i.Cb(1),i.nc("ngIf","child"==a.type),i.Cb(1),i.nc("ngIf","system"==a.type),i.Cb(2),i.Mc(null==a?null:a.name)}}function x(e,t){if(1&e&&(i.Sb(0),i.Jc(1,y,7,6,"mat-option",30),i.Rb()),2&e){var a=i.gc();i.Cb(1),i.nc("ngForOf",a.taskPkgDict[a.selectedPackage.id])}}function w(e,t){if(1&e&&(i.Ub(0,"div"),i.Lc(1," Task name: "),i.Ub(2,"b"),i.Lc(3),i.Tb(),i.Pb(4,"br"),i.Lc(5," Task description: "),i.Pb(6,"div",29),i.Pb(7,"br"),i.Tb()),2&e){var a=i.gc();i.Cb(3),i.Mc(a.selectedTask.name),i.Cb(3),i.nc("innerHTML",a.selectedTask.desc,i.Cc)}}function I(e,t){if(1&e&&(i.Ub(0,"mat-option",42),i.Pb(1,"i",43),i.Ub(2,"b"),i.Lc(3),i.Tb(),i.Tb()),2&e){var a=i.gc().$implicit,n=i.gc();i.Ic("background-color","outFile"===a.type?"#28a745":"#047AFB"),i.nc("value",a),i.Cb(1),i.nc("ngClass",n.cssArgTypeToIcon(a)),i.Cb(2),i.Mc(a.name+" "+("inFile"===a.type?"(input)":"(output)"))}}function L(e,t){if(1&e&&(i.Sb(0),i.Jc(1,I,4,5,"mat-option",41),i.Rb()),2&e){var a=t.$implicit;i.Cb(1),i.nc("ngIf","inFile"===a.type||"outFile"===a.type)}}function P(e,t){if(1&e&&(i.Ub(0,"div"),i.Lc(1," Argument name: "),i.Ub(2,"b"),i.Lc(3),i.Tb(),i.Pb(4,"br"),i.Lc(5," Argument description: "),i.Pb(6,"div",29),i.Pb(7,"br"),i.Tb()),2&e){i.gc();var a=i.yc(27);i.Cb(3),i.Mc(null==a||null==a.selected?null:a.selected.value.name),i.Cb(3),i.nc("innerHTML",null==a||null==a.selected?null:a.selected.value.desc,i.Cc)}}function S(e,t){1&e&&(i.Ub(0,"mat-icon",27),i.Lc(1,"add_circle"),i.Tb())}function J(e,t){1&e&&(i.Ub(0,"mat-icon",27),i.Pb(1,"i",46),i.Tb())}function O(e,t){if(1&e){var a=i.Vb();i.Sb(0),i.Ub(1,"mat-chip",45),i.cc("removed",(function(){i.Bc(a);var e=t.$implicit;return i.gc(2).toggleTag(e)})),i.Lc(2),i.Jc(3,S,2,0,"mat-icon",26),i.Jc(4,J,2,0,"mat-icon",26),i.Tb(),i.Rb()}if(2&e){var n=t.$implicit,c=i.gc(2);i.Cb(1),i.nc("selectable",!1),i.Cb(1),i.Nc(" ",n," "),i.Cb(1),i.nc("ngIf",c.tags.indexOf(n)<0&&"Folder"!==n),i.Cb(1),i.nc("ngIf",c.tags.indexOf(n)>=0&&"Folder"!==n)}}function R(e,t){if(1&e&&(i.Ub(0,"div",44),i.Ub(1,"h2"),i.Lc(2,"Suggested tags:"),i.Tb(),i.Ub(3,"mat-chip-list"),i.Jc(4,O,5,4,"ng-container",15),i.Tb(),i.Tb()),2&e){i.gc();var a=i.yc(27);i.Cb(4),i.nc("ngForOf",null==a||null==a.selected?null:a.selected.value.tags)}}function M(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",47),i.cc("click",(function(){i.Bc(a);var e=i.gc(),t=i.yc(27);return e.addAllTags(null==t||null==t.selected?null:t.selected.value.tags)})),i.Lc(1," Add all suggested tags "),i.Tb()}}function j(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",48),i.cc("click",(function(){i.Bc(a);var e=i.gc(),t=i.yc(27);return e.removeAllTags(null==t||null==t.selected?null:t.selected.value.tags)})),i.Lc(1," Remove all suggested tags "),i.Tb()}}var $,_=(($=function(){function e(t,a){_classCallCheck(this,e),this.dialogRef=t,this.data=a,this.tagToggleEvent=new i.o,a?(this.packages=a.packages||[],this.taskPkgDict=a.taskPkgDict||{},this.tags=a.tags||[]):(this.packages=[],this.taskPkgDict={},this.tags=[])}return _createClass(e,[{key:"ngOnInit",value:function(){this.packages[0]&&(this.selectedPackage=this.packages[0],this.selectedTask=Array.isArray(this.taskPkgDict[this.selectedPackage.id])?this.taskPkgDict[this.selectedPackage.id][0]:void 0)}},{key:"onPackageSelctChange",value:function(e){var t=this;this.selectedPackage=e,setTimeout((function(){return t.selectedTask=Array.isArray(t.taskPkgDict[e.id])?t.taskPkgDict[e.id][0]:void 0}))}},{key:"toggleTag",value:function(e){"Folder"!==e&&this.tagToggleEvent.emit(e)}},{key:"addAllTags",value:function(e){var t=this;e.filter((function(e){return t.tags.indexOf(e)<0})).forEach((function(e){return t.toggleTag(e)}))}},{key:"removeAllTags",value:function(e){var t=this;e.filter((function(e){return t.tags.indexOf(e)>=0})).forEach((function(e){return t.toggleTag(e)}))}},{key:"cssArgTypeToIcon",value:function(e){if(e&&e.type)return{"fa-file-import":"inFile"===e.type,"fa-file-export":"outFile"===e.type}}}]),e}()).\u0275fac=function(e){return new(e||$)(i.Ob(o.g),i.Ob(o.a))},$.\u0275cmp=i.Ib({type:$,selectors:[["bdp-tag-helper-dialog"]],inputs:{packages:"packages",taskPkgDict:"taskPkgDict",tags:"tags"},outputs:{tagToggleEvent:"tagToggleEvent"},decls:37,vars:12,consts:[["mat-dialog-title",""],[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngIf"],[1,"my-2"],[1,"row","mt-3"],[1,"col-lg-4"],[2,"width","100%"],["placeholder","Please select the package",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Please select the desired task",3,"ngModel","ngModelChange"],["taskSelect",""],["placeholder","Please select the input"],["inputFileSelect",""],[4,"ngFor","ngForOf"],["class","col-12 my-3","style","border-left: 1px solid black",4,"ngIf"],["mat-dialog-actions","",1,"my-3"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"col-12"],[3,"selectable"],["tagList",""],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],[3,"removable","selectable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],["class","text-black","style","background-color: #ffc107",3,"value",4,"ngFor","ngForOf"],[1,"text-black",2,"background-color","#ffc107",3,"value"],["class","fas fa-cogs fa-fw mr-1",4,"ngIf"],["class","fas fa-cog fa-fw mr-1",4,"ngIf"],["class","fas fa-puzzle-piece fa-fw mr-1",4,"ngIf"],["class","fas fa-server fa-fw mr-1",4,"ngIf"],[1,"ml-3"],[1,"fas","fa-cogs","fa-fw","mr-1"],[1,"fas","fa-cog","fa-fw","mr-1"],[1,"fas","fa-puzzle-piece","fa-fw","mr-1"],[1,"fas","fa-server","fa-fw","mr-1"],["class","text-white",3,"value","background-color",4,"ngIf"],[1,"text-white",3,"value"],[1,"fas",3,"ngClass"],[1,"col-12","my-3",2,"border-left","1px solid black"],[3,"selectable","removed"],[1,"far","fa-check-circle","fa-fw","text-success"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,t){if(1&e&&(i.Ub(0,"h1",0),i.Lc(1,"DataFile Tag helper"),i.Tb(),i.Ub(2,"div",1),i.Ub(3,"div",2),i.Jc(4,v,6,2,"div",3),i.Tb(),i.Pb(5,"mat-divider",4),i.Ub(6,"div",5),i.Ub(7,"div",6),i.Ub(8,"h3"),i.Lc(9,"1. Whcih package do you plan to use for this file?"),i.Tb(),i.Ub(10,"mat-form-field",7),i.Ub(11,"mat-select",8),i.cc("ngModelChange",(function(e){return t.onPackageSelctChange(e)})),i.Jc(12,T,3,2,"mat-option",9),i.Tb(),i.Tb(),i.Jc(13,k,7,2,"div",10),i.Tb(),i.Ub(14,"div",6),i.Ub(15,"h3"),i.Lc(16,"2. Which task do you like to execute for this file?"),i.Tb(),i.Ub(17,"mat-form-field",7),i.Ub(18,"mat-select",11,12),i.cc("ngModelChange",(function(e){return t.selectedTask=e})),i.Jc(20,x,2,1,"ng-container",10),i.Tb(),i.Tb(),i.Jc(21,w,8,2,"div",10),i.Tb(),i.Ub(22,"div",6),i.Ub(23,"h3"),i.Lc(24,"3. Which input would this file be used as?"),i.Tb(),i.Ub(25,"mat-form-field",7),i.Ub(26,"mat-select",13,14),i.Jc(28,L,2,1,"ng-container",15),i.Tb(),i.Tb(),i.Jc(29,P,8,2,"div",10),i.Tb(),i.Jc(30,R,5,1,"div",16),i.Tb(),i.Pb(31,"mat-divider"),i.Ub(32,"div",17),i.Ub(33,"button",18),i.Lc(34,"Close"),i.Tb(),i.Jc(35,M,2,0,"button",19),i.Jc(36,j,2,0,"button",20),i.Tb(),i.Tb()),2&e){var a=i.yc(19),n=i.yc(27);i.Cb(4),i.nc("ngIf",t.tags.length>0),i.Cb(7),i.nc("ngModel",t.selectedPackage),i.Cb(1),i.nc("ngForOf",t.packages),i.Cb(1),i.nc("ngIf",t.selectedPackage),i.Cb(5),i.nc("ngModel",t.selectedTask),i.Cb(2),i.nc("ngIf",t.selectedPackage),i.Cb(1),i.nc("ngIf",t.selectedTask),i.Cb(7),i.nc("ngForOf",null==a||null==a.selected?null:a.selected.value.arguments),i.Cb(1),i.nc("ngIf",null==n||null==n.selected?null:n.selected.value),i.Cb(1),i.nc("ngIf",null==n||null==n.selected?null:n.selected.value),i.Cb(5),i.nc("ngIf",null==n||null==n.selected?null:n.selected.value.tags),i.Cb(1),i.nc("ngIf",null==n||null==n.selected?null:n.selected.value.tags)}},directives:[o.h,s.n,r.a,l.b,f.a,u.i,u.l,s.m,o.c,b.b,o.d,d.c,d.a,g.a,d.d,p.k,s.l],encapsulation:2}),$),A=a("/1cH");function E(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-icon",13),i.cc("click",(function(){i.Bc(a);var e=i.gc().$implicit;return i.gc().removeFromTags(e)})),i.Lc(1,"cancel"),i.Tb()}}function B(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-chip",11),i.cc("click",(function(e){i.Bc(a);var n=t.$implicit;return i.gc().onTagClick(e,n)})),i.Lc(1),i.Jc(2,E,2,0,"mat-icon",12),i.Tb()}if(2&e){var n=t.$implicit,c=i.gc();i.nc("color",c.highlightTags.indexOf(n)>=0?"primary":"default")("removable",!0)("selected",!0),i.Cb(1),i.Nc(" ",n," "),i.Cb(1),i.nc("ngIf",!c.disabled&&"Folder"!==n)}}function V(e,t){1&e&&(i.Ub(0,"mat-hint",14),i.Lc(1,"Valid characters: a-z, dash (-), and underline (_)."),i.Tb())}function N(e,t){if(1&e&&(i.Ub(0,"mat-option",15),i.Lc(1),i.Tb()),2&e){var a=t.$implicit;i.nc("value",a),i.Cb(1),i.Nc(" ",a," ")}}function z(e,t){if(1&e){var a=i.Vb();i.Ub(0,"button",16),i.cc("click",(function(){return i.Bc(a),i.gc().openTagHelperDialog()})),i.Ub(1,"mat-icon"),i.Pb(2,"i",17),i.Tb(),i.Tb()}}var H,q=((H=function(){function e(t){_classCallCheck(this,e),this.dialogRef=t,this.tagChange=new i.o,this.tagClicked=new i.o,this.separatorKeysCodes=[c.g,c.c],this.highlightTags=[],this.filteredTags=[],this.tags=[],this.tasks=[],this.taskPkgDict={},this.validTags=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t=this;for(var a in e)"packages"===a?this.packages=e[a].currentValue:"tasks"===a?(this.tasks=e[a].currentValue,this.updatePkgTaskDict()):"tags"===a?Array.isArray(e[a].currentValue)&&(this.tags=[],e[a].currentValue.forEach((function(e){return t.addTag(e,!0)}))):"disabled"===a&&(this.disabled=e[a].currentValue)}},{key:"updatePkgTaskDict",value:function(){var e=this;if(this.taskPkgDict={},Array.isArray(this.tasks)){for(var t=0;t<this.tasks.length;t++){var a=this.tasks[t],i=a.package&&a.package.id?a.package.id:null;i&&(Array.isArray(this.taskPkgDict[i])||(this.taskPkgDict[i]=[]),this.taskPkgDict[i].push(a))}Object.keys(this.taskPkgDict).forEach((function(t){return e.taskPkgDict[t]=Object(n.a)(e.taskPkgDict[t],[function(e){return e.name}],["asc"])})),this.validTags=this.getValidTags(this.tasks)}}},{key:"getValidTags",value:function(e){var t={};return e.forEach((function(e){return _toConsumableArray(new Set([].concat.apply([],e.arguments.filter((function(e){return"inFile"===e.type||"outFile"===e.type})).map((function(e){return e.tags}))))).forEach((function(e){return t[e.toString()]=1}))})),Object(n.a)(Object.keys(t),"asc")}},{key:"onTagInputChange",value:function(e,t){var a=this,i=t.value;i=i.replace(/[^a-z0-9\-]/g,""),this.filteredTags=this.validTags.filter((function(e){return e.indexOf(i)>=0&&a.tags.indexOf(e)<0&&"Folder"!==e})),t.value=i}},{key:"addTag",value:function(e,t){if("Folder"!==e){if(""===(e=(e=e.toLowerCase().replace(/[^a-z0-9\.\-\_]/g,"")).trim()))return;for(var a=0;a<this.tags.length;a++)if(e===this.tags[a])return}this.tags.push(e),this.tags=this.tags.slice(),t||this.tagChange.emit(this.tags)}},{key:"addToTags",value:function(e){var t=e.input;this.addTag(e.value),t&&setTimeout((function(){return t.value=""}))}},{key:"onTagSelect",value:function(e,t){this.removeFromTags(t.value,!0),t.value="",this.addTag(e.option.value)}},{key:"removeFromTags",value:function(e,t){for(var a=0;a<this.tags.length;a++)if(e===this.tags[a]){this.tags.splice(a,1);break}this.tags=this.tags.slice(),t||(console.log(this.tags),this.tagChange.emit(this.tags))}},{key:"onTagClick",value:function(e,t){e.stopPropagation(),this.tagClicked.emit(t)}},{key:"openTagHelperDialog",value:function(){var e=this,t=this.dialogRef.open(_,{width:"90vw",height:"90vh",data:{packages:this.packages,taskPkgDict:this.taskPkgDict,tags:this.tags}});t.componentInstance.tagToggleEvent.subscribe((function(a){if("Folder"!==a){var i=e.tags.indexOf(a);i>=0?e.tags.splice(i,1):e.tags.push(a),t.componentInstance.tags=e.tags,e.tagChange.emit(e.tags)}})),t.afterClosed().subscribe((function(){}))}}]),e}()).\u0275fac=function(e){return new(e||H)(i.Ob(o.b))},H.\u0275cmp=i.Ib({type:H,selectors:[["bdp-tag-input"]],inputs:{packages:"packages",tasks:"tasks",tags:"tags",disabled:"disabled",highlightTags:"highlightTags"},outputs:{tagChange:"tagChange",tagClicked:"tagClicked"},features:[i.Ab],decls:11,vars:11,consts:[[2,"width","100%"],[3,"selectable"],["tagList",""],[3,"color","removable","selected","click",4,"ngFor","ngForOf"],["matInput","",2,"width","100%",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matAutocomplete","disabled","matChipInputTokenEnd","keyup"],["tagInput",""],["align","end",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matPrefix","","class","mr-3",3,"click",4,"ngIf"],[3,"color","removable","selected","click"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],["align","end"],[3,"value"],["mat-icon-button","","matPrefix","",1,"mr-3",3,"click"],[1,"fas","fa-search-plus","fa-fw","fa-lg"]],template:function(e,t){if(1&e){var a=i.Vb();i.Ub(0,"mat-form-field",0),i.Ub(1,"mat-chip-list",1,2),i.Jc(3,B,3,5,"mat-chip",3),i.Ub(4,"input",4,5),i.cc("matChipInputTokenEnd",(function(e){return t.addToTags(e)}))("keyup",(function(e){i.Bc(a);var n=i.yc(5);return t.onTagInputChange(e,n)})),i.Tb(),i.Tb(),i.Jc(6,V,2,0,"mat-hint",6),i.Ub(7,"mat-autocomplete",7,8),i.cc("optionSelected",(function(e){i.Bc(a);var n=i.yc(5);return t.onTagSelect(e,n)})),i.Jc(9,N,2,2,"mat-option",9),i.Tb(),i.Jc(10,z,3,0,"button",10),i.Tb()}if(2&e){var n=i.yc(2),c=i.yc(8);i.Cb(1),i.nc("selectable",!0),i.Cb(2),i.nc("ngForOf",t.tags),i.Cb(1),i.nc("placeholder",t.disabled?"":"Add new tags here...")("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",!1)("matAutocomplete",c)("disabled",t.disabled),i.Cb(2),i.nc("ngIf",!t.disabled),i.Cb(3),i.nc("ngForOf",t.filteredTags),i.Cb(1),i.nc("ngIf",!t.disabled)}},directives:[l.b,d.c,s.m,d.b,A.c,s.n,A.a,d.a,g.a,d.d,l.e,p.k,b.b,l.f],encapsulation:2}),H)},nNey:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a("tyNb"),n=a("ofXK"),c=a("3Pt+"),o=a("bTqV"),s=a("Wp6s"),r=a("A5z7"),l=a("fXoL"),f=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,c.d,i.g,o.c,s.h,r.e]]}),e}()},pkYj:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var i,n,c=a("ofXK"),o=a("3Pt+"),s=a("bTqV"),r=a("qFsG"),l=a("bSwM"),f=a("+0xr"),u=a("A5z7"),b=a("NFeN"),d=a("/1cH"),g=a("kmnG"),p=a("Xa2L"),h=a("4wla"),m=a("tyNb"),v=a("wkOn"),T=a("fXoL"),k=((i=function e(){_classCallCheck(this,e)}).\u0275mod=T.Mb({type:i}),i.\u0275inj=T.Lb({factory:function(e){return new(e||i)},providers:[],imports:[[c.c,o.d,r.b,s.c,l.b,f.o,u.e,b.b,d.b,g.d,p.b,v.a,m.g,h.a]]}),i),C=a("wZkO"),F=a("0IaG"),U=a("d3UM"),D=a("jaxi"),y=a("f0Cb"),x=((n=function e(){_classCallCheck(this,e)}).\u0275mod=T.Mb({type:n}),n.\u0275inj=T.Lb({factory:function(e){return new(e||n)},providers:[],imports:[[c.c,o.d,C.g,F.f,U.b,b.b,r.b,g.d,D.c,s.c,l.b,y.b,k,v.a]]}),n)},wkOn:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a("ofXK"),n=a("3Pt+"),c=a("7EHt"),o=a("kmnG"),s=a("d3UM"),r=a("A5z7"),l=a("NFeN"),f=a("0IaG"),u=a("bTqV"),b=a("f0Cb"),d=a("/1cH"),g=a("fXoL"),p=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=g.Mb({type:e}),e.\u0275inj=g.Lb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,n.d,c.b,o.d,s.b,r.e,l.b,d.b,f.f,u.c,b.b]]}),e}()}}]);