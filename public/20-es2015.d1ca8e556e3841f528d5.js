(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{ow3J:function(e,t,i){"use strict";i.r(t),i.d(t,"PageModule",(function(){return Ct}));var s=i("ofXK"),n=i("3Pt+"),a=i("bTqV"),r=i("7EHt"),o=i("qFsG"),c=i("wZkO"),l=i("Wp6s"),u=i("bSwM"),d=i("0IaG"),g=i("f0Cb"),h=i("kmnG"),b=i("Xa2L"),f=i("+0xr"),p=i("MutI"),y=i("4wla"),m=i("QLJ7"),v=i("mrSG"),T=i("ODXS"),P=i("vSFt"),S=i("2Vo4"),I=i("XNiG"),x=i("vkgz"),k=i("NJ9Y"),A=i("JIr8"),w=i("LRne");const F=(e,t)=>t.some(t=>e instanceof t);let C,D;const j=new WeakMap,K=new WeakMap,O=new WeakMap,R=new WeakMap,M=new WeakMap;let z={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||O.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return B(e[t])},has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function V(e){z=e(z)}function B(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,i)=>{const s=()=>{e.removeEventListener("success",n),e.removeEventListener("error",a)},n=()=>{t(B(e.result)),s()},a=()=>{i(e.error),s()};e.addEventListener("success",n),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&j.set(t,e)}).catch(()=>{}),M.set(t,e),t}(e);if(R.has(e))return R.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(L(this),e),B(j.get(this))}:function(...e){return B(t.apply(L(this),e))}:function(e,...i){const s=t.call(L(this),e,...i);return O.set(s,e.sort?e.sort():[e]),B(s)}:(e instanceof IDBTransaction&&function(e){if(K.has(e))return;const t=new Promise((t,i)=>{const s=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",a),e.removeEventListener("abort",a)},n=()=>{t(),s()},a=()=>{i(e.error),s()};e.addEventListener("complete",n),e.addEventListener("error",a),e.addEventListener("abort",a)});K.set(e,t)}(e),F(e,C||(C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,z):e);var t}(e);return t!==e&&(R.set(e,t),M.set(t,e)),t}const L=e=>M.get(e),N=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],q=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(q.get(t))return q.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,n=E.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!n&&!N.includes(i))return;const a=async function(e,...t){const a=this.transaction(e,n?"readwrite":"readonly");let r=a.store;s&&(r=r.index(t.shift()));const o=r[i](...t);return n&&await a.done,o};return q.set(t,a),a}V(e=>({get:(t,i,s)=>_(t,i)||e.get(t,i,s),has:(t,i)=>!!_(t,i)||e.has(t,i)}));const U=["continue","continuePrimaryKey","advance"],Q={},H=new WeakMap,J=new WeakMap,W={get(e,t){if(!U.includes(t))return e[t];let i=Q[t];return i||(i=Q[t]=function(...e){H.set(this,J.get(this)[t](...e))}),i}};async function*X(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const i=new Proxy(t,W);for(J.set(i,t),M.set(i,L(t));t;)yield i,t=await(H.get(i)||t.continue()),H.delete(i)}function G(e,t){return t===Symbol.asyncIterator&&F(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&F(e,[IDBIndex,IDBObjectStore])}V(e=>({get:(t,i,s)=>G(t,i)?X:e.get(t,i,s),has:(t,i)=>G(t,i)||e.has(t,i)}));var Y=i("h2Ed"),Z=i("tk/3"),ee=i("fXoL"),te=i("EnSQ"),ie=i("c3AT"),se=i("2uAV"),ne=i("i6c7"),ae=i("flj8"),re=i("YiK1"),oe=i("tyNb");let ce=(()=>{class e{constructor(e,t,i,s,n,a,r,o){this.dataService=e,this.projectService=t,this.infoService=i,this.taskService=s,this.accountService=n,this.systemService=a,this.http=r,this.router=o,this.client$=new S.a(null),this.currentProject$=new S.a(null),this.currentResult$=new S.a(null),this.currentDataFile$=new S.a(null),this.currentPackages$=new S.a([]),this.currentPackageID="",this.currentUser$=new S.a(null),this.currentIndexedDB$=new S.a(null),this.entryType$=new S.a(null),this.currentPageKey$=new S.a(null),this.requestNavigation$=new I.a,this.isFullPage$=new S.a(!1),this.showRightMenu$=new S.a(!0),this.pageMode$=new S.a("page"),this.refresh$=new I.a,this.logItems=[],this.currentPageKey$.subscribe(e=>{if(e&&e.split){const t=e.split(":");Array.isArray(t)&&2===t.length&&(this.currentPackageID=t[0])}})}_logItem(e){const t={};t[e.type]=e,this.logItems.push(t)}_sleep(e){return Object(v.b)(this,void 0,void 0,(function*(){return new Promise(t=>setTimeout(()=>t(),e))}))}sendToClient(e){e.type=e.type||"received",this._logItem(e);try{this.client$.getValue().nativeElement.contentWindow.postMessage(e,"*")}catch(t){try{this.client$.getValue().nativeElement.contentWindow.postMessage(JSON.parse(JSON.stringify(e)),"*")}catch(t){console.log(t)}}}_requestIDB(e,t,i,s){return Object(v.b)(this,void 0,void 0,(function*(){return t=t||1,console.log("open database: "+e),yield function(e,t,{blocked:i,upgrade:s,blocking:n}={}){const a=indexedDB.open(e,t),r=B(a);return s&&a.addEventListener("upgradeneeded",e=>{s(B(a.result),e.oldVersion,e.newVersion,B(a.transaction))}),i&&a.addEventListener("blocked",()=>i()),n&&r.then(e=>e.addEventListener("versionchange",n)).catch(()=>{}),r}(e,t,{upgrade(e){const t=Object.keys(i);for(const n of t){const t=e.createObjectStore(n,i[n]);if(s&&s[n]){const e=s[n];t.createIndex(e.indexName,e.keyPath,e.objectParameters)}}}})}))}_changeMode(e){const t=this.pageMode$.getValue();void 0===e&&(e="list"===t?"page":"list"),this.pageMode$.next("list"===e?"list":"page")}_toggleFullPage(e){const t=!this.isFullPage$.getValue();this.isFullPage$.next(void 0===e?t:e)}isValidAPI(e){return!(["constructor","_logItem","sendToClient","_sleep","_changeMode","_toggleFullPage"].indexOf(e)>=0)&&void 0!==this[e]&&"function"==typeof this[e]}historyBack(){window.history.go(-1)}historyForward(){window.history.go(1)}log(e,t){this.logItems.push({log:JSON.parse(JSON.stringify(t))})}handshake(e,t){this.sendToClient({id:e,call:"handshake"})}getAuthToken(e){const t=this.accountService.getAuthToken().subscribe(i=>(t.unsubscribe(),this.sendToClient(i.isError?{call:"getAuthToken",id:e,value:null}:{call:"getAuthToken",id:e,value:i.success})))}listFiles(e){const t=this.currentProject$.getValue();this.sendToClient({call:"listFiles",id:e,value:t&&Array.isArray(t.dataFiles)?t.dataFiles.map(e=>e.getModel()):[]})}listResults(e){const t=this.currentProject$.getValue();this.sendToClient({call:"listResults",id:e,value:t&&Array.isArray(t.results)?t.results.map(e=>e.getModel()):[]})}listTasks(e,t){const i=this.taskService.getTasks(t.packageID||this.currentPackageID,t.only).subscribe(t=>{i.unsubscribe(),this.sendToClient({id:e,call:"listTasks",type:"received",value:Array.isArray(t.success)?t.success.map(e=>e.getModel()):[]})})}listPackages(e){const t=this.projectService.getRelatedPackages().subscribe(i=>{t.unsubscribe(),this.sendToClient({id:e,call:"listPackages",type:"received",value:Array.isArray(i.success)?i.success.map(e=>e.getModel()):[]})})}listAllTasks(e){const t=this.currentProject$.getValue().packages;if(Array.isArray(t)){const i=this.taskService.getTasks(t.map(e=>e.id).join(",")).subscribe(t=>{i.unsubscribe(),this.sendToClient({id:e,call:"listAllTasks",type:"received",value:Array.isArray(t.success)?t.success.map(e=>e.getModel()):[]})})}}getCurrentUserInfo(e){const t=this.currentUser$.getValue();this.sendToClient({id:e,call:"getCurrentUserInfo",type:"received",value:t&&t.getModel?t.getModel():{}})}getCurrentFileInfo(e){const t=this.currentDataFile$.getValue();this.sendToClient({id:e,call:"getCurrentFileInfo",type:"received",value:t?t.getModel():null})}getCurrentResultInfo(e){const t=this.currentResult$.getValue();if(!t)return this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:null});const i=t.getModel();if("workflow"!==t.type)this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:i});else{const s=this.currentProject$.getValue(),n=s.results.map(e=>e.id),a=[],r=t.children;for(let e=0;e<r.length;e++)if(a[e]=[],Array.isArray(r[e]))for(let i=0;i<r[e].length;i++){const o=n.indexOf(r[e][i]);a[e][i]=o>=0&&s.results[o]&&s.results[o].parent===t.id?s.results[o].getModel():{}}i.children=a,this.sendToClient({id:e,call:"getCurrentResultInfo",type:"received",value:i})}}getCurrentPackageInfo(e){const t=this.currentPackages$.getValue(),i=this.currentPackageID,s=t.filter(e=>e.id===i);this.sendToClient({id:e,call:"getCurrentPackageInfo",type:"received",value:s.length>0?s[0].getModel():{}})}getCurrentProjectInfo(e){const t=this.currentProject$.getValue();this.sendToClient({id:e,call:"getCurrentProjectInfo",type:"received",value:t?t.getModel():{}})}getTaskArguments(e,t){const i=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(s=>{if(i.unsubscribe(),s.isError)return this.sendToClient({id:e,call:"getTaskArguments",type:"error",value:JSON.stringify(s.errors)});const n=t.identifier,a=s.success.filter(e=>e.id===n||e.key===n)[0];if(!a)return this.sendToClient({id:e,call:"getTaskArguments",type:"error",value:"There is no such task with the id/key: "+n}),this.sendToClient({id:e,call:"getTaskArguments",type:"received",value:[]});this.sendToClient({id:e,call:"getTaskArguments",type:"received",value:a.arguments.map(e=>e.getModel())})})}getTaskInfo(e,t){const i=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(s=>{if(i.unsubscribe(),s.isError)return this.sendToClient({id:e,call:"getTaskInfo",type:"error",value:JSON.stringify(s.errors)});const n=t.identifier,a=s.success.filter(e=>e.id===n||e.key===n)[0];if(!a)return this.sendToClient({id:e,call:"getTaskInfo",type:"error",value:"There is no such task with the id/key: "+n}),this.sendToClient({id:e,call:"getTaskInfo",type:"received",value:{}});this.sendToClient({id:e,call:"getTaskInfo",type:"received",value:a.getModel()})})}getTaskInputGuide(e,t){const i=t.identifier,s=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(t=>{if(s.unsubscribe(),t.isError)return this.sendToClient({id:e,call:"getTaskInputGuide",type:"error",value:JSON.stringify(t.errors)});const n=t.success,a=this.currentProject$.getValue(),r=n.filter(e=>e.id===i||e.key===i)[0];if(!r)return this.sendToClient({id:e,call:"getTaskInputGuide",type:"error",value:"There is no such task with the id/key: "+i}),this.sendToClient({id:e,call:"getTaskInputGuide",type:"received",value:[]});const o=this.taskService.taskValidInputs$.subscribe(t=>{o.unsubscribe();const i=r.arguments.map(e=>"outFile"===e.type?null:e.getModel());t.forEach(e=>{const t=e.index;i[t]&&"inFile"===i[t].type&&(i[t].candidates=e.models.map(e=>e.getModel()))});const s=r.arguments.filter(e=>"outFile"===e.type).map(e=>e.getModel());this.sendToClient({id:e,call:"getTaskInputGuide",type:"received",value:{inputs:i,outputs:s}})});this.taskService.getValidInputFile(r.id,a.id)})}executeTask(e,t){const i=t.identifier,s=t.resultInfo,n=t.inputs,a=t.outputs,r=[],o=this.taskService.getTasks(t.packageID||this.currentPackageID,!0).subscribe(t=>{o.unsubscribe();const c=t.success,l=this.currentProject$.getValue(),u=c.filter(e=>e.id===i||e.key===i)[0];return u?n.length!==u.arguments.length?(this.sendToClient({id:e,call:"executeTask",type:"error",value:"The length of inputs does not match the length of the task arguments."}),this.sendToClient({id:e,call:"executeTask",type:"received",value:{}})):(u.arguments.forEach((e,t)=>{switch(e.type){case"static":n[t]=e.default[0];break;case"value":n[t]=String(null==n[t]?e.default[0]:n[t]);break;case"list":Array.isArray(n[t])||(n[t]=[n[t]]),n[t]=n[t].filter(t=>e.list.indexOf(t)>=0),e.multiple||(n[t]=[n[t][0]]),0===n[t].filter(e=>null!=e).length&&r.push({index:t,error:"No valid items to select"});break;case"inFile":const i=l.dataFiles.filter(e=>e.id===n[t])[0];if(i){const s=e.isValidFile(i);s.result||r.push({index:t,error:s.reason})}else e.optional||r.push({index:t,error:"No valid file selected"});break;case"outFile":n[t]=null}}),r.length>0?(this.sendToClient({id:e,call:"executeTask",type:"error",value:r}),this.sendToClient({id:e,call:"executeTask",type:"received",value:{}})):(s.prefix=String(s.prefix)||"",s.suffix=String(s.suffix)||"",u.arguments.filter(e=>"outFile"===e.type).forEach((e,t)=>{a[t]?(a[t].name=void 0!==a[t].name?String(a[t].name):e.name,a[t].desc=void 0!==a[t].desc?String(a[t].desc):"",a[t].prefix=void 0!==a[t].prefix?String(a[t].prefix):s.prefix,a[t].suffix=void 0!==a[t].suffix?String(a[t].suffix):s.suffix):a[t]={name:e.name,desc:"",prefix:s.prefix,suffix:s.suffix}}),s.name=s&&void 0!==s.name?String(s.name):"Result from "+u.name,s.desc=s&&void 0!==s.desc?String(s.desc):"",s.name=s.name.slice(0,160),s.desc=s.desc.slice(0,500),s.prefix=s.prefix.slice(0,160),s.suffix=s.suffix.slice(0,160),void this.projectService.createResult(u.id,{run:!0,projectID:l.id,inputs:n,outputs:a,name:s.name,desc:s.desc,prefix:s.prefix||"",suffix:s.suffix||""}).subscribe(t=>t.isError?(t.errors.forEach(t=>{this.sendToClient({id:e,call:"executeTask",type:"error",value:t})}),this.sendToClient({id:e,call:"executeTask",type:"received",value:{}})):this.sendToClient({id:e,call:"executeTask",type:"received",value:t.success.getModel()})))):(this.sendToClient({id:e,call:"executeTask",type:"error",value:"There is no such task with the id/key: "+i}),this.sendToClient({id:e,call:"executeTask",type:"received",value:{}}))})}updateResultInfo(e,t){const i=this.currentProject$.getValue();if(!i)return this.sendToClient({id:e,call:"updateResultInfo",type:"error",value:"No project to update the Result information."});const s=t.resultID,n=t.newInfo,a=i.results.filter(e=>e.id===s)[0];if(!a)return this.sendToClient({id:e,call:"updateResultInfo",type:"error",value:`Cannot find any Result with this Result ID (${s}) to update its information.`});const r=new T.a({id:s,name:n.name||a.name,prefix:n.prefix||a.prefix,suffix:n.suffix||a.suffix,desc:n.desc||a.desc});this.projectService.updateResultInfo(r).subscribe(t=>t.isError?t.errors.forEach(t=>this.sendToClient({id:e,call:"updateResultInfo",type:"error",value:t})):this.sendToClient({id:e,call:"updateResultInfo",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}}))}deleteResult(e,t){this.projectService.deleteResult(new T.a({id:t.resultID})).subscribe(t=>t.isError?t.errors.forEach(t=>this.sendToClient({id:e,call:"deleteResult",type:"error",value:t})):this.sendToClient({id:e,call:"deleteResult",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}}))}getFileBlob(e,t){const i=t.fileID;let s=t.subPath||void 0;const n=this.currentProject$.getValue().dataFiles.filter(e=>e.id===i)[0];s&&"Folder"!==n.format&&(s=void 0);const a=this.dataService.downloadAsFileBlob(i,s).pipe(Object(x.a)(t=>{this.sendToClient({id:e,call:"getFileBlob",type:"event",value:t})}),Object(k.a)(),Object(A.a)(t=>(console.log(t),this._logItem({id:e,call:"getFileBlob",type:"log",value:t.toString()}),Object(w.a)({body:void 0})))).subscribe(t=>{a.unsubscribe(),this.sendToClient({id:e,call:"getFileBlob",type:"received",value:t.body})})}getDownloadLink(e,t){const i=t.fileID,s=t.subPath,n=t.authToken,a=this.currentProject$.getValue().dataFiles.filter(e=>e.id===i)[0];if(!a)return this._logItem({id:e,call:"getDownloadLink",type:"error",value:`This DataFile ID: ${i} is invalid.`}),this.sendToClient({id:e,call:"getDownloadLink",type:"received",value:null});if(n){if("Folder"===a.format&&s){const t=s.split("/").map(encodeURIComponent).join("/");return this.sendToClient({call:"getDownloadLink",id:e,value:`/data/static/${i}/${t}?authToken=${n}`})}return this.sendToClient({call:"getDownloadLink",id:e,value:`/data/api/dataFile/${i}/download?authToken=${n}`})}return this._logItem({id:e,call:"getDownloadLink",type:"error",value:"The authToken is unset. You have to call getAuthToken() to get the authToken."}),this.sendToClient({call:"getDownloadLink",id:e,value:null})}globFilesInFolder(e,t){const i=t.fileID,s=this.currentProject$.getValue(),n=t.globbyExprs;let a=!1;if(s.dataFiles.filter(e=>e.id===i&&"Folder"===e.format).length>0||(this._logItem({id:e,call:"globFilesInFolder",type:"error",value:`This DataFile ID: ${i} is not a folder`}),a=!0),Array.isArray(n)||(this._logItem({id:e,call:"globFilesInFolder",type:"error",value:"The globbyExprs is not an array."}),a=!0),a)return this.sendToClient({id:e,call:"globFilesInFolder",type:"received",value:null});const r=this.dataService.globbyFilesInFolder(i,n).subscribe(t=>{r.unsubscribe(),this.sendToClient({id:e,call:"globFilesInFolder",type:"received",value:t.success})})}importFileFromPath(e,t){const i=this.currentProject$.getValue(),s=t.options,n=Array.isArray(s.tags)?s.tags:[],a=this.projectService.importFromPath(t.path,i.id,t.makeSymbolicLink,s.name,s.desc,s.prefix,s.suffix,n,s.folder,s.keepFileName).subscribe(t=>(a.unsubscribe(),t.isError?t.errors.forEach(t=>this.sendToClient({id:e,call:"importFileFromPath",type:"error",value:t})):this.sendToClient({id:e,call:"importFileFromPath",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}})))}uploadFiles(e,t,i){const s=this.currentPackages$.getValue(),n=this.currentProject$.getValue(),a=t.options,r=[];Array.from(t.files).forEach((t,n)=>{if(!(t instanceof File||t instanceof Blob)){let t=String(1+n);switch(t){case"1":t+="st";break;case"2":t+="nd";break;case"3":t+="rd";break;default:t+="th"}return this.sendToClient({id:e,call:i||"uploadFiles",type:"error",value:"The "+t+" file has wrong type. Should be File or Blob type."})}let o;t instanceof File&&(o=s.map(e=>e.checkAllowedFormat(t.name))),!o&&t instanceof Blob&&(o=s.map(e=>e.checkAllowedFormat(a.name+"."+a.format)));const c=[].concat.apply([],s.map(e=>e.allowedFormats));if(o=o.filter(e=>!!e),0===o.length)return this.sendToClient({id:e,call:i||"uploadFiles",type:"error",value:"The "+(n+1)+" file has wrong file extension. The allowed formats are: "+c.join(", ")});r.push(t)});const o=Array.isArray(a.tags)?a.tags.map(e=>e.toLowerCase().replace(/[^a-zA-Z0-9\.\-\_]/g,"").trim()):[];let c=a.folderID,l=a.keepFileName;if(1!==n.dataFiles.filter(e=>e.id===c&&"Folder"===e.format).length&&(l=void 0,c=void 0),0===r.length)return this.sendToClient({id:e,call:i||"uploadFiles",type:"error",value:"No File item to upload"});const u=this.dataService.uploadFiles(n.id,r,{name:a.name,prefix:a.prefix,suffix:a.suffix,folder:c,keepFileName:l,desc:a.desc||"",format:a.format,tags:o}).pipe(Object(x.a)(t=>{this.sendToClient({id:e,call:i||"uploadFiles",type:"event",value:t})}),Object(k.a)(),Object(A.a)(t=>(this._logItem({id:e,call:i||"uploadFiles",type:"log",value:t.toString()}),Object(w.a)({body:void 0})))).subscribe(t=>{if(u.unsubscribe(),t.body){const s=new Y.a(t.body);s.isError&&(this.infoService.addMessages(s.errors),s.errors.forEach(t=>this.sendToClient({id:e,call:i||"uploadFiles",type:"error",value:t}))),this.sendToClient({id:e,call:i||"uploadFiles",type:"received",value:s.success.map(e=>new P.a(e).getModel())})}})}uploadFileBlob(e,t){this.uploadFiles(e,{files:[t.fileBlob],options:{name:t.name,prefix:t.prefix,suffix:t.suffix,desc:t.desc,tags:t.tags,folderID:t.folderID,format:t.format||"",keepFileName:!!t.keepFileName}},"uploadFileBlob")}createFolder(e,t){const i=this.currentProject$.getValue();if(!i)return this.sendToClient({id:e,call:"createFolder",type:"error",value:"No project to create the folder."});const s=t.name||"a folder",n=t.desc||"",a=t.prefix||"",r=t.suffix||"",o=Array.isArray(t.tags)?t.tags:[];this.projectService.createFolder(i.id,s,n,a,r,o,t.folderId,t.keepFileName).subscribe(t=>!t.isError&&this.sendToClient({id:e,call:"createFolder",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}}))}updateFileInfo(e,t){const i=this.currentProject$.getValue();if(!i)return this.sendToClient({id:e,call:"updataFileInfo",type:"error",value:"No project to update the DataFile record."});const s=t.fileID,n=t.newInfo,a=i.dataFiles.filter(e=>e.id===s)[0];if(!a)return this.sendToClient({id:e,call:"updataFileInfo",type:"error",value:`Cannot find any DataFile with this file ID (${s}) to update the information.`});if(Array.isArray(n.tags)){n.tags=n.tags.map(e=>"Folder"===e?e:e.toLowerCase().replace(/[^a-zA-Z0-9\.\-\_]/g,"")).filter(e=>!!e);const e=n.tags.indexOf("Folder"),t=a.tags.indexOf("Folder");t>=0&&-1===e?n.tags.unshift("Folder"):-1===t&&e>=0&&n.tags.splice(e,1)}else n.tags=a.tags.slice();const r=new P.a({id:s,name:n.name||a.name,prefix:n.prefix||a.prefix,suffix:n.suffix||a.suffix,desc:n.desc||a.desc,tags:n.tags});this.projectService.updateDataFileInfo(r).subscribe(t=>t.isError?t.errors.forEach(t=>this.sendToClient({id:e,call:"updataFileInfo",type:"error",value:t})):this.sendToClient({id:e,call:"updataFileInfo",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}}))}deleteFile(e,t){this.projectService.deleteDataFile(new P.a({id:t.fileID})).subscribe(t=>t.isError?t.errors.forEach(t=>this.sendToClient({id:e,call:"deleteFile",type:"error",value:t})):this.sendToClient({id:e,call:"deleteFile",type:"received",value:t.success&&t.success.getModel?t.success.getModel():{}}))}_navigatePage(e,t,i,s){i=i||null,s=s||this.currentPackageID||null;const n=this.currentProject$.getValue();!s&&Array.isArray(n.packages)&&n.packages[0]&&n.packages[0].id&&(s=s||n.packages[0].id),(i=i&&s?s+":"+i:null)&&this.requestNavigation$.next({itemID:e,type:t,pageKey:i})}navigateToProjectList(e,t){t||(t={listType:"myProjects",pageSize:30,pageIndex:0}),this.router.navigate(["/project/list"],{queryParams:{listType:t.listType||"myProjects",pageSize:t.pageSize||30,pageIndex:t.pageIndex||0}})}navigateToProjectPage(e,t){this._navigatePage(this.currentProject$.getValue().id,"project",t.pageKey||null,t.packageID||null)}navigateToFilePage(e,t){this._navigatePage(t.fileID,"datafile",t.pageKey||null,t.packageID||null)}navigateToBdpDataFile(e,t){this.router.navigate(["/dataFile",t.fileID,"info"])}navigateToResultPage(e,t){this._navigatePage(t.resultID,"result",t.pageKey||null,t.packageID||null)}navigateToBdpResult(e,t){this.router.navigate(["/result",t.resultID,"info"])}openFileLink(e,t){return window.open("/dataFile/"+t.fileID+"/info","","width=1024,height=768"),this.sendToClient({id:e,call:"openFileLink",type:"received",value:t.fileID})}openResultLink(e,t){return window.open("/result/"+t.resultID+"/info","","width=1024,height=768"),this.sendToClient({id:e,call:"openResultLink",type:"received",value:t.resultID})}requestHttp(e,t){return Object(v.b)(this,void 0,void 0,(function*(){if(!t.path.match(/^\//))return this.sendToClient({id:e,call:"requestHttp",type:"error",value:"Invalid path to request server. You are supposed to request paths which begins with '/'."});const i=t.method.toUpperCase(),s=t.httpOptions.queryParams||null,n=t.httpOptions.headers||null;let a=new Z.e,r=new Z.d;if(s){const e=Object.keys(s);for(let t=0;t<e.length;t++){const i=e[t];a=a.set(i,s[i])}}if(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];r=r.set(i,n[i])}}const o=this.http.request(i,t.path,{body:t.httpOptions.requestBody||null,headers:r,observe:t.httpOptions.observe,params:a,withCredentials:!0,reportProgress:!!t.httpOptions.reportProgress,responseType:t.httpOptions.responseType}).pipe(Object(x.a)(t=>this.sendToClient({id:e,call:"requestHttp",type:"event",value:t})),Object(k.a)(),Object(A.a)(t=>(this.sendToClient({id:e,call:"requestHttp",type:"error",value:""+JSON.stringify(t)}),Object(w.a)(null)))).subscribe(t=>{o.unsubscribe(),this.sendToClient({id:e,call:"requestHttp",type:"received",value:t})})}))}requestDatabase(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.entryType$.getValue(),s=this.currentPageKey$.getValue(),n=this.currentUser$.getValue(),a="filePages"===i?this.currentDataFile$.getValue().id:"resultPages"===i?this.currentResult$.getValue().id:this.currentProject$.getValue().id,r=`${n.id}-${i}-${a}-${s}`;try{const i=yield this._requestIDB(r,t.version,t.objectStoreSettings,t.creatingIndexes);this.currentIndexedDB$.next(i),this.sendToClient({id:e,call:"requestDatabase",type:"received",value:"ok"})}catch(o){this.sendToClient({id:e,call:"requestDatabase",type:"error",value:`Failed to create DB: ${r}; \nerrors: ${JSON.parse(JSON.stringify(o))}`})}}))}requestDatabaseRemove(e){return Object(v.b)(this,void 0,void 0,(function*(){const t=this.currentIndexedDB$.getValue(),i=this.currentUser$.getValue(),s=this.entryType$.getValue(),n=this.currentPageKey$.getValue();if(!t)return;const a="filePages"===s?this.currentDataFile$.getValue().id:"resultPages"===s?this.currentResult$.getValue().id:this.currentProject$.getValue().id,r=`${i.id}-${s}-${a}-${n}`;t&&t.close&&(t.close(),yield function(e,{blocked:t}={}){const i=indexedDB.deleteDatabase(e);return t&&i.addEventListener("blocked",()=>t()),B(i).then(()=>{})}(r)),this.sendToClient({id:e,call:"requestDatabaseRemove",type:"received",value:"ok"})}))}setDataStore(){return Object(v.b)(this,void 0,void 0,(function*(){}))}dataStoreCount(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.currentIndexedDB$.getValue();if(!i)return;const s=yield i.count(t.storeName,t.queryKeyRange);return this.sendToClient({id:e,call:"dataStoreCount",type:"received",value:s})}))}dataStoreAdd(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.currentIndexedDB$.getValue();if(!i)return;const s=t.dataItems,n=t.dataKeys||void 0;if(Array.isArray(s))try{const a=i.transaction(t.storeName,"readwrite");s.forEach((e,t)=>n&&n[t]?a.store.add(e,n[t]):a.store.add(e)),yield a.done,this.sendToClient({id:e,call:"dataStoreAdd",type:"received",value:"ok"})}catch(a){this.sendToClient({id:e,call:"dataStoreAdd",type:"error",value:"There are errors when adding data to the objectStore."})}}))}dataStorePut(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.currentIndexedDB$.getValue();if(!i)return;const s=t.dataItems,n=t.dataKeys||void 0;if(Array.isArray(s)){const a=i.transaction(t.storeName,"readwrite");return s.forEach((e,t)=>n&&n[t]?a.store.put(e,n[t]):a.store.put(e)),yield a.done,this.sendToClient({id:e,call:"dataStorePut",type:"received",value:"ok"})}}))}dataStoreQuery(e,t){var i,s;return Object(v.b)(this,void 0,void 0,(function*(){const n=this.currentIndexedDB$.getValue();if(!n)return;const a=n.transaction(t.storeName);if(null!=t.indexName){const n=a.store.index(t.indexName);try{for(var r,o=Object(v.a)(n.iterate(t.query));!(r=yield o.next()).done;)this.sendToClient({id:e,call:"dataStoreQuery",type:"event",value:r.value.value})}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=o.return)&&(yield s.call(o))}finally{if(i)throw i.error}}}else{let i=yield a.store.openCursor(t.query);for(;i;)this.sendToClient({id:e,call:"dataStoreQuery",type:"event",value:i.value}),i=yield i.continue()}this.sendToClient({id:e,call:"dataStoreQuery",type:"received",value:"ok"})}))}dataStoreGet(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.currentIndexedDB$.getValue();if(!i)return;const s=t.indexName,n=t.storeName,a=t.key;let r;r=null==s?null==a?yield i.getAll(n):yield i.get(n,a):null==a?yield i.getAllFromIndex(n,s):yield i.getFromIndex(n,s,a),this.sendToClient({id:e,call:"dataStoreGet",type:"received",value:r})}))}dataStoreGetAllKey(){return Object(v.b)(this,void 0,void 0,(function*(){}))}dataStoreClear(e,t){return Object(v.b)(this,void 0,void 0,(function*(){const i=this.currentIndexedDB$.getValue();if(i)try{i.clear(t.storeName),this.sendToClient({id:e,call:"dataStoreClear",type:"received",value:"ok"})}catch(s){this.sendToClient({id:e,call:"dataStoreClear",type:"error",value:""+JSON.parse(JSON.stringify(s))})}}))}refreshPage(e){this.refresh$.next(!0),this.sendToClient({id:e,call:"refreshPage",type:"received",value:"ok"})}toggleFullPage(e,t){this._toggleFullPage(t.isFullPage),setTimeout(()=>this.sendToClient({id:e,call:"toggleFullPage",type:"received",value:t.isFullPage}),200)}toggleRightSideMenu(e,t){this.showRightMenu$.next(!!t.isShown),setTimeout(()=>this.sendToClient({id:e,call:"toggleRightSideMenu",type:"received",value:t.isShown}),200)}togglePageList(e,t){["list","page"].indexOf(t.mode)>=0?this._changeMode(t.mode):this._changeMode(),setTimeout(()=>this.sendToClient({id:e,call:"togglePageList",type:"received",value:this.pageMode$.getValue()}),10)}}return e.\u0275fac=function(t){return new(t||e)(ee.Xb(te.a),ee.Xb(ie.a),ee.Xb(se.a),ee.Xb(ne.a),ee.Xb(ae.a),ee.Xb(re.a),ee.Xb(Z.a),ee.Xb(oe.c))},e.\u0275prov=ee.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),le=(()=>{class e{}return e.\u0275mod=ee.Lb({type:e}),e.\u0275inj=ee.Kb({factory:function(t){return new(t||e)},providers:[ce],imports:[[n.d,s.c,a.c,g.b,r.b,u.b,h.d,l.h,d.f,f.o,p.d,b.b,y.a,m.b]]}),e})();var ue=i("RMCY"),de=i("44fm"),ge=i("FKr1");function he(e,t){1&e&&(ee.Tb(0,"span"),ee.Kc(1,"Project Page"),ee.Sb())}function be(e,t){1&e&&(ee.Tb(0,"span"),ee.Kc(1,"Result Page"),ee.Sb())}function fe(e,t){1&e&&(ee.Tb(0,"span"),ee.Kc(1,"Project Page"),ee.Sb())}function pe(e,t){1&e&&(ee.Tb(0,"span"),ee.Kc(1,"DataFile Page"),ee.Sb())}function ye(e,t){1&e&&(ee.Tb(0,"span"),ee.Kc(1,"Static Page"),ee.Sb())}function me(e,t){if(1&e&&(ee.Tb(0,"h2"),ee.Kc(1,"Page type: "),ee.Ic(2,he,2,0,"span",2),ee.Ic(3,be,2,0,"span",2),ee.Ic(4,fe,2,0,"span",2),ee.Ic(5,pe,2,0,"span",2),ee.Ic(6,ye,2,0,"span",2),ee.Sb()),2&e){const e=ee.fc();ee.Ab(2),ee.mc("ngIf","indexPages"===e.entryType),ee.Ab(1),ee.mc("ngIf","resultPages"===e.entryType),ee.Ab(1),ee.mc("ngIf","proxyPages"===e.entryType),ee.Ab(1),ee.mc("ngIf","filePages"===e.entryType),ee.Ab(1),ee.mc("ngIf","staticPages"===e.entryType)}}let ve=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.authorizedList={"allow-forms":!1,"allow-modals":!1,"allow-popups":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-same-origin":!1,"allow-scripts":!1,"allow-downloads":!1};const i=t.authorizedList,s=Object.keys(this.authorizedList);for(let n=0;n<s.length;n++){const e=s[n];this.authorizedList[e]=i.indexOf(e)>=0}this.entryType=t.entryType}ngOnInit(){}save(){const e=Object.keys(this.authorizedList).filter(e=>!0===this.authorizedList[e]);this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(ee.Nb(d.g),ee.Nb(d.a))},e.\u0275cmp=ee.Hb({type:e,selectors:[["authorize-sandbox"]],decls:65,vars:13,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-subheader",""],["mat-line","",3,"ngModel","disabled","ngModelChange"],["mat-line","",1,"ml-4"],["mat-line","",1,"ml-4","text-muted"],["mat-line","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"click"]],template:function(e,t){1&e&&(ee.Tb(0,"h1",0),ee.Kc(1,"Authorizing Page sandbox options"),ee.Sb(),ee.Tb(2,"div",1),ee.Ic(3,me,7,5,"h2",2),ee.Tb(4,"mat-list"),ee.Tb(5,"h3",3),ee.Kc(6,"The default authorized options"),ee.Sb(),ee.Tb(7,"mat-list-item"),ee.Tb(8,"mat-checkbox",4),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-scripts"]=e})),ee.Kc(9,"Allow Scripts"),ee.Sb(),ee.Tb(10,"span",5),ee.Kc(11,"Page can execute javascripts."),ee.Sb(),ee.Sb(),ee.Tb(12,"mat-list-item"),ee.Tb(13,"mat-checkbox",4),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-modals"]=e})),ee.Kc(14,"Allow Modal"),ee.Sb(),ee.Tb(15,"span",5),ee.Kc(16,"Page can create modal windows."),ee.Sb(),ee.Sb(),ee.Tb(17,"mat-list-item"),ee.Tb(18,"mat-checkbox",4),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-popups"]=e})),ee.Kc(19,"Allow Pop-ups"),ee.Sb(),ee.Tb(20,"span",5),ee.Kc(21,"Page can create pop-up windows or create new tab in the browser."),ee.Sb(),ee.Tb(22,"span",6),ee.Kc(23,"*Note that created pages also follow the same sandbox options."),ee.Sb(),ee.Sb(),ee.Ob(24,"mat-divider"),ee.Tb(25,"h3",3),ee.Kc(26,"The additional options"),ee.Sb(),ee.Tb(27,"mat-list-item"),ee.Tb(28,"mat-checkbox",7),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-downloads"]=e})),ee.Kc(29,"Allow Downlading Files From Sandboxed Pages"),ee.Sb(),ee.Tb(30,"span",5),ee.Kc(31,"Page allows automatically downloading files. If this option checked, browser will still ask you the file downloading locations."),ee.Sb(),ee.Sb(),ee.Tb(32,"mat-list-item"),ee.Tb(33,"mat-checkbox",7),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-orientation-lock"]=e})),ee.Kc(34,"Allow Orientation Lock"),ee.Sb(),ee.Tb(35,"span",5),ee.Kc(36,"Page can lock the screen orientation."),ee.Sb(),ee.Sb(),ee.Tb(37,"mat-list-item"),ee.Tb(38,"mat-checkbox",7),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-pointer-lock"]=e})),ee.Kc(39,"Allow Pointer Lock"),ee.Sb(),ee.Tb(40,"span",5),ee.Kc(41,"Page can use the Pointer Lock API."),ee.Sb(),ee.Sb(),ee.Ob(42,"mat-divider"),ee.Tb(43,"h3",3),ee.Kc(44,"The risk options"),ee.Sb(),ee.Tb(45,"mat-list-item"),ee.Tb(46,"mat-checkbox",7),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-forms"]=e})),ee.Kc(47,"Allow Form Submission"),ee.Sb(),ee.Tb(48,"span",5),ee.Kc(49,"Page can submit form data."),ee.Sb(),ee.Sb(),ee.Tb(50,"mat-list-item"),ee.Tb(51,"mat-checkbox",4),ee.bc("ngModelChange",(function(e){return t.authorizedList["allow-same-origin"]=e})),ee.Kc(52,"Allow Same Origin"),ee.Sb(),ee.Tb(53,"span",5),ee.Kc(54,"Page can use cookie, indexedDB form data. Do NOT allow this unless you trust the content."),ee.Sb(),ee.Tb(55,"span",6),ee.Kc(56,"The "),ee.Tb(57,"b"),ee.Kc(58,"same-origin policy"),ee.Sb(),ee.Kc(59,"is a critical security mechanism that restricts how a document or script loaded from one origin can interact with a resource from another origin. It helps isolate potentially malicious documents, reducing possible attack vectors. "),ee.Sb(),ee.Sb(),ee.Sb(),ee.Sb(),ee.Tb(60,"div",8),ee.Tb(61,"button",9),ee.Kc(62,"Cancel"),ee.Sb(),ee.Tb(63,"button",10),ee.bc("click",(function(){return t.save()})),ee.Kc(64,"Ok"),ee.Sb(),ee.Sb()),2&e&&(ee.Ab(3),ee.mc("ngIf",!1),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-scripts"])("disabled","proxyPages"===t.entryType),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-modals"])("disabled","proxyPages"===t.entryType),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-popups"])("disabled","proxyPages"===t.entryType),ee.Ab(10),ee.mc("ngModel",t.authorizedList["allow-downloads"]),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-orientation-lock"]),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-pointer-lock"]),ee.Ab(8),ee.mc("ngModel",t.authorizedList["allow-forms"]),ee.Ab(5),ee.mc("ngModel",t.authorizedList["allow-same-origin"])("disabled","proxyPages"===t.entryType))},directives:[d.h,d.e,s.n,p.a,p.e,p.c,u.a,ge.h,n.i,n.l,g.a,d.c,a.b,d.d],encapsulation:2}),e})();var Te=i("zXF6");function Pe(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"button",6),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc().index;return ee.fc(2).uploadSettings[t].push([null])})),ee.Kc(1,"Add"),ee.Sb()}}function Se(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"button",6),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc().index,i=ee.fc().index;return ee.fc(2).removeFileInput(i,t)})),ee.Kc(1,"Remove"),ee.Sb()}}function Ie(e,t){if(1&e&&(ee.Rb(0),ee.Tb(1,"div"),ee.Ob(2,"input",7),ee.Ic(3,Se,2,0,"button",5),ee.Sb(),ee.Qb()),2&e){const e=t.index,i=ee.fc().index,s=ee.fc(2);ee.Ab(1),ee.Bb("id",s.eventID+"-"+i+"-"+e),ee.Ab(2),ee.mc("ngIf",0!==e)}}function xe(e,t){if(1&e&&(ee.Rb(0),ee.Tb(1,"tr"),ee.Tb(2,"td"),ee.Kc(3),ee.Ob(4,"br"),ee.Ic(5,Pe,2,0,"button",5),ee.Sb(),ee.Tb(6,"td"),ee.Ic(7,Ie,4,2,"ng-container",4),ee.Sb(),ee.Ob(8,"td"),ee.Sb(),ee.Qb()),2&e){const e=t.$implicit,i=t.index,s=ee.fc(2);ee.Ab(3),ee.Mc(" ",e.displayInfo,""),ee.Ab(2),ee.mc("ngIf",e.multiple),ee.Ab(2),ee.mc("ngForOf",s.uploadSettings[i])}}function ke(e,t){if(1&e&&(ee.Rb(0),ee.Tb(1,"table",3),ee.Tb(2,"thead"),ee.Tb(3,"tr"),ee.Tb(4,"th"),ee.Kc(5,"Description"),ee.Sb(),ee.Tb(6,"th"),ee.Kc(7,"Upload"),ee.Sb(),ee.Tb(8,"th"),ee.Kc(9,"Progress"),ee.Sb(),ee.Sb(),ee.Sb(),ee.Tb(10,"tbody"),ee.Ic(11,xe,9,3,"ng-container",4),ee.Sb(),ee.Sb(),ee.Qb()),2&e){const e=ee.fc();ee.Ab(11),ee.mc("ngForOf",e.uploadSpec)}}let Ae=(()=>{class e{constructor(e,t,i,s,n){this.el=e,this.dialogRef=t,this.uploader=i,this.infoService=s,this.data=n,this.pageInfo=n.page,this.currentProject=n.project,this.eventID=n.eventID,this.uploadSpec=n.uploadSettings}ngOnInit(){this.uploadSpec=[{folder:"",keepFileName:!1,name:"just-a-test",desc:"Testing!!",tags:["file","just","for","testing"],displayInfo:"This is a single file field",multiple:!1},{folder:"",keepFileName:!1,name:"Testing-2",desc:"Testing!!",tags:["file","just","for","testing"],displayInfo:"This is a multiple-file field",multiple:!0}],this.eventID="testabcd",this.uploadSettings=this.uploadSpec.map(e=>[null]),console.log(this.uploadElements)}removeFileInput(e,t){$("#"+this.eventID+"-"+e+"-"+t).remove(),this.uploadSettings[e].splice(t,1)}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(ee.Nb(ee.l),ee.Nb(d.g),ee.Nb(Te.a),ee.Nb(se.a),ee.Nb(d.a))},e.\u0275cmp=ee.Hb({type:e,selectors:[["uploader-ui"]],viewQuery:function(e,t){var i;1&e&&(ee.Qc(f.n,!0),ee.Qc(ee.l,!0)),2&e&&(ee.wc(i=ee.cc())&&(t.uploaderProgress=i.first),ee.wc(i=ee.cc())&&(t.uploadElements=i))},decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-stroked-button","","mat-dialog-close",""],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["name","fileInput","type","file"]],template:function(e,t){1&e&&(ee.Tb(0,"h3",0),ee.Kc(1,"File Uploader Helper"),ee.Sb(),ee.Tb(2,"mat-dialog-actions"),ee.Tb(3,"button",1),ee.Kc(4,"Close"),ee.Sb(),ee.Sb(),ee.Ob(5,"br"),ee.Ob(6,"br"),ee.Ob(7,"br"),ee.Kc(8),ee.Ic(9,ke,12,1,"ng-container",2)),2&e&&(ee.Ab(8),ee.Mc("\nYou are uploading files for the page: ",t.pageInfo.name,".\n"),ee.Ab(1),ee.mc("ngIf",t.currentProject))},directives:[d.h,d.c,a.b,d.d,s.n,s.m],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}"]}),e})();var we=i("jhN1");const Fe=["client"],Ce=["sandboxContainer"];function De(e,t){if(1&e){const e=ee.Ub();ee.Rb(0),ee.Tb(1,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().historyBack()})),ee.Ob(2,"i",10),ee.Sb(),ee.Tb(3,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().historyForward()})),ee.Ob(4,"i",11),ee.Sb(),ee.Tb(5,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().reloadClient()})),ee.Ob(6,"i",12),ee.Sb(),ee.Tb(7,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().detectSizeChange()})),ee.Ob(8,"i",13),ee.Sb(),ee.Tb(9,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().changeMode()})),ee.Ob(10,"i",14),ee.Sb(),ee.Tb(11,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc().authorizeSandbox()})),ee.Ob(12,"i",15),ee.Sb(),ee.Tb(13,"button",9),ee.bc("click",(function(){return ee.Ac(e),ee.fc()._toggleFullPage()})),ee.Ob(14,"i",16),ee.Sb(),ee.Qb()}if(2&e){const e=ee.fc();ee.Ab(14),ee.Eb("fa-expand-arrows-alt",!e.isFullPage)("fa-compress-arrows-alt",e.isFullPage)}}function je(e,t){if(1&e&&(ee.Tb(0,"a",18),ee.Kc(1),ee.Ob(2,"i",19),ee.Sb()),2&e){const e=ee.fc(2);ee.mc("href",e.src,ee.Dc),ee.Ab(1),ee.Mc("",e.src.changingThisBreaksApplicationSecurity," ")}}function Ke(e,t){if(1&e&&(ee.Rb(0),ee.Ic(1,je,3,2,"a",17),ee.Qb()),2&e){const e=ee.fc();ee.Ab(1),ee.mc("ngIf",e.src)}}function Oe(e,t){if(1&e&&(ee.Rb(0),ee.Kc(1),ee.Qb()),2&e){const e=ee.fc();ee.Ab(1),ee.Mc(" ",e.src?e.src.changingThisBreaksApplicationSecurity:"unknown"," ")}}function Re(e,t){if(1&e&&(ee.Rb(0),ee.Ob(1,"ngx-json-viewer",30),ee.Ob(2,"mat-divider"),ee.Qb()),2&e){const e=ee.fc(2).$implicit;ee.Ab(1),ee.mc("json",e)("expanded",!1)}}function Me(e,t){if(1&e&&(ee.Rb(0),ee.Ic(1,Re,3,2,"ng-container",0),ee.Qb()),2&e){const e=t.$implicit,i=ee.fc(4);ee.Ab(1),ee.mc("ngIf","log"===e.key&&i.logFilter[2]||"sent"===e.key&&i.logFilter[0]||"received"===e.key&&i.logFilter[1]||"event"===e.key&&i.logFilter[3]||"error"===e.key&&i.logFilter[4]||"change"===e.key&&i.logFilter[5])}}function $e(e,t){if(1&e&&(ee.Rb(0),ee.Ic(1,Me,2,1,"ng-container",29),ee.gc(2,"keyvalue"),ee.Qb()),2&e){const e=t.$implicit;ee.Ab(1),ee.mc("ngForOf",ee.hc(2,1,e))}}function ze(e,t){if(1&e&&(ee.Tb(0,"div",28),ee.Ic(1,$e,3,3,"ng-container",29),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(1),ee.mc("ngForOf",e.sandboxAPI.logItems)}}function Ve(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"mat-expansion-panel",20,21),ee.Tb(2,"mat-expansion-panel-header",22),ee.Tb(3,"mat-panel-title"),ee.Tb(4,"span",23),ee.Kc(5,"Console Logs"),ee.Sb(),ee.Sb(),ee.Sb(),ee.Tb(6,"div",24),ee.Tb(7,"div"),ee.Tb(8,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[0]=t})),ee.Kc(9,"Sent"),ee.Sb(),ee.Tb(10,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[1]=t})),ee.Kc(11,"Received"),ee.Sb(),ee.Tb(12,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[2]=t})),ee.Kc(13,"Logged"),ee.Sb(),ee.Tb(14,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[3]=t})),ee.Kc(15,"Events"),ee.Sb(),ee.Tb(16,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[4]=t})),ee.Kc(17,"Errors"),ee.Sb(),ee.Tb(18,"mat-checkbox",25),ee.bc("ngModelChange",(function(t){return ee.Ac(e),ee.fc().logFilter[5]=t})),ee.Kc(19,"Changes"),ee.Sb(),ee.Sb(),ee.Tb(20,"button",26),ee.bc("click",(function(){return ee.Ac(e),ee.fc().sandboxAPI.logItems=[]})),ee.Kc(21,"Clear logs"),ee.Sb(),ee.Sb(),ee.Ic(22,ze,2,1,"div",27),ee.Sb()}if(2&e){const e=ee.xc(1),t=ee.fc();ee.mc("hidden",t.isFullPage),ee.Ab(2),ee.mc("collapsedHeight","28px")("expandedHeight","28px"),ee.Ab(6),ee.mc("ngModel",t.logFilter[0]),ee.Ab(2),ee.mc("ngModel",t.logFilter[1]),ee.Ab(2),ee.mc("ngModel",t.logFilter[2]),ee.Ab(2),ee.mc("ngModel",t.logFilter[3]),ee.Ab(2),ee.mc("ngModel",t.logFilter[4]),ee.Ab(2),ee.mc("ngModel",t.logFilter[5]),ee.Ab(4),ee.mc("ngIf",e.expanded)}}function Be(e,t){1&e&&(ee.Tb(0,"div",34),ee.Tb(1,"h1",35),ee.Kc(2,"Processing ... "),ee.Ob(3,"i",36),ee.Sb(),ee.Sb())}function Le(e,t){if(1&e&&ee.Ob(0,"img",54),2&e){const e=ee.fc(2).$implicit,t=ee.fc().$implicit,i=ee.fc(3);ee.mc("src",i.validPages.get(t.id+":"+e).thumbnail,ee.Dc)}}function Ne(e,t){1&e&&ee.Ob(0,"i",55)}function Ee(e,t){1&e&&(ee.Rb(0),ee.Kc(1,"Current Page"),ee.Qb())}function qe(e,t){if(1&e&&ee.Ob(0,"img",56),2&e){const e=ee.fc(2).$implicit,t=ee.fc().$implicit,i=ee.fc(3);ee.Eb("mt-4",i.activePageKey!==t.id+":"+e),ee.mc("src",i.validPages.get(t.id+":"+e).img,ee.Dc)}}function _e(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"button",9),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc(2).$implicit,i=ee.fc().$implicit;return ee.fc(3).changePageKey(i.id+":"+t,i)})),ee.Kc(1,"Select"),ee.Sb()}}function Ue(e,t){if(1&e&&(ee.Tb(0,"div",49),ee.Tb(1,"mat-card"),ee.Tb(2,"mat-card-header"),ee.Ic(3,Le,1,1,"img",50),ee.Ic(4,Ne,1,0,"i",51),ee.Tb(5,"mat-card-title"),ee.Kc(6),ee.Sb(),ee.Tb(7,"mat-card-subtitle"),ee.Ic(8,Ee,2,0,"ng-container",0),ee.Sb(),ee.Sb(),ee.Ic(9,qe,1,3,"img",52),ee.Tb(10,"mat-card-content"),ee.Tb(11,"p"),ee.Kc(12),ee.gc(13,"slice"),ee.Sb(),ee.Sb(),ee.Tb(14,"mat-card-actions"),ee.Ic(15,_e,2,0,"button",53),ee.Sb(),ee.Sb(),ee.Sb()),2&e){const e=ee.fc().$implicit,t=ee.fc().$implicit,i=ee.fc(3);ee.Ab(1),ee.Hc("background-color",i.activePageKey===t.id+":"+e?"rgba(255, 255, 0, 0.3)":"transparent"),ee.Ab(2),ee.mc("ngIf",i.validPages.get(t.id+":"+e).thumbnail),ee.Ab(1),ee.mc("ngIf",!i.validPages.get(t.id+":"+e).thumbnail),ee.Ab(2),ee.Lc(i.validPages.get(t.id+":"+e).name),ee.Ab(2),ee.mc("ngIf",i.activePageKey===t.id+":"+e),ee.Ab(1),ee.mc("ngIf",i.validPages.get(t.id+":"+e).img),ee.Ab(3),ee.Lc(ee.jc(13,9,i.validPages.get(t.id+":"+e).desc,0,60)),ee.Ab(3),ee.mc("ngIf",i.activePageKey!==t.id+":"+e)}}function Qe(e,t){if(1&e&&(ee.Rb(0),ee.Ic(1,Ue,16,13,"div",48),ee.Qb()),2&e){const e=t.$implicit;ee.Ab(1),ee.mc("ngIf",e)}}function He(e,t){if(1&e&&(ee.Tb(0,"div",43),ee.Tb(1,"h3",44),ee.Ob(2,"i",45),ee.Kc(3),ee.Ob(4,"i",46),ee.Kc(5),ee.Sb(),ee.Ic(6,Qe,2,1,"ng-container",29),ee.Ob(7,"mat-divider",47),ee.Sb()),2&e){const e=t.$implicit,i=ee.fc(3);ee.Ab(3),ee.Mc(" ",e.fullname," from "),ee.Ab(2),ee.Mc(" ",e.sheetName,""),ee.Ab(1),ee.mc("ngForOf",i.keyOrders[e.id])}}function Je(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"div",37),ee.Tb(1,"div",38),ee.Tb(2,"button",39),ee.bc("click",(function(){return ee.Ac(e),ee.fc(2).changeMode()})),ee.Ob(3,"i",40),ee.Sb(),ee.Tb(4,"h1"),ee.Kc(5,"Page entries"),ee.Sb(),ee.Sb(),ee.Ob(6,"mat-divider"),ee.Tb(7,"div",41),ee.Ic(8,He,8,3,"div",42),ee.Sb(),ee.Sb()}if(2&e){const e=ee.fc(2);ee.Ab(8),ee.mc("ngForOf",e.currentPackages)}}function We(e,t){if(1&e&&(ee.Tb(0,"div",31),ee.Ic(1,Be,4,0,"div",32),ee.Ic(2,Je,9,1,"div",33),ee.Sb()),2&e){const e=ee.fc();ee.Ab(1),ee.mc("ngIf",e.frameProcessing&&"list"!==e.mode),ee.Ab(1),ee.mc("ngIf","list"===e.mode)}}let Xe=(()=>{class e{constructor(e,t,i,s){this.sanitizer=e,this.dialog=t,this.systemService=i,this.sandboxAPI=s,this.pageChange=new ee.o,this.requestNavigation=new ee.o,this.requestFullPage=new ee.o,this.rightSideMenuStateChange=new ee.o,this.modeChage=new ee.o,this._subs=[],this.subscribers={},this.src=this.sanitizer.bypassSecurityTrustResourceUrl("/assets/pages/not-found.html"),this.logItems=[],this.frameProcessing=!1,this.logFilter=[!0,!0,!0,!1,!0,!1],this.validPages=new Map,this.activePageKey=null,this.sandboxAuthorizedSet=new Set(["allow-scripts","allow-modals","allow-popups"])}get sandboxAuthorized(){return[...this.sandboxAuthorizedSet]}ngOnInit(){this.detectSizeChange(),this.sandboxAPI.client$.next(this.client),this.systemService.toggleContentScrollbar(!1),this._subs.push(this.sandboxAPI.isFullPage$.subscribe(e=>this.requestFullPage.emit(e))),this._subs.push(this.sandboxAPI.showRightMenu$.subscribe(e=>this.rightSideMenuStateChange.emit(e))),this._subs.push(this.sandboxAPI.pageMode$.subscribe(e=>this.modeChage.emit(e))),this._subs.push(this.sandboxAPI.requestNavigation$.subscribe(e=>this.requestNavigation.emit(e))),this._subs.push(this.sandboxAPI.refresh$.subscribe(()=>this.reloadClient()))}ngOnChanges(e){let t=!1;for(const s in e)"currentProject"===s?(this.currentProject=e[s].currentValue,this.sandboxAPI.currentProject$.next(this.currentProject),this.currentPackages=this.currentProject.packages,this.sandboxAPI.currentPackages$.next(this.currentPackages),e[s].currentValue&&e[s].previousValue&&e[s].currentValue.id!==e[s].previousValue.id&&(t=!0)):"currentResult"===s?(this.currentResult=e[s].currentValue,this.sandboxAPI.currentResult$.next(this.currentResult),e[s].currentValue&&e[s].previousValue&&e[s].currentValue.id!==e[s].previousValue.id&&(t=!0)):"currentDataFile"===s?(this.currentDataFile=e[s].currentValue,this.sandboxAPI.currentDataFile$.next(this.currentDataFile),e[s].currentValue&&e[s].previousValue&&e[s].currentValue.id!==e[s].previousValue.id&&(t=!0)):"pageKey"===s?(this.activePageKey=e[s].currentValue,this.sandboxAPI.currentPageKey$.next(this.activePageKey),e[s].currentValue!==e[s].previousValue&&(t=!0)):"validPages"===s?this.validPages=e[s].currentValue:"entryType"===s?(this.entryType=e[s].currentValue,this.sandboxAPI.entryType$.next(this.entryType),e[s].currentValue!==e[s].previousValue&&(t=!0)):"currentPackages"===s?(this.currentPackages=e[s].currentValue,this.sandboxAPI.currentPackages$.next(this.currentPackages)):"isFullPage"===s?this.sandboxAPI.isFullPage$.next(e[s].currentValue):"mode"===s?(this.mode="list"===e[s].currentValue?"list":"page",this.sandboxAPI.pageMode$.next(this.mode)):"currentUser"===s&&(this.currentUser=e[s].currentValue,this.sandboxAPI.currentUser$.next(this.currentUser));const i=this.src||{};if("staticPages"===this.entryType||"proxyPages"===this.entryType||this.validPages.has(this.activePageKey)){let e;if("staticPages"===this.entryType)e=this.sanitizer.bypassSecurityTrustResourceUrl("/data/api/dataFile/"+this.currentDataFile.id+"/static"),this.sandboxAuthorizedSet.add("allow-downloads");else if("proxyPages"===this.entryType)e=this.sanitizer.bypassSecurityTrustResourceUrl("/result/"+this.currentResult.id+"/requestProxy"),this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms");else{const t=this.activePageKey.split(":")[0];e=this.securePagePath(this.validPages.get(this.activePageKey).path,t)}e&&i.changingThisBreaksApplicationSecurity!==e.changingThisBreaksApplicationSecurity?(console.log(`${i.changingThisBreaksApplicationSecurity} changed to ${e.changingThisBreaksApplicationSecurity}`),setTimeout(()=>this.src=e),this.logItems=[]):t&&(this.src=this.securePagePath("/assets/pages/prepare.html"),"proxyPages"===this.entryType&&(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")),setTimeout(()=>{this.src=e,this.currentIndexedDB=void 0})),setTimeout(()=>this.detectSizeChange(),500)}else t&&(console.log("forceupdate change src2"),"proxyPages"===this.entryType?(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")):(this.sandboxAuthorizedSet.delete("allow-same-origin"),this.sandboxAuthorizedSet.delete("allow-forms")),"staticPages"===this.entryType?this.sandboxAuthorizedSet.add("allow-downloads"):this.sandboxAuthorizedSet.delete("allow-downloads"),setTimeout(()=>{this.src=this.securePagePath("/assets/pages/not-found.html"),this.currentIndexedDB=void 0}))}ngAfterViewInit(){setTimeout(()=>this.detectSizeChange(),1e3)}onResize(){clearTimeout(this.onResizeTimer),this.onResizeTimer=setTimeout(()=>this.detectSizeChange(),500)}reloadClient(e){const t=e||this.src;"proxyPages"===this.entryType&&(this.sandboxAuthorizedSet.add("allow-same-origin"),this.sandboxAuthorizedSet.add("allow-forms")),this.src=this.securePagePath("/assets/pages/prepare.html"),setTimeout(()=>{console.log("content reloaded"),this.src=t,this.currentIndexedDB=void 0,this.onResize()},300)}changeMode(e){const t=this.sandboxAPI.pageMode$.getValue();this.sandboxAPI.pageMode$.next("list"==(e=e||"list"!==t?"list":"page")?"list":"page")}historyBack(){this.sandboxAPI.historyBack()}historyForward(){this.sandboxAPI.historyForward()}detectSizeChange(){if(!this.client)return;this.frameWidth=$(this.sandboxContainer.nativeElement).innerWidth();const e=window.innerHeight,t=this.sandboxAPI.isFullPage$.getValue()?e-30:e-274;this.frameHeight=t}onSrcChanged(e){}securePagePath(e,t){return e=e.replace(/^http[s]:/g,"").replace(/\.\./g,""),t&&(e=0===e.indexOf("/")?`/page/api/${t}${e}`:`/page/api/${t}/${e}`),this.sanitizer.bypassSecurityTrustResourceUrl(e)}changePageKey(e,t){console.log(e,this.activePageKey),e!==this.activePageKey&&this.pageChange.emit({page:this.validPages.get(e),package:t}),this.mode="page"}_toggleFullPage(){this.sandboxAPI._toggleFullPage()}openUploaderUI(){this.dialog.open(Ae,{minWidth:"90vw",minHeight:"90vh",disableClose:!0,data:{project:this.currentProject,page:this.validPages[this.activePageKey]}})}notifyDataChange(e){this.sandboxAPI.sendToClient({type:"change",value:e})}onMessagereceived(e){if(!e.data.call||!e.data.id)return;this.sandboxAPI.logItems.push({sent:e.data});const t=e.data.id,i=e.data.call,s=e.data.value;this.sandboxAPI.isValidAPI(i)?this.sandboxAPI[i](t,s):this.sandboxAPI.sendToClient({id:t,call:i,type:"error",value:`The call ${i} is not part of the API.`})}authorizeSandbox(){const e=this.dialog.open(ve,{data:{authorizedList:this.sandboxAuthorized,entryType:this.entryType}}).afterClosed().subscribe(t=>{e.unsubscribe(),Array.isArray(t)&&(0===t.length?this.sandboxAuthorizedSet.add("allow-modal"):this.sandboxAuthorizedSet=new Set(t),this.reloadClient())})}ngOnDestroy(){this.systemService.toggleContentScrollbar(!0),clearTimeout(this.timeout),clearTimeout(this.onResizeTimer),this._subs.forEach(e=>e.unsubscribe()),console.log("Sandbox destroyed")}}return e.\u0275fac=function(t){return new(t||e)(ee.Nb(we.b),ee.Nb(d.b),ee.Nb(re.a),ee.Nb(ce))},e.\u0275cmp=ee.Hb({type:e,selectors:[["bdp-sandbox"]],viewQuery:function(e,t){var i;1&e&&(ee.Gc(Fe,!0),ee.Gc(Ce,!0)),2&e&&(ee.wc(i=ee.cc())&&(t.client=i.first),ee.wc(i=ee.cc())&&(t.sandboxContainer=i.first))},inputs:{currentProject:"currentProject",currentResult:"currentResult",currentDataFile:"currentDataFile",currentUser:"currentUser",currentPackages:"currentPackages",entryType:"entryType",keyOrders:"keyOrders",origin:"origin",pageKey:"pageKey",validPages:"validPages",mode:"mode",isFullPage:"isFullPage"},outputs:{pageChange:"pageChange",requestNavigation:"requestNavigation",requestFullPage:"requestFullPage",rightSideMenuStateChange:"rightSideMenuStateChange",modeChage:"modeChage"},features:[ee.yb],decls:12,vars:12,consts:[[4,"ngIf"],[1,"px-3",2,"background-color","lightgray","width","100%",3,"hidden"],[1,"fas","fa-greater-than","mx-2"],[3,"hidden",4,"ngIf"],[2,"position","relative","overflow","auto","padding","0px",3,"resize"],["sandboxContainer",""],["frameborder","0",2,"position","relative",3,"width","height","src","message","load"],["client",""],["style","position: absolute; background-color: rgba(255, 255, 255, 0.9); top: 0px; left: 0px; right: 0px; bottom: 0px;",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"fas","fa-sync-alt"],[1,"fas","fa-expand"],[1,"fas","fa-th-large"],[1,"fas","fa-unlock"],[1,"fas"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"fas","fa-external-link-alt","ml-1"],[3,"hidden"],["expander",""],[2,"background-color","#F0F0F0",3,"collapsedHeight","expandedHeight"],[2,"color","#2d2d2d"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngModel","ngModelChange"],["mat-button","","color","warn",3,"click"],["style","max-height: 250px; overflow: auto;",4,"ngIf"],[2,"max-height","250px","overflow","auto"],[4,"ngFor","ngForOf"],[2,"font-size","12px","padding","0px",3,"json","expanded"],[2,"position","absolute","background-color","rgba(255, 255, 255, 0.9)","top","0px","left","0px","right","0px","bottom","0px"],["style","position: absolute; top: 30px; left: 50%; transform: translateX(-50%) translateY(-30%);",4,"ngIf"],["class","p-3",4,"ngIf"],[2,"position","absolute","top","30px","left","50%","transform","translateX(-50%) translateY(-30%)"],[1,"display-4","text-center"],[1,"fas","fa-circle-notch","fa-spin"],[1,"p-3"],[1,"d-flex","flex-row"],["mat-stroked-button","",1,"mr-2",3,"click"],[1,"fas","fa-times","fa-fw"],[1,"container-fluid"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","text-muted"],[1,"fas","fa-cube","fa-lg","mr-2"],[1,"fas","fa-cubes","fa-lg","mr-2"],[1,"col-12","my-2"],["class","col-md-6 col-lg-4 col-xl-3 p-2",4,"ngIf"],[1,"col-md-6","col-lg-4","col-xl-3","p-2"],["mat-card-avatar","",3,"src",4,"ngIf"],["class","fas fa-scroll fa-fw fa-2x","mat-card-avatar","",4,"ngIf"],["mat-card-image","",3,"mt-4","src",4,"ngIf"],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-card-avatar","",3,"src"],["mat-card-avatar","",1,"fas","fa-scroll","fa-fw","fa-2x"],["mat-card-image","",3,"src"]],template:function(e,t){1&e&&(ee.Ic(0,De,15,4,"ng-container",0),ee.Tb(1,"div",1),ee.Tb(2,"small"),ee.Ob(3,"i",2),ee.Ic(4,Ke,2,1,"ng-container",0),ee.Ic(5,Oe,2,1,"ng-container",0),ee.Sb(),ee.Sb(),ee.Ic(6,Ve,23,10,"mat-expansion-panel",3),ee.Tb(7,"div",4,5),ee.bc("resize",(function(){return t.onResize()}),!1,ee.zc),ee.Tb(9,"iframe",6,7),ee.bc("message",(function(e){return t.onMessagereceived(e)}),!1,ee.zc)("load",(function(e){return t.onSrcChanged(e)})),ee.Sb(),ee.Ic(11,We,3,2,"div",8),ee.Sb()),2&e&&(ee.mc("ngIf",!t.isFullPage),ee.Ab(1),ee.mc("hidden",t.isFullPage),ee.Ab(3),ee.mc("ngIf","staticPages"===t.entryType||"proxyPages"===t.entryType),ee.Ab(1),ee.mc("ngIf","staticPages"!==t.entryType&&"proxyPages"!==t.entryType),ee.Ab(1),ee.mc("ngIf","staticPages"!==t.entryType&&"proxyPages"!==t.entryType),ee.Ab(1),ee.Hc("border",t.isFullPage?"":"thin solid black"),ee.Ab(2),ee.mc("width",t.frameWidth)("height",t.frameHeight)("src",t.src,ee.Cc),ee.Bb("sandbox",t.sandboxAuthorized.join(" ")),ee.Ab(2),ee.mc("ngIf",t.frameProcessing||"list"===t.mode))},directives:[s.n,a.b,r.c,r.f,r.g,u.a,n.i,n.l,s.m,m.a,g.a,l.a,l.f,l.j,l.i,l.d,l.b,l.c,l.g],pipes:[s.h,s.v],styles:[".mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0 0 0 16px}.mat-checkbox[_ngcontent-%COMP%]{padding-right:14px}"]}),e})();const Ge=["sandbox"],Ye=function(e){return["/project",e,"info"]};function Ze(e,t){if(1&e&&(ee.Tb(0,"a",6),ee.Kc(1),ee.Sb()),2&e){const e=ee.fc(2);ee.mc("routerLink",ee.qc(2,Ye,e.currentProject.id)),ee.Ab(1),ee.Mc("Project: ",e.currentProject.name,"")}}function et(e,t){if(1&e&&(ee.Tb(0,"span"),ee.Kc(1),ee.Sb()),2&e){const e=ee.fc(3);ee.Ab(1),ee.Lc(e.currentPage.name)}}function tt(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Kc(1,"Project Page: "),ee.Ic(2,et,2,1,"span",10),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(2),ee.mc("ngIf",e.currentPage)}}const it=function(e){return["/result",e,"info"]};function st(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Kc(1,"Result: "),ee.Tb(2,"a",6),ee.Kc(3),ee.Sb(),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(2),ee.mc("routerLink",ee.qc(2,it,e.currentResult.id)),ee.Ab(1),ee.Lc(e.currentResult.name)}}function nt(e,t){if(1&e&&(ee.Tb(0,"span"),ee.Kc(1),ee.Sb()),2&e){const e=ee.fc(3);ee.Ab(1),ee.Lc(e.currentPage.name)}}function at(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Kc(1,"Result Page: "),ee.Ic(2,nt,2,1,"span",10),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(2),ee.mc("ngIf",e.currentPage)}}const rt=function(e){return["/result",e,"requestProxy"]};function ot(e,t){if(1&e&&(ee.Tb(0,"span"),ee.Tb(1,"a",11),ee.Kc(2," Proxy "),ee.Ob(3,"i",12),ee.Sb(),ee.Sb()),2&e){const e=ee.fc(3);ee.Ab(1),ee.mc("routerLink",ee.qc(1,rt,e.currentResult.id))}}function ct(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Ic(1,ot,4,3,"span",10),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(1),ee.mc("ngIf",e.currentResult)}}const lt=function(e){return["/dataFile",e,"info"]};function ut(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Kc(1,"Data File: "),ee.Tb(2,"a",6),ee.Kc(3),ee.Sb(),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(2),ee.mc("routerLink",ee.qc(2,lt,e.currentDataFile.id)),ee.Ab(1),ee.Lc(e.currentDataFile.name||"no-name")}}const dt=function(e){return["/data","api","dataFile",e,"static"]};function gt(e,t){if(1&e&&(ee.Tb(0,"span"),ee.Tb(1,"a",11),ee.Kc(2," Folder content "),ee.Ob(3,"i",12),ee.Sb(),ee.Sb()),2&e){const e=ee.fc(3);ee.Ab(1),ee.mc("routerLink",ee.qc(1,dt,e.currentDataFile.id))}}function ht(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Ic(1,gt,4,3,"span",10),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(1),ee.mc("ngIf",e.currentDataFile)}}function bt(e,t){if(1&e&&(ee.Tb(0,"span"),ee.Kc(1),ee.Sb()),2&e){const e=ee.fc(3);ee.Ab(1),ee.Lc(e.currentPage.name)}}function ft(e,t){if(1&e&&(ee.Tb(0,"li",9),ee.Kc(1,"File Page: "),ee.Ic(2,bt,2,1,"span",10),ee.Sb()),2&e){const e=ee.fc(2);ee.Ab(2),ee.mc("ngIf",e.currentPage)}}const pt=function(){return["/home"]},yt=function(){return["/project/list"]};function mt(e,t){if(1&e&&(ee.Tb(0,"ol",4),ee.Tb(1,"li",5),ee.Tb(2,"a",6),ee.Kc(3,"Home"),ee.Sb(),ee.Sb(),ee.Tb(4,"li",5),ee.Tb(5,"a",6),ee.Kc(6,"Project List"),ee.Sb(),ee.Sb(),ee.Tb(7,"li",5),ee.Ic(8,Ze,2,4,"a",7),ee.Sb(),ee.Ic(9,tt,3,1,"li",8),ee.Ic(10,st,4,4,"li",8),ee.Ic(11,at,3,1,"li",8),ee.Ic(12,ct,2,1,"li",8),ee.Ic(13,ut,4,4,"li",8),ee.Ic(14,ht,2,1,"li",8),ee.Ic(15,ft,3,1,"li",8),ee.Sb()),2&e){const e=ee.fc();ee.Ab(2),ee.mc("routerLink",ee.pc(10,pt)),ee.Ab(3),ee.mc("routerLink",ee.pc(11,yt)),ee.Ab(3),ee.mc("ngIf",e.currentProject),ee.Ab(1),ee.mc("ngIf","indexPages"===e.entryType),ee.Ab(1),ee.mc("ngIf",e.currentResult),ee.Ab(1),ee.mc("ngIf","resultPages"===e.entryType),ee.Ab(1),ee.mc("ngIf","proxyPages"===e.entryType),ee.Ab(1),ee.mc("ngIf",e.currentDataFile),ee.Ab(1),ee.mc("ngIf","staticPages"===e.entryType),ee.Ab(1),ee.mc("ngIf","filePages"===e.entryType)}}function vt(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"bdp-sandbox",13,14),ee.bc("pageChange",(function(t){return ee.Ac(e),ee.fc().onPageChange(t)}))("requestNavigation",(function(t){return ee.Ac(e),ee.fc().navigatePage(t)}))("requestFullPage",(function(t){return ee.Ac(e),ee.fc().toggleFullPage(t)}))("rightSideMenuStateChange",(function(t){return ee.Ac(e),ee.fc().toggleRightSideMenu(t)}))("modeChage",(function(t){return ee.Ac(e),ee.fc().onModeChange(t)})),ee.Sb()}if(2&e){const e=ee.fc();ee.mc("currentProject",e.currentProject)("currentResult",e.currentResult)("currentDataFile",e.currentDataFile)("currentPackages",e.currentPackages)("currentUser",e.currentUser)("isFullPage",e.isFullPage)("keyOrders",e.pageKeyOrders)("validPages",e.validPages)("pageKey",e.currentPageKey)("entryType",e.entryType)("mode",e.mode)}}function Tt(e,t){1&e&&ee.Ob(0,"i",28)}function Pt(e,t){1&e&&ee.Ob(0,"i",29)}function St(e,t){1&e&&(ee.Rb(0),ee.Kc(1,"Full page"),ee.Qb())}function It(e,t){1&e&&(ee.Rb(0),ee.Kc(1,"Compress"),ee.Qb())}function xt(e,t){if(1&e){const e=ee.Ub();ee.Tb(0,"div",15),ee.Tb(1,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.showRightButtonContent=!t.showRightButtonContent})),ee.Ic(2,Tt,1,0,"i",17),ee.Ic(3,Pt,1,0,"i",18),ee.Tb(4,"span",19),ee.Kc(5,"MENU"),ee.Sb(),ee.Tb(6,"span",20),ee.Kc(7,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(8,"br"),ee.Tb(9,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.sandbox&&t.sandbox.historyBack()})),ee.Ob(10,"i",21),ee.Tb(11,"span",22),ee.Kc(12,"Back"),ee.Sb(),ee.Tb(13,"span",20),ee.Kc(14,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(15,"br"),ee.Tb(16,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.sandbox&&t.sandbox.historyForward()})),ee.Ob(17,"i",23),ee.Tb(18,"span",22),ee.Kc(19,"Forward"),ee.Sb(),ee.Tb(20,"span",20),ee.Kc(21,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(22,"br"),ee.Tb(23,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.sandbox&&t.sandbox.detectSizeChange()})),ee.Ob(24,"i",24),ee.Tb(25,"span",22),ee.Kc(26,"Adjust size"),ee.Sb(),ee.Tb(27,"span",20),ee.Kc(28,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(29,"br"),ee.Tb(30,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.sandbox&&t.sandbox.reloadClient()})),ee.Ob(31,"i",25),ee.Tb(32,"span",22),ee.Kc(33,"Refresh"),ee.Sb(),ee.Tb(34,"span",20),ee.Kc(35,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(36,"br"),ee.Tb(37,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.mode="list"===t.mode?"page":"list"})),ee.Ob(38,"i",26),ee.Tb(39,"span",22),ee.Kc(40,"Page list"),ee.Sb(),ee.Tb(41,"span",20),ee.Kc(42,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(43,"br"),ee.Tb(44,"a",16),ee.bc("click",(function(){ee.Ac(e);const t=ee.fc();return t.toggleFullPage(!t.isFullPage)})),ee.Ob(45,"i",27),ee.Tb(46,"span",22),ee.Ic(47,St,2,0,"ng-container",10),ee.Ic(48,It,2,0,"ng-container",10),ee.Sb(),ee.Tb(49,"span",20),ee.Kc(50,"\u276f"),ee.Sb(),ee.Sb(),ee.Ob(51,"br"),ee.Sb()}if(2&e){const e=ee.fc();ee.mc("@rightButtonState",e.showRightButtonContent?"active":"inactive"),ee.Ab(2),ee.mc("ngIf",e.showRightButtonContent),ee.Ab(1),ee.mc("ngIf",!e.showRightButtonContent),ee.Ab(1),ee.Eb("active",e.showRightButtonContent),ee.Ab(7),ee.Eb("active",e.showRightButtonContent),ee.Ab(7),ee.Eb("active",e.showRightButtonContent),ee.Ab(7),ee.Eb("active",e.showRightButtonContent),ee.Ab(7),ee.Eb("active",e.showRightButtonContent),ee.Ab(5),ee.Eb("active","list"===e.mode),ee.Ab(2),ee.Eb("active",e.showRightButtonContent),ee.Ab(6),ee.Eb("fa-expand-alt",!e.isFullPage)("fa-compress-alt",e.isFullPage),ee.Ab(1),ee.Eb("active",e.showRightButtonContent),ee.Ab(1),ee.mc("ngIf",!e.isFullPage),ee.Ab(1),ee.mc("ngIf",e.isFullPage)}}let kt=(()=>{class e{constructor(e,t,i,s,n,a,r){this.route=e,this.router=t,this.systemService=i,this.infoService=s,this.projectService=n,this.taskService=a,this.accountService=r,this._subs=[]}ngOnInit(){this.systemService.maintainRightSidebarStatus(!0),this.currentPageKey=null,this.currentPage=null,this.currentPackages=null,this.displayRightSideMenu=!0,this.isFullPage=!1,this.entryType=null,this.mode="page",this._subs.push(this.accountService.currentUser$.subscribe(e=>this.currentUser=e)),this._subs.push(this.systemService.sidebarStatus$.subscribe(e=>{this.sandbox&&this.sandbox.detectSizeChange&&(clearTimeout(this.onChildrenResizeTimer),this.onChildrenResizeTimer=setTimeout(()=>{this.sandbox.detectSizeChange()},500))})),this._subs.push(this.infoService.incomingDataChange$.subscribe(e=>{const t=e.type,i=e.target,s=e.data;if("DataFile"===i||"Result"===i){if(s.project!==this.currentProject.id)return;let e;"DataFile"===i?e=new P.a(s):"Result"===i&&(e=new T.a(s)),this.sandbox.notifyDataChange({type:t,target:i,data:e.getModel()})}})),this._subs.push(this.infoService.incomingResultOutput$.subscribe(e=>{const t=e.target.split(":");t[0]===this.currentProject.id&&this.sandbox.notifyDataChange({type:e.type,target:"ResultMsg",data:{resultId:t[1],content:e.data}})})),this._subs.push(this.projectService.currentProject$.subscribe(e=>{this.currentProject=e,e&&(this.pages=e&&Array.isArray(e.packages)&&e.packages[0]?e.packages[0].pages:new de.a({}),"indexPages"===this.entryType&&this.getValidPages())})),this._subs.push(this.projectService.currentResult$.subscribe(e=>{this.thisResultID&&e&&e.id===this.thisResultID?(this.currentProject&&"resultPages"===this.entryType||"proxyPages"===this.entryType)&&(this.currentResult=e,this.getValidPages()):void 0===e&&(this.currentResult=e)})),this._subs.push(this.projectService.currentDataFile$.subscribe(e=>{this.thisDataFileID&&e&&e.id===this.thisDataFileID?!this.currentProject||"filePages"!==this.entryType&&"staticPages"!==this.entryType||(this.currentDataFile=e,this.getValidPages()):void 0===e&&(this.currentDataFile=e)})),this.route.queryParamMap.subscribe(e=>{const t=e.get("project"),i=e.get("result"),s=e.get("datafile"),n=e.get("static"),a=e.get("proxy");if(this.currentPageKey=e.get("pageKey")||null,this.isFullPage="true"===e.get("fullpage"),t)this.entryType="indexPages",this.projectService.clearCurrentDataFile(),this.projectService.clearCurrentResult(),this.projectService.clearCurrentProject(),this.projectService.setCurrentProject(t,!1);else if(i){"true"===a?this.entryType="proxyPages":(this.entryType="resultPages",this.projectService.clearCurrentDataFile()),this.thisResultID=i;const e=this.projectService.loadResultInfo(i).subscribe(()=>e.unsubscribe())}else if(s){this.thisDataFileID=s,"true"===n?this.entryType="staticPages":(this.entryType="filePages",this.projectService.clearCurrentResult());const e=this.projectService.loadDataFileInfo(s).subscribe(t=>{e.unsubscribe()})}this.systemService.maintainRightSidebarStatus(!0)})}onResize(e){clearTimeout(this.onResizeTimer),this.onResizeTimer=setTimeout(()=>this.detectSizeChange(),400)}detectSizeChange(){const e=window.innerWidth<1024;this.isFullPage?this.systemService.toggleSidebar(!1,!0):this.systemService.toggleSidebar(!e)}getValidPages(){const e=new Map;if(!(this.currentProject&&Array.isArray(this.currentProject.packages)&&this.currentProject.packages[0]&&this.currentProject.packages[0].pages))return void this.router.navigate(this.currentProject?["/project",this.currentProject.id,"info"]:["/project/list"]);this.pageKeyOrders={};const t={},i=this.projectService.getRelatedPackages().subscribe(s=>{if(i.unsubscribe(),s.isError)return this.validPages=new Map,void(this.canInitialize=!0);const n=s.success;if(this.currentPackages=n,Array.isArray(n))for(let i=0;i<n.length;i++){const s=n[i];t[s.id]=[],this.pageKeyOrders[s.id]=[];const a=s.pages?s.pages[this.entryType]:[];Array.isArray(a)&&t[s.id].push.apply(t[s.id],a.filter(e=>{let t=!0;switch(this.entryType){case"resultPages":if(0===e.tasks.length)return!0;if(!this.currentResult)return!1;if(e.tasks.indexOf((this.currentResult.task||this.currentResult.taskSnapshot).key)>=0)return!0;t=!1;break;case"filePages":const i=this.currentDataFile;if(!i)return!1;if(0===e.tags.length){if(!e.format)return!0;if(e.format===i.format)return!0}else{const t=e.rule;if("or"===t)return e.tags.filter(e=>i.tags.indexOf(e)>=0).length>0;if("and"===t)return e.tags.filter(e=>i.tags.indexOf(e)>=0).length===e.tags.length;if("all"===t)return e.tags.filter(e=>i.tags.indexOf(e)>=0).length===i.tags.length}t=!1}return t}));for(let i=0;i<t[s.id].length;i++){const n=t[s.id][i];if(!n.key)continue;const a=s.id+":"+n.key;null==this.currentPageKey?(this.currentPageKey=a||null,this.currentPage=n):this.currentPageKey===a&&(this.currentPage=n),e.set(a,n),this.pageKeyOrders[s.id].push(n.key)}}this.validPages=e,this.requestFullPage(this.isFullPage),setTimeout(()=>this.canInitialize=!0)})}onModeChange(e){this.mode="list"===e?"list":"page"}onPageChange(e){this.canInitialize=!1;const t={project:void 0,result:void 0,datafile:void 0,pageKey:e.package.id+":"+e.page.key,fullpage:this.isFullPage?"true":"false",static:void 0,proxy:void 0};"indexPages"===this.entryType?t.project=this.currentProject.id:"resultPages"===this.entryType?(t.result=this.currentResult.id,t.proxy=!1):"filePages"===this.entryType?t.datafile=this.currentDataFile.id:"staticPages"===this.entryType?(t.datafile=this.currentDataFile.id,t.static=!0):"proxyPages"===this.entryType&&(t.result=this.currentResult.id,t.proxy=!0),this.currentPageKey=e.package.id+":"+e.page.key,this.mode="page",this.router.navigate(["/page"],{queryParams:t})}navigatePage(e){if(!e)return;const t={pageKey:e.pageKey,fullpage:this.isFullPage?"true":"false"};t[e.type]=e.itemID,this.canInitialize=!1,this.router.navigate(["/page"],{queryParams:t}),e.pageKey===this.currentPageKey&&(t.datafile===this.thisDataFileID&&"filePages"===this.entryType||t.result===this.thisResultID&&"resultPages"===this.entryType||t.project&&"indexPages"===this.entryType)&&setTimeout(()=>this.canInitialize=!0,10)}toggleFullPage(e){const t={pageKey:this.currentPageKey,fullpage:e?"true":"false",project:void 0,result:void 0,datafile:void 0,static:void 0,proxy:void 0};"indexPages"===this.entryType?t.project=this.currentProject.id:"resultPages"===this.entryType?(t.result=this.currentResult.id,t.proxy=!1):"filePages"===this.entryType?t.datafile=this.currentDataFile.id:"staticPages"===this.entryType?(t.datafile=this.currentDataFile.id,t.static=!0):"proxyPages"===this.entryType&&(t.result=this.currentResult.id,t.proxy=!0),this.router.navigate(["/page"],{queryParams:t})}requestFullPage(e){const t=window.innerWidth<1024;this.systemService.toggleNavbar(!e),e?this.systemService.toggleSidebar(!1):t||this.systemService.toggleSidebar(!0)}toggleRightSideMenu(e){setTimeout(()=>{this.displayRightSideMenu=void 0===e?!this.displayRightSideMenu:!!e})}ngOnDestroy(){this._subs.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(ee.Nb(oe.a),ee.Nb(oe.c),ee.Nb(re.a),ee.Nb(se.a),ee.Nb(ie.a),ee.Nb(ne.a),ee.Nb(ae.a))},e.\u0275cmp=ee.Hb({type:e,selectors:[["bdp-page"]],viewQuery:function(e,t){var i;1&e&&ee.Qc(Ge,!0),2&e&&ee.wc(i=ee.cc())&&(t.sandbox=i.first)},decls:4,vars:5,consts:[["class","breadcrumb",4,"ngIf"],[1,"bdp-main-container",3,"resize"],["style","display: block;",3,"currentProject","currentResult","currentDataFile","currentPackages","currentUser","isFullPage","keyOrders","validPages","pageKey","entryType","mode","pageChange","requestNavigation","requestFullPage","rightSideMenuStateChange","modeChage",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"breadcrumb-item","active"],[4,"ngIf"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","ml-2"],[2,"display","block",3,"currentProject","currentResult","currentDataFile","currentPackages","currentUser","isFullPage","keyOrders","validPages","pageKey","entryType","mode","pageChange","requestNavigation","requestFullPage","rightSideMenuStateChange","modeChage"],["sandbox",""],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],["aria-hidden","true",1,"fas","fa-arrow-left","fa-fw"],[1,"chi-rbtn-content"],["aria-hidden","true",1,"fas","fa-arrow-right","fa-fw"],["aria-hidden","true",1,"fas","fa-expand","fa-fw"],["aria-hidden","true",1,"fas","fa-sync-alt","fa-fw"],[1,"fas","fa-th-large","fa-fw"],[1,"fas","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"]],template:function(e,t){1&e&&(ee.Ic(0,mt,16,12,"ol",0),ee.Tb(1,"div",1),ee.bc("resize",(function(e){return t.onResize(e)}),!1,ee.zc),ee.Ic(2,vt,2,11,"bdp-sandbox",2),ee.Sb(),ee.Ic(3,xt,52,25,"div",3)),2&e&&(ee.mc("ngIf",!t.isFullPage),ee.Ab(1),ee.Hc("padding",t.isFullPage?"0px":"7px"),ee.Ab(1),ee.mc("ngIf",t.canInitialize&&t.currentProject&&t.currentPackages&&t.currentUser),ee.Ab(1),ee.mc("ngIf",t.displayRightSideMenu))},directives:[s.n,oe.f,Xe],styles:[""],data:{animation:[ue.a]}}),e})();var At=i("MKys");const wt=oe.g.forChild([{path:"",component:kt}]),Ft=[At.a];let Ct=(()=>{class e{}return e.\u0275mod=ee.Lb({type:e}),e.\u0275inj=ee.Kb({factory:function(t){return new(t||e)},providers:[Ft],imports:[[s.c,n.d,o.b,c.g,a.c,r.b,le,wt]]}),e})()}}]);