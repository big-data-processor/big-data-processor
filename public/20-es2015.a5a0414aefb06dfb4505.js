(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"0k1G":function(e,t,c){"use strict";c.r(t),c.d(t,"ProjectModule",(function(){return rr}));var n=c("ofXK"),i=c("3Pt+"),r=c("/1cH"),s=c("bTqV"),a=c("jaxi"),o=c("Wp6s"),b=c("bSwM"),l=c("A5z7"),u=c("7EHt"),d=c("NFeN"),g=c("qFsG"),f=c("M9IT"),p=c("d3UM"),h=c("xHqg"),m=c("wZkO"),T=c("f0Cb"),C=c("MutI"),v=c("QibW"),U=c("nNey"),k=c("5+WD"),P=c("tyNb"),w=c("0IaG"),I=c("fXoL"),L=c("kmnG"),j=c("FKr1");function y(e,t){if(1&e&&(I.Ub(0,"mat-option",12),I.Lc(1),I.Tb()),2&e){const e=I.gc().$implicit;I.nc("value",e),I.Cb(1),I.Mc(e)}}function x(e,t){if(1&e&&(I.Sb(0),I.Jc(1,y,2,2,"mat-option",11),I.Rb()),2&e){const e=t.$implicit,c=I.gc();I.Cb(1),I.nc("ngIf",c.packageLists[e]&&c.packageLists[e].length>0)}}function S(e,t){if(1&e&&(I.Ub(0,"mat-option",12),I.Lc(1),I.Tb()),2&e){const e=I.gc().$implicit;I.nc("value",e),I.Cb(1),I.Nc(" ",e.fullname," ")}}function J(e,t){if(1&e&&(I.Sb(0),I.Jc(1,S,2,2,"mat-option",11),I.Rb()),2&e){const e=t.$implicit,c=I.gc(2);I.Cb(1),I.nc("ngIf",e.scope.indexOf("utility")<0&&!c.existed(e))}}function F(e,t){if(1&e&&(I.Sb(0),I.Jc(1,J,2,1,"ng-container",4),I.Rb()),2&e){const e=I.gc();I.Cb(1),I.nc("ngForOf",e.packageLists[e.selectedSheetName])}}function M(e,t){1&e&&(I.Ub(0,"span",22),I.Lc(1,"Under development"),I.Tb())}function O(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1,"Experimenting"),I.Tb())}function _(e,t){1&e&&(I.Ub(0,"span",24),I.Lc(1,"Stable"),I.Tb())}function R(e,t){1&e&&(I.Ub(0,"span",25),I.Lc(1,"Deprecating"),I.Tb())}function N(e,t){if(1&e&&(I.Ub(0,"div",13),I.Ub(1,"div",14),I.Ub(2,"div",15),I.Ub(3,"h5"),I.Ub(4,"b"),I.Lc(5,"Name"),I.Tb(),I.Tb(),I.Lc(6),I.Ub(7,"h5"),I.Ub(8,"b"),I.Lc(9,"Version"),I.Tb(),I.Tb(),I.Lc(10),I.Ub(11,"h5"),I.Ub(12,"b"),I.Lc(13,"Desc"),I.Tb(),I.Tb(),I.Pb(14,"div",16),I.Ub(15,"h5"),I.Ub(16,"b"),I.Lc(17,"Author/Maintainer"),I.Tb(),I.Tb(),I.Lc(18),I.Ub(19,"h5"),I.Ub(20,"b"),I.Lc(21,"Contact"),I.Tb(),I.Tb(),I.Lc(22),I.Ub(23,"h5"),I.Ub(24,"b"),I.Lc(25,"Status"),I.Tb(),I.Tb(),I.Ub(26,"div",17),I.Jc(27,M,2,0,"span",18),I.Jc(28,O,2,0,"span",19),I.Jc(29,_,2,0,"span",20),I.Jc(30,R,2,0,"span",21),I.Tb(),I.Pb(31,"br"),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(6),I.Nc("",e.selectedPackage.name," "),I.Cb(4),I.Nc("",e.selectedPackage.version," "),I.Cb(4),I.nc("innerHTML",e.selectedPackage.desc,I.Cc),I.Cb(4),I.Nc("",e.selectedPackage.author||"un-named"," "),I.Cb(4),I.Nc("",e.selectedPackage.email||"un-set"," "),I.Cb(4),I.nc("ngSwitch",e.selectedPackage.status),I.Cb(1),I.nc("ngSwitchCase",0),I.Cb(1),I.nc("ngSwitchCase",1),I.Cb(1),I.nc("ngSwitchCase",2),I.Cb(1),I.nc("ngSwitchCase",3)}}let D=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.packageSheetNames=this.data.packageSheetNames,this.packageLists=this.data.packageLists,this.selectedPackages=this.data.selectedPackages,this.packageSheetNames.length>0&&(this.selectedSheetName=this.packageSheetNames[0],this.setInitialSelectedPkg())}selectedSheetNameChange(e){this.selectedSheetName=e,this.setInitialSelectedPkg()}setInitialSelectedPkg(){if(Array.isArray(this.packageLists[this.selectedSheetName]))for(let e=0;e<this.packageLists[this.selectedSheetName].length;e++){const t=this.packageLists[this.selectedSheetName][e];if(t&&!this.existed(t)&&t.scope.indexOf("utility")<0){this.selectedPackage=t;break}}else this.selectedPackage=void 0}existed(e){return e&&e.id&&this.selectedPackages.filter(t=>t&&t.id===e.id).length>=1}selectPackage(){this.dialogRef.close(this.selectedPackage)}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(w.g),I.Ob(w.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["bdp-package-selector"]],decls:15,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"width","350px"],["placeholder","Select a package list",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"width","400px"],["placeholder","Select a package",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","row",4,"ngIf"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],[3,"value",4,"ngIf"],[3,"value"],[1,"row"],[1,"col-md-12"],[2,"border","1px solid black","padding","5px"],[3,"innerHTML"],[2,"font-size","12pt",3,"ngSwitch"],["class","badge badge-danger",4,"ngSwitchCase"],["class","badge badge-warning",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-secondary",4,"ngSwitchCase"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-secondary"]],template:function(e,t){1&e&&(I.Ub(0,"h1",0),I.Lc(1,"Select a package"),I.Tb(),I.Ub(2,"div",1),I.Ub(3,"mat-form-field",2),I.Ub(4,"mat-select",3),I.cc("ngModelChange",(function(e){return t.selectedSheetNameChange(e)})),I.Jc(5,x,2,1,"ng-container",4),I.Tb(),I.Tb(),I.Ub(6,"mat-form-field",5),I.Ub(7,"mat-select",6),I.cc("ngModelChange",(function(e){return t.selectedPackage=e})),I.Jc(8,F,2,1,"ng-container",7),I.Tb(),I.Tb(),I.Jc(9,N,32,10,"div",8),I.Tb(),I.Ub(10,"mat-dialog-actions"),I.Ub(11,"button",9),I.Lc(12,"Close"),I.Tb(),I.Ub(13,"button",10),I.cc("click",(function(){return t.selectPackage()})),I.Lc(14,"Choose"),I.Tb(),I.Tb()),2&e&&(I.Cb(4),I.nc("ngModel",t.selectedSheetName),I.Cb(1),I.nc("ngForOf",t.packageSheetNames),I.Cb(2),I.nc("ngModel",t.selectedPackage),I.Cb(1),I.nc("ngIf",t.selectedPackage),I.Cb(1),I.nc("ngIf",t.selectedPackage))},directives:[w.h,w.e,L.b,p.a,i.i,i.l,n.m,n.n,w.c,s.b,w.d,j.k,n.p,n.q],encapsulation:2}),e})();var q=c("+mqT"),B=c("c3AT"),$=c("i6c7"),V=c("YiK1"),E=c("flj8"),A=c("oBBY");function z(e,t){1&e&&I.Pb(0,"i",57)}function H(e,t){1&e&&I.Pb(0,"i",58)}function Y(e,t){if(1&e&&(I.Sb(0),I.Jc(1,z,1,0,"i",55),I.Jc(2,H,1,0,"i",56),I.Rb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",null==e.privilege?null:e.privilege.canView),I.Cb(1),I.nc("ngIf",!(null!=e.privilege&&e.privilege.canView))}}function K(e,t){1&e&&I.Pb(0,"i",59)}function W(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1,"owner"),I.Tb())}function G(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1,"manager"),I.Tb())}function Q(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," viewer"),I.Tb())}function X(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," runner"),I.Tb())}function Z(e,t){if(1&e&&(I.Ub(0,"div",60),I.Jc(1,W,2,0,"span",47),I.Jc(2,G,2,0,"span",47),I.Jc(3,Q,2,0,"span",47),I.Jc(4,X,2,0,"span",47),I.Tb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",e.privilege.isOwner),I.Cb(1),I.nc("ngIf",e.privilege.isManager),I.Cb(1),I.nc("ngIf",e.privilege.isViewer),I.Cb(1),I.nc("ngIf",e.privilege.isRunner)}}function ee(e,t){1&e&&(I.Ub(0,"div",60),I.Ub(1,"span",23),I.Lc(2,"public"),I.Tb(),I.Tb())}function te(e,t){1&e&&(I.Ub(0,"span",61),I.Lc(1,"main package"),I.Tb())}function ce(e,t){if(1&e&&(I.Ub(0,"span",62),I.Lc(1),I.Tb()),2&e){const e=t.$implicit;I.Cb(1),I.Mc(e)}}function ne(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",63),I.cc("click",(function(){I.Bc(e);const t=I.gc(2).index;return I.gc(2).movePkgUp(t)})),I.Pb(1,"i",64),I.Tb()}}function ie(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",63),I.cc("click",(function(){I.Bc(e);const t=I.gc(2).index;return I.gc(2).movePkgDown(t)})),I.Pb(1,"i",65),I.Tb()}}function re(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," (You)"),I.Tb())}function se(e,t){1&e&&(I.Ub(0,"span",66),I.Lc(1,"Under development"),I.Tb())}function ae(e,t){1&e&&(I.Ub(0,"span",67),I.Lc(1,"Experimenting"),I.Tb())}function oe(e,t){1&e&&(I.Ub(0,"span",68),I.Lc(1,"Stable"),I.Tb())}function be(e,t){1&e&&(I.Ub(0,"span",69),I.Lc(1,"Out of date"),I.Tb())}function le(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-card",33),I.Ub(1,"mat-card-header"),I.Ub(2,"div",34),I.Jc(3,Y,3,2,"ng-container",35),I.Jc(4,K,1,0,"i",36),I.Tb(),I.Ub(5,"mat-card-title"),I.Ub(6,"b"),I.Lc(7),I.Tb(),I.Tb(),I.Ub(8,"mat-card-subtitle"),I.Lc(9),I.hc(10,"htmlToPlainText"),I.Tb(),I.Jc(11,Z,5,4,"div",37),I.Jc(12,ee,3,0,"div",37),I.Tb(),I.Ub(13,"mat-card-content"),I.Jc(14,te,2,0,"span",38),I.Jc(15,ce,2,1,"span",39),I.Tb(),I.Ub(16,"mat-card-actions"),I.Jc(17,ne,2,0,"button",40),I.Jc(18,ie,2,0,"button",41),I.Ub(19,"button",42),I.cc("click",(function(){I.Bc(e);const t=I.gc().index;return I.gc(2).removePkg(t)})),I.Pb(20,"i",43),I.Tb(),I.Tb(),I.Ub(21,"mat-card-footer",44),I.Ub(22,"div",45),I.Pb(23,"i",46),I.Ub(24,"span",23),I.Lc(25),I.Tb(),I.Jc(26,re,2,0,"span",47),I.Tb(),I.Tb(),I.Ub(27,"mat-card-footer",48),I.Ub(28,"div",49),I.Sb(29,50),I.Jc(30,se,2,0,"span",51),I.Jc(31,ae,2,0,"span",52),I.Jc(32,oe,2,0,"span",53),I.Jc(33,be,2,0,"span",54),I.Rb(),I.Tb(),I.Tb(),I.Tb()}if(2&e){const e=I.gc(),t=e.$implicit,c=e.index,n=I.gc(2);I.Cb(3),I.nc("ngIf",!t.public),I.Cb(1),I.nc("ngIf",t.public),I.Cb(3),I.Mc(t.fullname),I.Cb(2),I.Nc(" ",I.ic(10,17,t.desc)," "),I.Cb(2),I.nc("ngIf",!t.public),I.Cb(1),I.nc("ngIf",t.public),I.Cb(2),I.nc("ngIf",0===c),I.Cb(1),I.nc("ngForOf",t.scope),I.Cb(2),I.nc("ngIf",0!==c),I.Cb(1),I.nc("ngIf",c<n.projectPackages.length-1),I.Cb(7),I.Mc(t.owner?t.owner.name:"unset"),I.Cb(1),I.nc("ngIf",(null==t.owner?null:t.owner.id)===(null==n.currentUser?null:n.currentUser.id)),I.Cb(3),I.nc("ngSwitch",t.status),I.Cb(1),I.nc("ngSwitchCase",0),I.Cb(1),I.nc("ngSwitchCase",1),I.Cb(1),I.nc("ngSwitchCase",2),I.Cb(1),I.nc("ngSwitchCase",3)}}function ue(e,t){if(1&e&&(I.Ub(0,"div",31),I.Jc(1,le,34,19,"mat-card",32),I.Tb()),2&e){const e=t.$implicit;I.Cb(1),I.nc("ngIf",e)}}function de(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-card",70),I.cc("click",(function(){return I.Bc(e),I.gc(2).onClickPackageSelector()})),I.Ub(1,"mat-card-header"),I.Ub(2,"div",34),I.Pb(3,"i",71),I.Tb(),I.Ub(4,"mat-card-title"),I.Ub(5,"b"),I.Lc(6,"Click to add a package"),I.Tb(),I.Tb(),I.Tb(),I.Tb()}}function ge(e,t){1&e&&I.Pb(0,"i",74)}function fe(e,t){1&e&&I.Pb(0,"i",58)}function pe(e,t){if(1&e&&(I.Sb(0),I.Jc(1,ge,1,0,"i",73),I.Jc(2,fe,1,0,"i",56),I.Rb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",null==e.privilege?null:e.privilege.canView),I.Cb(1),I.nc("ngIf",!(null!=e.privilege&&e.privilege.canView))}}function he(e,t){1&e&&I.Pb(0,"i",59)}function me(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1,"owner"),I.Tb())}function Te(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1,"manager"),I.Tb())}function Ce(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," viewer"),I.Tb())}function ve(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," runner"),I.Tb())}function Ue(e,t){if(1&e&&(I.Ub(0,"div",60),I.Jc(1,me,2,0,"span",47),I.Jc(2,Te,2,0,"span",47),I.Jc(3,Ce,2,0,"span",47),I.Jc(4,ve,2,0,"span",47),I.Tb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",e.privilege.isOwner),I.Cb(1),I.nc("ngIf",e.privilege.isManager),I.Cb(1),I.nc("ngIf",e.privilege.isViewer),I.Cb(1),I.nc("ngIf",e.privilege.isRunner)}}function ke(e,t){1&e&&(I.Ub(0,"div",60),I.Ub(1,"span",23),I.Lc(2,"public"),I.Tb(),I.Tb())}function Pe(e,t){1&e&&(I.Ub(0,"span",23),I.Lc(1," (You)"),I.Tb())}function we(e,t){1&e&&(I.Ub(0,"span",66),I.Lc(1,"Under development"),I.Tb())}function Ie(e,t){1&e&&(I.Ub(0,"span",67),I.Lc(1,"Experimenting"),I.Tb())}function Le(e,t){1&e&&(I.Ub(0,"span",68),I.Lc(1,"Stable"),I.Tb())}function je(e,t){1&e&&(I.Ub(0,"span",69),I.Lc(1,"Out of date"),I.Tb())}function ye(e,t){if(1&e&&(I.Ub(0,"mat-card",33),I.Ub(1,"mat-card-header"),I.Ub(2,"div",34),I.Jc(3,pe,3,2,"ng-container",35),I.Jc(4,he,1,0,"i",36),I.Tb(),I.Ub(5,"mat-card-title"),I.Ub(6,"b"),I.Lc(7),I.Tb(),I.Tb(),I.Ub(8,"mat-card-subtitle"),I.Lc(9),I.hc(10,"htmlToPlainText"),I.Tb(),I.Jc(11,Ue,5,4,"div",37),I.Jc(12,ke,3,0,"div",37),I.Tb(),I.Ub(13,"mat-card-footer",44),I.Ub(14,"div",45),I.Pb(15,"i",46),I.Ub(16,"span",23),I.Lc(17),I.Tb(),I.Jc(18,Pe,2,0,"span",47),I.Tb(),I.Tb(),I.Ub(19,"mat-card-footer",48),I.Ub(20,"div",49),I.Sb(21,50),I.Jc(22,we,2,0,"span",51),I.Jc(23,Ie,2,0,"span",52),I.Jc(24,Le,2,0,"span",53),I.Jc(25,je,2,0,"span",54),I.Rb(),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.gc().$implicit,t=I.gc(2);I.Ic("background-color","Gainsboro"),I.Cb(3),I.nc("ngIf",!e.public),I.Cb(1),I.nc("ngIf",e.public),I.Cb(3),I.Mc(e.fullname),I.Cb(2),I.Nc(" ",I.ic(10,15,e.desc)," "),I.Cb(2),I.nc("ngIf",!e.public),I.Cb(1),I.nc("ngIf",e.public),I.Cb(5),I.Mc(e.owner?e.owner.name:"unset"),I.Cb(1),I.nc("ngIf",(null==e.owner?null:e.owner.id)===(null==t.currentUser?null:t.currentUser.id)),I.Cb(3),I.nc("ngSwitch",e.status),I.Cb(1),I.nc("ngSwitchCase",0),I.Cb(1),I.nc("ngSwitchCase",1),I.Cb(1),I.nc("ngSwitchCase",2),I.Cb(1),I.nc("ngSwitchCase",3)}}function xe(e,t){if(1&e&&(I.Sb(0),I.Jc(1,ye,26,17,"mat-card",72),I.Rb()),2&e){const e=t.$implicit;I.Cb(1),I.nc("ngIf",e)}}function Se(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",11),I.Ub(1,"div",12),I.Ub(2,"div",13),I.Ub(3,"div",14),I.Ub(4,"h3"),I.Lc(5,"Name"),I.Tb(),I.Tb(),I.Ub(6,"div",15),I.Ub(7,"mat-form-field",16),I.Ub(8,"input",17,18),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc().projectName=t})),I.Tb(),I.Ub(10,"mat-hint",19),I.Lc(11),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Pb(12,"br"),I.Ub(13,"div",13),I.Ub(14,"div",14),I.Ub(15,"h3"),I.Lc(16,"Description"),I.Tb(),I.Tb(),I.Ub(17,"div",15),I.Ub(18,"mat-form-field",16),I.Ub(19,"textarea",20,21),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc().projectDesc=t})),I.Lc(21),I.Tb(),I.Ub(22,"mat-hint",19),I.Lc(23),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Pb(24,"br"),I.Ub(25,"div",13),I.Ub(26,"div",22),I.Ub(27,"h3"),I.Lc(28,"Packages for this project"),I.Tb(),I.Ub(29,"small",23),I.Lc(30,"The first package is the main package."),I.Tb(),I.Pb(31,"hr"),I.Ub(32,"div",24),I.cc("cdkDropListDropped",(function(t){return I.Bc(e),I.gc().drop(t)})),I.Jc(33,ue,2,1,"div",25),I.Tb(),I.Jc(34,de,7,0,"mat-card",26),I.Tb(),I.Ub(35,"div",27),I.Ub(36,"h3"),I.Lc(37,"Utility packages"),I.Tb(),I.Ub(38,"small",23),I.Lc(39,"Utility packages were defined by the admin."),I.Tb(),I.Pb(40,"hr"),I.Jc(41,xe,2,1,"ng-container",28),I.Tb(),I.Tb(),I.Pb(42,"br"),I.Ub(43,"div",13),I.Ub(44,"div",29),I.Ub(45,"button",30),I.cc("click",(function(t){return I.Bc(e),I.gc().onClickCreateProject(t)})),I.Lc(46,"Create"),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&e){const e=I.yc(9),t=I.yc(20),c=I.gc();I.Cb(8),I.nc("ngModel",c.projectName),I.Cb(3),I.Nc("",e.value.length," / 40"),I.Cb(8),I.nc("ngModel",c.projectDesc),I.Cb(2),I.Mc(c.projectDesc),I.Cb(2),I.Nc("",t.value.length," / 160"),I.Cb(10),I.nc("ngForOf",c.projectPackages),I.Cb(1),I.nc("ngIf",c.projectPackages.length<=10),I.Cb(7),I.nc("ngForOf",c.utilityPackages),I.Cb(4),I.nc("disabled",!c.projectName)}}const Je=function(){return["/home"]},Fe=function(){return["/project/list"]},Me=function(){return["/project/create"]};let Oe=(()=>{class e{constructor(e,t,c,n,i,r){this.projectService=e,this.router=t,this.dialog=c,this.taskService=n,this.systemService=i,this.accountService=r}ngOnInit(){this._subs=[],this.projectName="",this.projectDesc="",this.projectPackageID="",this.projectPackages=[],this.utilityPackages=[],this.viewControls={isSubmitting:!1},this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.taskService.packageList$.subscribe(e=>{this.packageLists={},this.packageSheetNames=[],this.utilityPackages=[],e.forEach(e=>{const t=e.sheetName||"Internal Package List";this.packageLists[t]||(this.packageLists[t]=[]),e.privilege.canRun&&this.packageLists[t].push(e),e.scope.indexOf("utility")>=0&&this.utilityPackages.push(e)}),this.packageSheetNames=Object.keys(this.packageLists),this.packageSheetNames=Object(q.a)(this.packageSheetNames);for(const t of this.packageSheetNames)this.packageLists[t]=Object(q.a)(this.packageLists[t],[e=>e.name],["asc"])}),this._subs.push(this.accountService.currentUser$.subscribe(e=>e&&e.isLoggedIn?this.currentUser=e:"")),this.taskService.loadPackages()}onClickPackageSelector(){this.dialog.open(D,{disableClose:!1,data:{packageLists:this.packageLists,packageSheetNames:this.packageSheetNames,selectedPackages:this.projectPackages}}).afterClosed().subscribe(e=>{this.projectPackages.push(e)})}movePkgUp(e){if(e<1)return;const t=this.projectPackages.splice(e,1)[0];console.log(t),this.projectPackages.splice(e-1,0,t)}movePkgDown(e){if(e>=this.projectPackages.length-1)return;const t=this.projectPackages.splice(e,1)[0];this.projectPackages.splice(e+1,0,t)}removePkg(e){this.projectPackages.splice(e,1)}drop(e){Object(k.d)(this.projectPackages,e.previousIndex,e.currentIndex)}onClickCreateProject(e){this.viewControls.isSubmitting=!0,this._subs.push(this.projectService.createProject(this.projectName,this.projectDesc,this.projectPackages.map(e=>e.id)).subscribe(e=>e.isError?this.viewControls.isSubmitting=!1:this.router.navigate(["/project",e.success.id,"info"])))}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(B.a),I.Ob(P.c),I.Ob(w.b),I.Ob($.a),I.Ob(V.a),I.Ob(E.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["project-creation"]],decls:21,vars:10,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"bdp-main-container"],[1,"chi-header"],["style","font-size: 12pt;",4,"ngIf"],[3,"hidden"],[1,"fa","fa-circle-o-notch","fa-spin","fa-3x","fa-fw"],[2,"font-size","12pt"],[1,"container-fluid"],[1,"row"],[1,"col-lg-2"],[1,"col-lg-10"],[2,"width","100%"],["matInput","","maxlength","40","placeholder","Project name",3,"ngModel","ngModelChange"],["projectNameInput",""],["align","end"],["matInput","","placeholder","Say something about this project. (max length: 160 characters)","maxlength","160","rows","4",3,"ngModel","ngModelChange"],["projectDescInput",""],[1,"col-md-12","mb-5"],[1,"text-muted"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["class","ml-1 my-2","class","link viewable","style","height: auto",3,"click",4,"ngIf"],[1,"col-md-12","mt-5"],[4,"ngFor","ngForOf"],[1,"col-md-10","col-md-offset-2"],["mat-raised-button","","color","primary",3,"disabled","click"],["cdkDrag",""],["class","ml-1 my-2","style","height: auto",4,"ngIf"],[1,"ml-1","my-2",2,"height","auto"],["mat-card-avatar",""],[4,"ngIf"],["class","fas fa-unlock fa-fw fa-2x",4,"ngIf"],["class","ml-3","style","position: absolute; top: 2px; right: 5px; font-size: 14px;",4,"ngIf"],["class","badge badge-warning m-3",4,"ngIf"],["class","m-3 badge badge-primary",4,"ngFor","ngForOf"],["mat-button","","color","primary","style","min-width: 1%;",3,"click",4,"ngIf"],["style","min-width: 1%;","mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","accent",2,"min-width","1%",3,"click"],[1,"fas","fa-times","fa-fw"],[2,"text-align","left"],[1,"small","ml-3",2,"font-size","12pt","margin","5px 5px"],[1,"fas","fa-user-circle","text-muted","ml-5","mr-2"],["class","text-muted",4,"ngIf"],[2,"text-align","right"],[1,"small","text-mute",2,"font-size","14pt","margin","5px 5px"],[3,"ngSwitch"],["class","badge badge-danger",4,"ngSwitchCase"],["class","badge badge-warning",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-default",4,"ngSwitchCase"],["class","fas fa-cube fa-2x fa-fw",4,"ngIf"],["class","fas fa-lock fa-fw fa-2x",4,"ngIf"],[1,"fas","fa-cube","fa-2x","fa-fw"],[1,"fas","fa-lock","fa-fw","fa-2x"],[1,"fas","fa-unlock","fa-fw","fa-2x"],[1,"ml-3",2,"position","absolute","top","2px","right","5px","font-size","14px"],[1,"badge","badge-warning","m-3"],[1,"m-3","badge","badge-primary"],["mat-button","","color","primary",2,"min-width","1%",3,"click"],[1,"fas","fa-arrow-up","fa-fw"],[1,"fas","fa-arrow-down","fa-fw"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"link","viewable",2,"height","auto",3,"click"],[1,"far","fa-plus-square","fa-fw","fa-2x"],["class","ml-1 my-2","style","height: auto",3,"background-color",4,"ngIf"],["class","fas fa-cube fa-faw fa-2x",4,"ngIf"],[1,"fas","fa-cube","fa-faw","fa-2x"]],template:function(e,t){1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",1),I.Ub(5,"a",2),I.Lc(6,"Project List"),I.Tb(),I.Tb(),I.Ub(7,"li",3),I.Ub(8,"a",2),I.Lc(9,"Project creation"),I.Tb(),I.Ub(10,"a",4),I.Pb(11,"i",5),I.Tb(),I.Tb(),I.Tb(),I.Ub(12,"div",6),I.Ub(13,"h5",7),I.Lc(14,"Project creation"),I.Tb(),I.Pb(15,"br"),I.Pb(16,"br"),I.Jc(17,Se,47,9,"div",8),I.Ub(18,"div",9),I.Lc(19,"Creating the project... "),I.Pb(20,"i",10),I.Tb(),I.Tb()),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(6,Je)),I.Cb(3),I.nc("routerLink",I.qc(7,Fe)),I.Cb(3),I.nc("routerLink",I.qc(8,Me)),I.Cb(2),I.nc("routerLink",I.qc(9,Me)),I.Cb(7),I.nc("ngIf",!t.viewControls.isSubmitting),I.Cb(1),I.nc("hidden",!t.viewControls.isSubmitting))},directives:[P.f,n.n,L.b,g.a,i.b,i.e,i.i,i.l,L.e,k.b,n.m,s.b,k.a,o.a,o.f,o.c,o.j,o.i,o.d,o.b,o.e,n.p,n.q],pipes:[A.a],styles:[".viewable[_ngcontent-%COMP%]:hover{background-color:#fff3cd;border-color:#ffeeba;box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}"]}),e})();var _e=c("RMCY"),Re=c("7Cdu");function Ne(e,t){if(1&e&&(I.Ub(0,"span"),I.Lc(1),I.Tb()),2&e){const e=I.gc(2);I.Cb(1),I.Nc(": ",e.currentProject.name,"")}}const De=function(e){return["/project",e,"info"]};function qe(e,t){if(1&e&&(I.Ub(0,"li",1),I.Ub(1,"a",2),I.Lc(2,"Project "),I.Jc(3,Ne,2,1,"span",9),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.nc("routerLink",I.rc(2,De,e.currentProject.id)),I.Cb(2),I.nc("ngIf",e.currentProject)}}function Be(e,t){1&e&&(I.Ub(0,"li",1),I.Lc(1,"Project"),I.Tb())}const $e=function(e){return["/project",e,"fileImport"]};function Ve(e,t){if(1&e&&(I.Ub(0,"li",10),I.Ub(1,"a",2),I.Lc(2,"Import Files"),I.Tb(),I.Ub(3,"a",11),I.Pb(4,"i",12),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.nc("routerLink",I.rc(2,$e,e.currentProject.id)),I.Cb(2),I.nc("routerLink",I.rc(4,$e,e.currentProject.id))}}function Ee(e,t){1&e&&(I.Ub(0,"li",1),I.Lc(1,"Import Files"),I.Tb())}function Ae(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",13),I.Ub(1,"div",14),I.Ub(2,"div",15),I.Ub(3,"strong"),I.Lc(4,"Project Name"),I.Tb(),I.Tb(),I.Ub(5,"div",16),I.Lc(6),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Ub(8,"div",14),I.Ub(9,"div",15),I.Ub(10,"strong"),I.Lc(11,"Project Description"),I.Tb(),I.Tb(),I.Ub(12,"div",16),I.Lc(13),I.Tb(),I.Tb(),I.Pb(14,"br"),I.Ub(15,"div",14),I.Ub(16,"div",17),I.Ub(17,"bdp-file-importer",18),I.cc("importTypeChanged",(function(t){return I.Bc(e),I.gc().switchType(t)})),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&e){const e=I.gc();I.Cb(6),I.Mc(null==e.currentProject?null:e.currentProject.name),I.Cb(7),I.Mc(null==e.currentProject?null:e.currentProject.desc),I.Cb(4),I.nc("allowedFormats",e.allowedFormats)("project",e.currentProject)("sysConfig",e.sysConfig)("tasks",e.tasks)("importType",e._viewControls.importType)("currentUser",e.currentUser)}}function ze(e,t){1&e&&I.Pb(0,"i",33)}function He(e,t){1&e&&I.Pb(0,"i",34)}const Ye=function(){return{importType:"folder"}};function Ke(e,t){if(1&e&&(I.Ub(0,"a",25),I.Pb(1,"i",35),I.Ub(2,"span",27),I.Lc(3,"Add a folder"),I.Tb(),I.Ub(4,"span",24),I.Lc(5,"\u276f"),I.Tb(),I.Tb()),2&e){const e=I.gc(2);I.Fb("active","folder"==e._viewControls.importType),I.nc("routerLink",I.rc(6,$e,e.currentProject.id))("queryParams",I.qc(8,Ye)),I.Cb(2),I.Fb("active",e.showRightButtonContent||"folder"==e._viewControls.importType)}}const We=function(){return{importType:"google"}};function Ge(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"a",25),I.Pb(2,"i",36),I.Ub(3,"span",27),I.Lc(4,"Google Drive"),I.Tb(),I.Ub(5,"span",24),I.Lc(6,"\u276f"),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Rb()),2&e){const e=I.gc(2);I.Cb(1),I.Fb("active","google"==e._viewControls.importType),I.nc("routerLink",I.rc(6,$e,e.currentProject.id))("queryParams",I.qc(8,We)),I.Cb(2),I.Fb("active",e.showRightButtonContent||"google"==e._viewControls.importType)}}const Qe=function(){return{importType:"server"}};function Xe(e,t){if(1&e&&(I.Ub(0,"a",25),I.Pb(1,"i",37),I.Ub(2,"span",27),I.Lc(3,"Server folder"),I.Tb(),I.Ub(4,"span",24),I.Lc(5,"\u276f"),I.Tb(),I.Tb()),2&e){const e=I.gc(2);I.Fb("active","server"==e._viewControls.importType),I.nc("routerLink",I.rc(6,$e,e.currentProject.id))("queryParams",I.qc(8,Qe)),I.Cb(2),I.Fb("active",e.showRightButtonContent||"server"==e._viewControls.importType)}}const Ze=function(){return{importType:"local"}},et=function(e){return["/project",e,"dataFile","list"]},tt=function(e){return["/project",e,"result","list"]},ct=function(e){return["/project",e,"result","creation"]};function nt(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",19),I.Ub(1,"a",20),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.showRightButtonContent=!t.showRightButtonContent})),I.Jc(2,ze,1,0,"i",21),I.Jc(3,He,1,0,"i",22),I.Ub(4,"span",23),I.Lc(5,"MENU"),I.Tb(),I.Ub(6,"span",24),I.Lc(7,"\u276f"),I.Tb(),I.Tb(),I.Pb(8,"br"),I.Ub(9,"a",25),I.Pb(10,"i",26),I.Ub(11,"span",27),I.Lc(12,"Local files"),I.Tb(),I.Ub(13,"span",24),I.Lc(14,"\u276f"),I.Tb(),I.Tb(),I.Pb(15,"br"),I.Jc(16,Ke,6,9,"a",28),I.Pb(17,"br"),I.Jc(18,Ge,8,9,"ng-container",9),I.Jc(19,Xe,6,9,"a",28),I.Pb(20,"br"),I.Ub(21,"a",29),I.Pb(22,"i",30),I.Ub(23,"span",27),I.Lc(24,"Data files"),I.Tb(),I.Ub(25,"span",24),I.Lc(26,"\u276f"),I.Tb(),I.Tb(),I.Pb(27,"br"),I.Ub(28,"a",29),I.Pb(29,"i",31),I.Ub(30,"span",27),I.Lc(31,"Results"),I.Tb(),I.Ub(32,"span",24),I.Lc(33,"\u276f"),I.Tb(),I.Tb(),I.Pb(34,"br"),I.Ub(35,"a",29),I.Pb(36,"i",32),I.Ub(37,"span",27),I.Lc(38,"Execute tasks"),I.Tb(),I.Ub(39,"span",24),I.Lc(40,"\u276f"),I.Tb(),I.Tb(),I.Pb(41,"br"),I.Tb()}if(2&e){const e=I.gc();I.nc("@rightButtonState",e.showRightButtonContent?"active":"inactive"),I.Cb(2),I.nc("ngIf",e.showRightButtonContent),I.Cb(1),I.nc("ngIf",!e.showRightButtonContent),I.Cb(1),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.Fb("active",!e._viewControls.importType||"local"==e._viewControls.importType),I.nc("routerLink",I.rc(23,$e,e.currentProject.id))("queryParams",I.qc(25,Ze)),I.Cb(2),I.Fb("active",e.showRightButtonContent||!e._viewControls.importType||"local"==e._viewControls.importType),I.Cb(5),I.nc("ngIf",e.currentUser&&e.currentUser.auths&&e.currentUser.auths.bdp&&e.currentUser.auths.bdp>=3),I.Cb(2),I.nc("ngIf",e.sysConfig&&e.sysConfig.googlePickerAPIKey),I.Cb(1),I.nc("ngIf",e.currentUser&&e.currentUser.auths&&e.currentUser.auths.bdp&&e.currentUser.auths.bdp>=3),I.Cb(2),I.nc("routerLink",I.rc(26,et,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.nc("routerLink",I.rc(28,tt,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.nc("routerLink",I.rc(30,ct,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent)}}const it=function(){return["/home"]},rt=function(){return["/project/list"]};let st=(()=>{class e{constructor(e,t,c,n,i,r,s){this.router=e,this.route=t,this.projectService=c,this.taskService=n,this.userService=i,this.systemService=r,this.dialogRef=s,this.preTags=[],this.filteredTags=[],this.tasks=[],this.allowedFormats=[]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus();const e=this.route.snapshot.params.pid;this._viewControls={isLoading:!0,importType:void 0,moveToDataFileID:"",keepFileName:!1},this.showRightButtonContent=!1,this._subs=[],this.route.queryParamMap.subscribe(e=>{this._viewControls.importType=e.get("importType")?e.get("importType"):"local"}),this._subs.push(this.taskService.taskList$.subscribe(e=>{Array.isArray(e)&&(this.tasks=e)})),this._subs.push(this.systemService.sysInfo$.subscribe(e=>this.sysConfig=e)),this._subs.push(this.projectService.currentProject$.subscribe(e=>{this.currentProject=e,this.currentProject&&!this.currentProject.privilege.canAddFile&&this.router.navigate(["/project",this.currentProject.id,"info"]),this.currentProject&&Array.isArray(this.currentProject.packages)&&(this.allowedFormats=[...new Set([].concat.apply([],this.currentProject.packages.map(e=>e.allowedFormats)))].map(e=>e.toString()),this.taskService.loadTasks(this.currentProject.packages.map(e=>e.id))),this._viewControls.isLoading=!1})),this._subs.push(this.userService.currentUser$.subscribe(e=>this.currentUser=e)),this.projectService.setCurrentProject(e,!0)}openDialog(){this.dialogRef.open(Re.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{allowedFormats:this.allowedFormats,project:this.currentProject,sysConfig:this.sysConfig,tasks:this.tasks,importType:this._viewControls.importType,currentUser:this.currentUser,tags:["test333","test2"]}})}switchType(e){this.currentProject&&this.router.navigate(["/project",this.currentProject.id,"fileImport"],{queryParams:{importType:e}})}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(P.c),I.Ob(P.a),I.Ob(B.a),I.Ob($.a),I.Ob(E.a),I.Ob(V.a),I.Ob(w.b))},e.\u0275cmp=I.Ib({type:e,selectors:[["project-file-importer"]],decls:18,vars:10,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container","p-4"],[1,"chi-header"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid"],[1,"row"],[1,"col-lg-2","col-xl-3"],[1,"col-lg-10","col-xl-9"],[1,"col-12"],[3,"allowedFormats","project","sysConfig","tasks","importType","currentUser","importTypeChanged"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"chi-rbtn",3,"routerLink","queryParams"],[1,"far","fa-hdd","fa-fw"],[1,"chi-rbtn-content"],["class","chi-rbtn",3,"active","routerLink","queryParams",4,"ngIf"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-file","fa-fw"],[1,"far","fa-folder-open","fa-fw"],[1,"fas","fa-play","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],[1,"fas","fa-folder-plus","fa-fw"],[1,"fab","fa-google-drive","fa-fw"],[1,"fas","fa-server","fa-fw"]],template:function(e,t){1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",1),I.Ub(5,"a",2),I.Lc(6,"Project List"),I.Tb(),I.Tb(),I.Jc(7,qe,4,4,"li",3),I.Jc(8,Be,2,0,"li",3),I.Jc(9,Ve,5,6,"li",4),I.Jc(10,Ee,2,0,"li",3),I.Tb(),I.Ub(11,"div",5),I.Ub(12,"h3",6),I.Lc(13,"Import Files"),I.Tb(),I.Pb(14,"br"),I.Pb(15,"br"),I.Jc(16,Ae,18,8,"div",7),I.Tb(),I.Jc(17,nt,42,32,"div",8)),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(8,it)),I.Cb(3),I.nc("routerLink",I.qc(9,rt)),I.Cb(2),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",!t.currentProject),I.Cb(1),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",!t.currentProject),I.Cb(6),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",t.currentProject))},directives:[P.f,n.n,Re.a],styles:["fieldset[_ngcontent-%COMP%]{border:1px solid grey;padding:10px 15px}legend[_ngcontent-%COMP%]{width:auto;margin-bottom:0}.badge[_ngcontent-%COMP%]{margin:2px}"],data:{animation:[_e.a]}}),e})();var at=c("wd/R"),ot=c("EnSQ"),bt=c("QFvA"),lt=c("l8fv");function ut(e,t){1&e&&(I.Ub(0,"span",28),I.Lc(1,"Static value"),I.Tb())}function dt(e,t){1&e&&(I.Ub(0,"span",29),I.Lc(1,"Input value"),I.Tb())}function gt(e,t){1&e&&(I.Ub(0,"span",30),I.Lc(1,"List"),I.Tb())}function ft(e,t){1&e&&(I.Ub(0,"span",31),I.Lc(1,"Input file"),I.Tb())}function pt(e,t){1&e&&(I.Ub(0,"span",32),I.Lc(1,"Output file"),I.Tb())}function ht(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"span"),I.Lc(2),I.Tb(),I.Rb()),2&e){const e=I.gc().$implicit;I.Cb(2),I.Mc(e.default)}}function mt(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"span"),I.Lc(2),I.Tb(),I.Rb()),2&e){const e=I.gc().index,t=I.gc();I.Cb(2),I.Mc(t.selectedInputs[e])}}function Tt(e,t){if(1&e&&(I.Ub(0,"span"),I.Lc(1),I.Tb()),2&e){const e=I.gc(4).$implicit;I.Cb(1),I.Mc(e.listSplitter)}}function Ct(e,t){if(1&e&&(I.Ub(0,"span"),I.Lc(1),I.Jc(2,Tt,2,1,"span",27),I.Tb()),2&e){const e=t.$implicit,c=t.index,n=I.gc(3).index,i=I.gc();I.Cb(1),I.Nc(" ",e," "),I.Cb(1),I.nc("ngIf",c<i.selectedInputs[n].length-1)}}function vt(e,t){if(1&e&&(I.Sb(0),I.Jc(1,Ct,3,2,"span",33),I.Rb()),2&e){const e=I.gc(2).index,t=I.gc();I.Cb(1),I.nc("ngForOf",t.selectedInputs[e])}}function Ut(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"span"),I.Lc(2),I.Tb(),I.Rb()),2&e){const e=I.gc(2).index,t=I.gc();I.Cb(2),I.Mc(t.selectedInputs[e])}}function kt(e,t){if(1&e&&(I.Sb(0),I.Jc(1,vt,2,1,"ng-container",27),I.Jc(2,Ut,3,1,"ng-container",27),I.Rb()),2&e){const e=I.gc().$implicit;I.Cb(1),I.nc("ngIf",e.multiple),I.Cb(1),I.nc("ngIf",!e.multiple)}}const Pt=function(e){return["/dataFile",e,"info"]};function wt(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"u",34),I.Lc(2),I.Tb(),I.Ub(3,"span"),I.Lc(4),I.Tb(),I.Ub(5,"u",34),I.Lc(6),I.Tb(),I.Ub(7,"a",35),I.Pb(8,"span",36),I.Tb(),I.Rb()),2&e){const e=I.gc().$implicit,t=I.gc(3);I.Cb(2),I.Mc(t.validFiles[e.key].prefix),I.Cb(2),I.Mc(t.validFiles[e.key].name),I.Cb(2),I.Mc(t.validFiles[e.key].suffix),I.Cb(1),I.nc("routerLink",I.rc(4,Pt,e.key))}}function It(e,t){if(1&e&&(I.Sb(0),I.Jc(1,wt,9,6,"ng-container",27),I.Rb()),2&e){const e=t.$implicit;I.Cb(1),I.nc("ngIf",e.value)}}function Lt(e,t){if(1&e&&(I.Sb(0),I.Jc(1,It,2,1,"ng-container",33),I.hc(2,"keyvalue"),I.Rb()),2&e){const e=I.gc().index,t=I.gc();I.Cb(1),I.nc("ngForOf",I.ic(2,1,t.selectedInputs[e]))}}function jt(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"u",34),I.Lc(2),I.Tb(),I.Ub(3,"span"),I.Lc(4),I.Tb(),I.Ub(5,"u",34),I.Lc(6),I.Tb(),I.Rb()),2&e){const e=I.gc().index,t=I.gc();I.Cb(2),I.Mc(t.resultInfo.prefix),I.Cb(2),I.Mc(t.resultInfo.outputs[e].name),I.Cb(2),I.Mc(t.resultInfo.suffix)}}function yt(e,t){if(1&e&&(I.Ub(0,"tr",20),I.Ub(1,"td"),I.Lc(2),I.Tb(),I.Ub(3,"td"),I.Lc(4),I.Tb(),I.Ub(5,"td"),I.Sb(6,21),I.Jc(7,ut,2,0,"span",22),I.Jc(8,dt,2,0,"span",23),I.Jc(9,gt,2,0,"span",24),I.Jc(10,ft,2,0,"span",25),I.Jc(11,pt,2,0,"span",26),I.Rb(),I.Tb(),I.Ub(12,"td"),I.Jc(13,ht,3,1,"ng-container",27),I.Jc(14,mt,3,1,"ng-container",27),I.Jc(15,kt,3,2,"ng-container",27),I.Jc(16,Lt,3,3,"ng-container",27),I.Jc(17,jt,7,3,"ng-container",27),I.Tb(),I.Tb()),2&e){const e=t.$implicit,c=t.index,n=I.gc();I.nc("ngClass",n.getRowStyleByArgType(e.type)),I.Cb(2),I.Mc(c+1),I.Cb(2),I.Mc(e.name),I.Cb(2),I.nc("ngSwitch",e.type),I.Cb(1),I.nc("ngSwitchCase","static"),I.Cb(1),I.nc("ngSwitchCase","value"),I.Cb(1),I.nc("ngSwitchCase","list"),I.Cb(1),I.nc("ngSwitchCase","inFile"),I.Cb(1),I.nc("ngSwitchCase","outFile"),I.Cb(2),I.nc("ngIf","static"===e.type),I.Cb(1),I.nc("ngIf","value"===e.type),I.Cb(1),I.nc("ngIf","list"===e.type),I.Cb(1),I.nc("ngIf","inFile"===e.type),I.Cb(1),I.nc("ngIf","outFile"===e.type)}}let xt=(()=>{class e{constructor(){this.validFiles={}}ngOnInit(){}ngOnChanges(e){for(const t in e)"currentTask"===t?this.currentTask=e[t].currentValue:"currentProject"===t?this.currentProject=e[t].currentValue:"resultInfo"===t?this.resultInfo=e[t].currentValue:"selectedInputs"===t?this.selectedInputs=e[t].currentValue||[]:"validInputs"===t&&(this.validInputs=e[t].currentValue||[]);for(let t=0;t<this.validInputs.length;t++)if(Array.isArray(this.validInputs[t]))for(let e=0;e<this.validInputs[t].length;e++){const c=this.validInputs[t][e];this.validFiles[c.id]=c}console.log(this.currentTask),console.log(this.currentProject),console.log(this.resultInfo),console.log(this.selectedInputs),console.log(this.validInputs)}getRowStyleByArgType(e){return{"table-secondary":"value"===e,"table-white":"static"===e,"table-primary":"inFile"===e,"table-info":"list"===e,"table-success":"outFile"===e,"table-danger":!1}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=I.Ib({type:e,selectors:[["bdp-result-describer"]],inputs:{currentTask:"currentTask",currentProject:"currentProject",resultInfo:"resultInfo",selectedInputs:"selectedInputs",validInputs:"validInputs"},features:[I.Ab],decls:49,vars:9,consts:[[1,"container",2,"border","thin solid gray"],[1,"row","p-2"],[1,"row"],[1,"col-md-6"],[2,"width","100%"],["matInput","","placeholder","Project Name","disabled","",3,"value"],["matInput","","placeholder","Package Name","disabled","",3,"value"],["matInput","","placeholder","Task Name","disabled","",3,"value"],["matInput","","placeholder","Task Description","disabled","",3,"value"],[1,"col-md-3"],["matInput","","placeholder","Result Prefix","readonly","",3,"value"],["matInput","","placeholder","Result Name","readonly","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Result Suffix","readonly","",3,"value"],[1,"col-12"],["matInput","","placeholder","Result Description","readonly","",3,"value"],[1,"col-md-12"],[1,"table","table-responsive-md","table-hover","table-bordered","table-sm"],[1,"thead-dark"],[2,"width","40px"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngSwitch"],["class","badge badge-dark",4,"ngSwitchCase"],["class","badge badge-secondary",4,"ngSwitchCase"],["class","badge badge-info",4,"ngSwitchCase"],["class","badge badge-primary",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],[4,"ngIf"],[1,"badge","badge-dark"],[1,"badge","badge-secondary"],[1,"badge","badge-info"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[4,"ngFor","ngForOf"],[1,"text-muted"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"]],template:function(e,t){1&e&&(I.Ub(0,"div",0),I.Ub(1,"div",1),I.Ub(2,"h2"),I.Lc(3,"Result preview"),I.Tb(),I.Tb(),I.Ub(4,"div",2),I.Ub(5,"div",3),I.Ub(6,"mat-form-field",4),I.Pb(7,"input",5),I.Tb(),I.Tb(),I.Ub(8,"div",3),I.Ub(9,"mat-form-field",4),I.Pb(10,"input",6),I.Tb(),I.Tb(),I.Tb(),I.Ub(11,"div",2),I.Ub(12,"div",3),I.Ub(13,"mat-form-field",4),I.Pb(14,"input",7),I.Tb(),I.Tb(),I.Ub(15,"div",3),I.Ub(16,"mat-form-field",4),I.Pb(17,"textarea",8),I.Tb(),I.Tb(),I.Tb(),I.Ub(18,"div",2),I.Ub(19,"div",9),I.Ub(20,"mat-form-field",4),I.Pb(21,"input",10),I.Tb(),I.Tb(),I.Ub(22,"div",3),I.Ub(23,"mat-form-field",4),I.Ub(24,"input",11),I.cc("ngModelChange",(function(e){return t.resultInfo.name=e})),I.Tb(),I.Tb(),I.Tb(),I.Ub(25,"div",9),I.Ub(26,"mat-form-field",4),I.Pb(27,"input",12),I.Tb(),I.Tb(),I.Tb(),I.Ub(28,"div",2),I.Ub(29,"div",13),I.Ub(30,"mat-form-field",4),I.Pb(31,"textarea",14),I.Tb(),I.Tb(),I.Tb(),I.Ub(32,"div",2),I.Ub(33,"div",15),I.Ub(34,"b"),I.Lc(35,"Input Arguments"),I.Tb(),I.Tb(),I.Ub(36,"div",15),I.Ub(37,"table",16),I.Ub(38,"thead",17),I.Ub(39,"th",18),I.Lc(40,"#"),I.Tb(),I.Ub(41,"th"),I.Lc(42,"Name"),I.Tb(),I.Ub(43,"th"),I.Lc(44,"Type"),I.Tb(),I.Ub(45,"th"),I.Lc(46,"Selected Value"),I.Tb(),I.Tb(),I.Ub(47,"tbody"),I.Jc(48,yt,18,14,"tr",19),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&e&&(I.Cb(7),I.nc("value",t.currentProject.name),I.Cb(3),I.nc("value",t.currentTask.package.name),I.Cb(4),I.nc("value",t.currentTask.name),I.Cb(3),I.nc("value",t.currentTask.desc||"(no description)"),I.Cb(4),I.nc("value",t.resultInfo.prefix||"(N/A)"),I.Cb(3),I.nc("ngModel",t.resultInfo.name),I.Cb(3),I.nc("value",t.resultInfo.suffix||"(N/A)"),I.Cb(4),I.nc("value",t.resultInfo.desc||"(no description)"),I.Cb(17),I.nc("ngForOf",t.currentTask.arguments))},directives:[L.b,g.a,i.b,i.i,i.l,n.m,n.l,n.p,n.q,n.n,P.f],pipes:[n.h],encapsulation:2}),e})();function St(e,t){if(1&e&&(I.Ub(0,"span"),I.Lc(1),I.Tb()),2&e){const e=I.gc(2);I.Cb(1),I.Nc(": ",e.currentProject.name,"")}}const Jt=function(e){return["/project",e,"info"]};function Ft(e,t){if(1&e&&(I.Ub(0,"li",1),I.Ub(1,"a",2),I.Lc(2,"Project "),I.Jc(3,St,2,1,"span",17),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.nc("routerLink",I.rc(2,Jt,e.currentProject.id)),I.Cb(2),I.nc("ngIf",e.currentProject)}}function Mt(e,t){1&e&&(I.Ub(0,"li",1),I.Lc(1,"Project"),I.Tb())}const Ot=function(e){return["/project",e,"result","creation"]};function _t(e,t){if(1&e&&(I.Ub(0,"li",40),I.Ub(1,"a",2),I.Lc(2,"Execute Tasks"),I.Tb(),I.Ub(3,"a",41),I.Pb(4,"i",42),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.nc("routerLink",I.rc(2,Ot,e.currentProject.id)),I.Cb(2),I.nc("routerLink",I.rc(4,Ot,e.currentProject.id))}}function Rt(e,t){1&e&&(I.Ub(0,"li",40),I.Lc(1,"Execute Tasks"),I.Tb())}function Nt(e,t){if(1&e&&(I.Ub(0,"mat-icon",43),I.Lc(1,"looks_one"),I.Tb(),I.Ub(2,"div"),I.Lc(3,"Choose a task"),I.Tb()),2&e){const e=I.gc();I.Fb("text-primary",0==e.currentStep),I.Cb(2),I.Fb("text-primary",0==e.currentStep)}}function Dt(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",14),I.Ub(1,"div",15),I.Ub(2,"mat-button-toggle-group",44),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc().changeTaskViewFilter(t)})),I.Ub(3,"mat-button-toggle",45),I.Lc(4,"All"),I.Tb(),I.Ub(5,"mat-button-toggle",46),I.Pb(6,"i",47),I.Tb(),I.Ub(7,"mat-button-toggle",48),I.Pb(8,"i",49),I.Tb(),I.Ub(9,"mat-button-toggle",50),I.Pb(10,"i",51),I.Tb(),I.Ub(11,"mat-button-toggle",52),I.cc("click",(function(){return I.Bc(e),I.gc().onTaskReloadBtnClick()})),I.Pb(12,"i",53),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&e){const e=I.gc();I.Cb(2),I.nc("ngModel",e.taskViewType)}}function qt(e,t){if(1&e&&(I.Ub(0,"h3",57),I.Pb(1,"i",58),I.Lc(2),I.Tb()),2&e){const e=I.gc().$implicit,t=I.gc();I.Cb(2),I.Nc(" ",t.taskKey2name[e],"")}}function Bt(e,t){if(1&e&&I.Pb(0,"img",74),2&e){const e=I.gc(2).$implicit;I.nc("src",e.thumbnail,I.Ec)}}function $t(e,t){1&e&&I.Pb(0,"i",75)}function Vt(e,t){1&e&&I.Pb(0,"i",76)}function Et(e,t){1&e&&I.Pb(0,"i",77)}function At(e,t){1&e&&I.Pb(0,"i",78)}function zt(e,t){if(1&e&&(I.Ub(0,"div",79),I.Pb(1,"img",80),I.Tb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("src",e.img,I.Ec)}}function Ht(e,t){if(1&e&&I.Pb(0,"div",81),2&e){const e=I.gc(2).$implicit;I.nc("innerHTML",e.desc?e.desc:"(no description)",I.Cc)}}function Yt(e,t){1&e&&(I.Ub(0,"strong"),I.Lc(1,"This task will generate the following output data."),I.Tb())}function Kt(e,t){1&e&&(I.Ub(0,"strong"),I.Lc(1,"This task does NOT generate output data files."),I.Tb())}function Wt(e,t){if(1&e&&(I.Ub(0,"li",84),I.Ub(1,"b"),I.Lc(2),I.Tb(),I.Lc(3),I.Tb()),2&e){const e=I.gc().$implicit;I.Cb(2),I.Mc(null==e?null:e.name),I.Cb(1),I.Nc(": ",null==e?null:e.desc," ")}}function Gt(e,t){if(1&e&&I.Jc(0,Wt,4,2,"li",83),2&e){const e=t.$implicit;I.nc("ngIf","outFile"==(null==e?null:e.type))}}function Qt(e,t){if(1&e&&(I.Ub(0,"div"),I.Ub(1,"fieldset"),I.Ub(2,"legend"),I.Ub(3,"b"),I.Lc(4,"Full description"),I.Tb(),I.Tb(),I.Pb(5,"div",82),I.Pb(6,"hr"),I.Jc(7,Yt,2,0,"strong",17),I.Jc(8,Kt,2,0,"strong",17),I.Ub(9,"ol"),I.Jc(10,Gt,1,1,"ng-template",34),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.gc(4);I.Cb(5),I.nc("innerHTML",e.selectedTask.desc?e.selectedTask.desc:"(no description)",I.Cc),I.Cb(2),I.nc("ngIf",e.outputNumber>0),I.Cb(1),I.nc("ngIf",0===e.outputNumber),I.Cb(2),I.nc("ngForOf",null==e.selectedTask?null:e.selectedTask.arguments)}}function Xt(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",85),I.cc("click",(function(t){return I.Bc(e),I.gc(4).onTaskBlur(t)})),I.Lc(1,"Cancel"),I.Tb()}}function Zt(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",86),I.cc("click",(function(){I.Bc(e);const t=I.gc(4);return t.showWorkflow=!t.showWorkflow})),I.Pb(1,"i",87),I.Lc(2," Show workflow graph"),I.Tb()}}function ec(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",86),I.cc("click",(function(){I.Bc(e);const t=I.gc(4);return t.showWorkflow=!t.showWorkflow})),I.Pb(1,"i",87),I.Lc(2," Close workflow graph"),I.Tb()}}function tc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",88),I.cc("click",(function(){return I.Bc(e),I.gc(4).currentStep=1})),I.Lc(1,"Next"),I.Tb()}if(2&e){const e=I.gc(4);I.nc("disabled",e.viewControls.workflowErrors.length>0)}}function cc(e,t){if(1&e&&(I.Ub(0,"mat-list-item",91),I.Lc(1),I.Tb()),2&e){const e=t.$implicit;I.Cb(1),I.Nc("*",e,"")}}function nc(e,t){if(1&e&&(I.Ub(0,"mat-list",89),I.Jc(1,cc,2,1,"mat-list-item",90),I.Tb()),2&e){const e=I.gc(4);I.Cb(1),I.nc("ngForOf",e.viewControls.workflowErrors)}}function ic(e,t){if(1&e&&I.Pb(0,"bdp-workflow-planner",92),2&e){const e=I.gc(4);I.nc("taskMapper",e.selectedTask.mapper)("additionalTasks",e.loadedTasks)("childTasks",e.allTasksInPkg)("taskArgs",e.selectedTask.arguments)}}const rc=function(e,t,c){return{"p-1":!0,"col-xl-4":e,"col-lg-6":t,"col-12":c}};function sc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",60),I.Ub(1,"mat-card",61),I.cc("click",(function(){I.Bc(e);const t=I.gc().$implicit;return I.gc(2).onSelectTask(t)})),I.Ub(2,"mat-card-header"),I.Jc(3,Bt,1,1,"img",62),I.Ub(4,"mat-card-title"),I.Jc(5,$t,1,0,"i",63),I.Jc(6,Vt,1,0,"i",64),I.Jc(7,Et,1,0,"i",65),I.Jc(8,At,1,0,"i",66),I.Ub(9,"b"),I.Lc(10),I.Tb(),I.Tb(),I.Ub(11,"mat-card-subtitle"),I.Pb(12,"i",67),I.Lc(13),I.Tb(),I.Tb(),I.Ub(14,"mat-card-content"),I.Jc(15,zt,2,1,"div",68),I.Jc(16,Ht,1,1,"div",69),I.Jc(17,Qt,11,4,"div",17),I.Tb(),I.Ub(18,"mat-card-actions"),I.Jc(19,Xt,2,0,"button",70),I.Jc(20,Zt,3,0,"button",35),I.Jc(21,ec,3,0,"button",35),I.Jc(22,tc,2,1,"button",71),I.Tb(),I.Jc(23,nc,2,1,"mat-list",72),I.Jc(24,ic,1,4,"bdp-workflow-planner",73),I.Tb(),I.Tb()}if(2&e){const e=I.gc().$implicit,t=I.gc(2);I.nc("ngClass",I.tc(21,rc,t.selectedTask!==e,t.selectedTask!==e,t.selectedTask===e)),I.Cb(1),I.Ic("cursor",t.selectedTask?"auto":"pointer")("height","auto"),I.Cb(2),I.nc("ngIf",e.thumbnail),I.Cb(2),I.nc("ngIf","workflow"==e.type),I.Cb(1),I.nc("ngIf","standard"==e.type),I.Cb(1),I.nc("ngIf","child"==e.type),I.Cb(1),I.nc("ngIf","system"==e.type),I.Cb(2),I.Mc(e.name),I.Cb(3),I.Nc("",null==e||null==e.package?null:e.package.fullname," "),I.Cb(2),I.nc("ngIf",e.img),I.Cb(1),I.nc("ngIf",!t.selectedTask),I.Cb(1),I.nc("ngIf",t.selectedTask),I.Cb(2),I.nc("ngIf",t.selectedTask),I.Cb(1),I.nc("ngIf",t.selectedTask&&"workflow"===t.selectedTask.type&&!t.showWorkflow),I.Cb(1),I.nc("ngIf",t.selectedTask&&"workflow"===t.selectedTask.type&&t.showWorkflow),I.Cb(1),I.nc("ngIf",t.selectedTask),I.Cb(1),I.nc("ngIf",t.viewControls.workflowErrors.length>0),I.Cb(1),I.nc("ngIf",t.selectedTask&&"workflow"===t.selectedTask.type&&t.showWorkflow)}}function ac(e,t){if(1&e&&(I.Sb(0),I.Jc(1,sc,25,25,"div",59),I.Rb()),2&e){const e=t.$implicit,c=I.gc(2);I.Cb(1),I.nc("ngIf",e&&"child"!==e.type&&(!c.selectedTask||c.selectedTask&&c.selectedTask===e))}}function oc(e,t){if(1&e&&(I.Ub(0,"div",14),I.Jc(1,qt,3,1,"h3",54),I.Jc(2,ac,2,1,"ng-container",55),I.Pb(3,"mat-divider",56),I.Tb()),2&e){const e=t.$implicit,c=I.gc();I.Cb(1),I.nc("ngIf",!c.selectedTask||c.selectedTask.package.sheetID+c.selectedTask.package.fullname===e),I.Cb(1),I.nc("ngForOf",c.taskListView[e])}}function bc(e,t){if(1&e&&(I.Ub(0,"mat-icon",43),I.Lc(1,"looks_two"),I.Tb(),I.Ub(2,"span"),I.Lc(3," Set parameters "),I.Tb()),2&e){const e=I.gc();I.Fb("text-primary",1==e.currentStep),I.Cb(2),I.Fb("text-primary",1==e.currentStep)}}function lc(e,t){if(1&e&&(I.Ub(0,"div",14),I.Ub(1,"div",15),I.Pb(2,"br"),I.Lc(3),I.Pb(4,"br"),I.Lc(5," Task description: "),I.Pb(6,"br"),I.Pb(7,"div",82),I.Pb(8,"br"),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(3),I.Nc(" You are going to run the task: ",e.selectedTask.name,". "),I.Cb(4),I.nc("innerHTML",e.selectedTask.desc,I.Cc)}}function uc(e,t){1&e&&(I.Ub(0,"div"),I.Lc(1,"Loading ..."),I.Tb())}function dc(e,t){1&e&&(I.Ub(0,"span"),I.Lc(1,"No parameters needed."),I.Tb())}function gc(e,t){1&e&&(I.Ub(0,"span"),I.Lc(1,"[Optional]"),I.Tb())}function fc(e,t){if(1&e&&(I.Ub(0,"small"),I.Lc(1),I.Tb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.Mc(e.desc)}}function pc(e,t){1&e&&(I.Ub(0,"small",99),I.Lc(1,"(no description)"),I.Tb())}function hc(e,t){if(1&e&&(I.Ub(0,"div",97),I.Ub(1,"h3"),I.Ub(2,"strong"),I.Jc(3,gc,2,0,"span",17),I.Lc(4),I.Tb(),I.Lc(5,": "),I.Jc(6,fc,2,1,"small",17),I.Jc(7,pc,2,0,"small",98),I.Tb(),I.Tb()),2&e){const e=I.gc().$implicit;I.Cb(3),I.nc("ngIf",e.optional),I.Cb(1),I.Nc(" ",null==e?null:e.name,""),I.Cb(2),I.nc("ngIf",e.desc),I.Cb(1),I.nc("ngIf",!e.desc)}}function mc(e,t){if(1&e&&(I.Ub(0,"mat-hint",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(2).index,t=I.gc(2);I.Cb(1),I.Nc("*",t.viewControls.errorInputs[e],"")}}function Tc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",97),I.Ub(1,"mat-form-field",27),I.Ub(2,"input",100),I.cc("ngModelChange",(function(t){I.Bc(e);const c=I.gc().index;return I.gc(2)._selectedInputs[c]=t})),I.Tb(),I.Jc(3,mc,2,1,"mat-hint",31),I.Tb(),I.Tb()}if(2&e){const e=I.gc(),t=e.$implicit,c=e.index,n=I.gc(2);I.Cb(2),I.nc("disabled",n.paramChecked)("placeholder",t.name)("ngModel",n._selectedInputs[c]),I.Cb(1),I.nc("ngIf",n.viewControls.errorInputs[c])}}function Cc(e,t){1&e&&(I.Ub(0,"span"),I.Lc(1," must equal to "),I.Tb())}function vc(e,t){if(1&e&&(I.Sb(0),I.Lc(1),I.Rb()),2&e){const e=I.gc(3).$implicit;I.Cb(1),I.Nc("[",e.tagMatchRule,"]")}}function Uc(e,t){if(1&e&&(I.Sb(0),I.Jc(1,vc,2,1,"ng-container",17),I.Ub(2,"span",105),I.Lc(3),I.Tb(),I.Rb()),2&e){const e=t.$implicit,c=t.index,n=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",c>0&&"all"!==n.tagMatchRule),I.Cb(2),I.Nc(" ",e," ")}}function kc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(2).index,t=I.gc(2);I.Cb(1),I.Nc("*",t.viewControls.errorInputs[e],"")}}function Pc(e,t){1&e&&(I.Ub(0,"h4",101),I.Lc(1,"No valid inputs. "),I.Pb(2,"br"),I.Tb())}function wc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"datafile-card",107),I.cc("onFocused",(function(t){I.Bc(e);const c=I.gc(2).index,n=I.gc(2).index;return I.gc(2).onFocusedDataFile(t,n,c)})),I.Tb()}if(2&e){const e=I.gc(2).$implicit,t=I.gc(2).index,c=I.gc(2);I.nc("role","checkBox")("checked",c._selectedInputs[t][e.id])("disabled",c.paramChecked)("dataFile",e)}}function Ic(e,t){if(1&e&&(I.Sb(0),I.Jc(1,wc,1,4,"datafile-card",106),I.Rb()),2&e){const e=I.gc().$implicit,t=I.gc(2).index,c=I.gc(2);I.Cb(1),I.nc("ngIf",!c._selectedDataFiles[t]||c._selectedInputs[t][e.id])}}function Lc(e,t){if(1&e&&(I.Sb(0),I.Jc(1,Ic,2,1,"ng-container",17),I.Rb()),2&e){const e=t.$implicit,c=I.gc(4);I.Cb(1),I.nc("ngIf",!e.hidden||c.showIntermediateFile)}}function jc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",97),I.Ub(1,"button",102),I.cc("click",(function(){I.Bc(e);const t=I.gc().$implicit;return I.gc(2).uploadFileForArg(t)})),I.Pb(2,"i",103),I.Tb(),I.Ub(3,"span"),I.Ub(4,"b"),I.Lc(5,"*required tag(s)"),I.Tb(),I.Lc(6,": "),I.Jc(7,Cc,2,0,"span",17),I.Jc(8,Uc,4,2,"ng-container",55),I.Tb(),I.Jc(9,kc,2,1,"span",31),I.Tb(),I.Ub(10,"div",97),I.Jc(11,Pc,3,0,"h4",31),I.Ub(12,"div",14),I.Jc(13,Lc,2,1,"ng-container",104),I.Tb(),I.Tb()}if(2&e){const e=I.gc(),t=e.$implicit,c=e.index,n=I.gc(2);I.Cb(7),I.nc("ngIf","all"===t.tagMatchRule),I.Cb(1),I.nc("ngForOf",t.tags),I.Cb(1),I.nc("ngIf",n.viewControls.errorInputs[c]),I.Cb(2),I.nc("ngIf",n.validInputs[c]&&0==n.validInputs[c].length),I.Cb(2),I.nc("ngForOf",n.validInputs[c])("ngForTrackBy",n.trackByDataFile)}}function yc(e,t){if(1&e&&(I.Ub(0,"mat-option",110),I.Lc(1),I.Tb()),2&e){const e=t.$implicit;I.nc("value",e),I.Cb(1),I.Mc(e)}}function xc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(3).index,t=I.gc(2);I.Cb(1),I.Nc("*",t.viewControls.errorInputs[e],"")}}function Sc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div"),I.Ub(1,"div",97),I.Ub(2,"mat-form-field",27),I.Ub(3,"mat-select",108),I.cc("ngModelChange",(function(t){I.Bc(e);const c=I.gc(2).index;return I.gc(2)._selectedInputs[c]=t})),I.Jc(4,yc,2,2,"mat-option",109),I.Tb(),I.Tb(),I.Jc(5,xc,2,1,"span",31),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2),t=e.index,c=e.$implicit,n=I.gc(2);I.Cb(3),I.nc("ngModel",n._selectedInputs[t])("multiple",c.multiple)("disabled",n.paramChecked)("placeholder",c.name),I.Cb(1),I.nc("ngForOf",c.list),I.Cb(1),I.nc("ngIf",n.viewControls.errorInputs[t])}}function Jc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(4).index,t=I.gc(2);I.Cb(1),I.Nc("*",t.viewControls.errorInputs[e],"")}}function Fc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(5).index,t=I.gc(2);I.Cb(1),I.Nc("*",t.viewControls.errorInputs[e],"")}}function Mc(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"div",116),I.Pb(2,"input",117),I.Jc(3,Fc,2,1,"span",31),I.Tb(),I.Pb(4,"div",118),I.Rb()),2&e){const e=I.gc(4).index,t=I.gc(2);I.Cb(2),I.nc("disabled",t.paramChecked)("value",t._selectedInputs[e]?(null==t._selectedInputs[e]?null:t._selectedInputs[e].length)>5?t._selectedInputs[e].slice(0,5)+"... and "+((null==t._selectedInputs[e]?null:t._selectedInputs[e].length)-5)+" items":t._selectedInputs[e]:""),I.Cb(1),I.nc("ngIf",t.viewControls.errorInputs[e]),I.Cb(1),I.nc("hidden",t._selectedInputs[e])}}function Oc(e,t){if(1&e&&(I.Ub(0,"mat-option",110),I.Lc(1),I.Tb()),2&e){const e=t.$implicit;I.nc("value",e),I.Cb(1),I.Mc(e)}}function _c(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-select",120),I.cc("ngModelChange",(function(t){I.Bc(e);const c=I.gc(5).index;return I.gc(2)._selectedInputs[c]=t}))("ngModelChange",(function(t){I.Bc(e);const c=I.gc(5).index,n=I.gc(2);return n._selectedInputs[c]=t,n.viewControls.errorInputs[c]=void 0})),I.Jc(1,Oc,2,2,"mat-option",109),I.hc(2,"slice"),I.Tb()}if(2&e){const e=I.gc(5),t=e.$implicit,c=e.index,n=I.gc(2);I.nc("multiple",t.multiple)("ngModel",n._selectedInputs[c])("disabled",n.paramChecked),I.Cb(1),I.nc("ngForOf",I.jc(2,4,n._loadedDataFile[n._valueOfListData[c]][0],1))}}function Rc(e,t){if(1&e&&(I.Ub(0,"div"),I.Jc(1,_c,3,7,"mat-select",119),I.Pb(2,"br"),I.Pb(3,"br"),I.Tb()),2&e){const e=I.gc(4).index,t=I.gc(2);I.Cb(1),I.nc("ngIf",t._loadedDataFile[t._valueOfListData[e]])}}function Nc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",112),I.Ub(1,"button",113),I.cc("click",(function(t){I.Bc(e);const c=I.gc(3).index;return I.gc(2).onGetList(t,c)})),I.Lc(2," Loading list "),I.Pb(3,"i",114),I.Pb(4,"i",115),I.Tb(),I.Jc(5,Jc,2,1,"span",31),I.Jc(6,Mc,5,4,"ng-container",17),I.Jc(7,Rc,4,1,"div",17),I.Tb()}if(2&e){const e=I.gc(3),t=e.index,c=e.$implicit,n=I.gc(2);I.Cb(1),I.Fb("text-muted",n.paramChecked),I.Cb(4),I.nc("ngIf",n.viewControls.errorInputs[t]),I.Cb(1),I.nc("ngIf",n._valueOfListData[t]&&(null==c?null:c.preview)),I.Cb(1),I.nc("ngIf",n._valueOfListData[t]&&!(null!=c&&c.preview))}}function Dc(e,t){if(1&e&&(I.Sb(0),I.Jc(1,Nc,8,5,"div",111),I.Rb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf","argv"==e.dependOn.split(".")[0])}}function qc(e,t){if(1&e&&(I.Jc(0,Sc,6,6,"div",17),I.Jc(1,Dc,2,1,"ng-container",17)),2&e){const e=I.gc().$implicit;I.nc("ngIf",e.list.length>0),I.Cb(1),I.nc("ngIf",0==(null==e?null:e.list.length))}}function Bc(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"div",94),I.Jc(2,hc,8,4,"div",95),I.Jc(3,Tc,4,4,"ng-template",96),I.Jc(4,jc,14,6,"ng-template",96),I.Jc(5,qc,2,2,"ng-template",96),I.Tb(),I.Rb()),2&e){const e=t.$implicit,c=t.index,n=I.gc(2);I.Cb(1),I.Fb("hasError",n.viewControls.errorInputs[c]&&"outFile"!==(null==e?null:e.type)),I.nc("ngSwitch",null==e?null:e.type),I.Cb(1),I.nc("ngIf","outFile"!==e.type&&"static"!==e.type),I.Cb(1),I.nc("ngSwitchCase","value"),I.Cb(1),I.nc("ngSwitchCase","inFile"),I.Cb(1),I.nc("ngSwitchCase","list")}}function $c(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",86),I.cc("click",(function(){return I.Bc(e),I.gc(2).checkParams()})),I.Lc(1,"Check my parameters "),I.Tb()}}function Vc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",121),I.cc("click",(function(){return I.Bc(e),I.gc(2).paramChecked=!1})),I.Lc(1,"Modify parameters "),I.Tb()}}function Ec(e,t){if(1&e&&(I.Ub(0,"div",15),I.Pb(1,"mat-divider",93),I.Jc(2,dc,2,0,"span",17),I.Jc(3,Bc,6,7,"ng-container",55),I.Pb(4,"mat-divider",93),I.Jc(5,$c,2,0,"button",35),I.Jc(6,Vc,2,0,"button",36),I.Tb()),2&e){const e=I.gc();I.Cb(2),I.nc("ngIf",0===(null==e.selectedTask?null:e.selectedTask.arguments.length)),I.Cb(1),I.nc("ngForOf",null==e.selectedTask?null:e.selectedTask.arguments),I.Cb(2),I.nc("ngIf",e.selectedTask&&!e.paramChecked),I.Cb(1),I.nc("ngIf",e.selectedTask&&e.paramChecked)}}function Ac(e,t){if(1&e&&(I.Ub(0,"mat-icon",43),I.Lc(1,"looks_3"),I.Tb(),I.Ub(2,"span"),I.Lc(3," Result information "),I.Tb()),2&e){const e=I.gc();I.Fb("text-primary",2==e.currentStep),I.Cb(2),I.Fb("text-primary",2==e.currentStep)}}function zc(e,t){if(1&e&&(I.Ub(0,"mat-hint",101),I.Lc(1),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.Mc(e.viewControls.errorName)}}function Hc(e,t){if(1&e&&(I.Ub(0,"mat-hint",101),I.Lc(1),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.Mc(e.viewControls.errorDesc)}}function Yc(e,t){1&e&&(I.Ub(0,"div",122),I.Ub(1,"div",97),I.Ub(2,"h2"),I.Lc(3,"Setting output information"),I.Tb(),I.Tb(),I.Tb())}function Kc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(2).index,t=I.gc();I.Cb(1),I.Nc("*",null==t.viewControls.errorOutputs[e]?null:t.viewControls.errorOutputs[e].name,"")}}function Wc(e,t){if(1&e&&(I.Ub(0,"span",101),I.Lc(1),I.Tb()),2&e){const e=I.gc(2).index,t=I.gc();I.Cb(1),I.Nc("*",null==t.viewControls.errorOutputs[e]?null:t.viewControls.errorOutputs[e].desc,"")}}function Gc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",124),I.Ub(1,"div",97),I.Ub(2,"h3"),I.Ub(3,"b"),I.Lc(4),I.Tb(),I.Tb(),I.Ub(5,"span",99),I.Lc(6),I.Tb(),I.Pb(7,"br"),I.Tb(),I.Ub(8,"div",97),I.Ub(9,"mat-form-field",27),I.Ub(10,"input",125),I.cc("ngModelChange",(function(t){I.Bc(e);const c=I.gc().index;return I.gc().resultInfo.outputs[c].name=t})),I.Tb(),I.Ub(11,"span",29),I.Lc(12),I.Tb(),I.Ub(13,"span",30),I.Lc(14),I.Tb(),I.Tb(),I.Jc(15,Kc,2,1,"span",31),I.Tb(),I.Ub(16,"div",126),I.Ub(17,"mat-form-field",27),I.Ub(18,"textarea",127),I.cc("ngModelChange",(function(t){I.Bc(e);const c=I.gc().index;return I.gc().resultInfo.outputs[c].desc=t})),I.Lc(19),I.Tb(),I.Tb(),I.Jc(20,Wc,2,1,"span",31),I.Pb(21,"br"),I.Tb(),I.Tb()}if(2&e){const e=I.gc(),t=e.index,c=e.$implicit,n=I.gc();I.Fb("hasError",(null==n.viewControls.errorOutputs[t]?null:n.viewControls.errorOutputs[t].name)||(null==n.viewControls.errorOutputs[t]?null:n.viewControls.errorOutputs[t].desc)),I.Cb(4),I.Mc(null==c?null:c.name),I.Cb(2),I.Nc("Output description: ",null==c?null:c.desc,""),I.Cb(4),I.nc("disabled",n.resultInfoChecked)("placeholder","The output name for"+c.name)("ngModel",n.resultInfo.outputs[t].name),I.Cb(2),I.Mc(n.resultInfo.prefix),I.Cb(2),I.Mc(n.resultInfo.suffix),I.Cb(1),I.nc("ngIf",null==n.viewControls.errorOutputs[t]?null:n.viewControls.errorOutputs[t].name),I.Cb(3),I.nc("disabled",n.resultInfoChecked)("ngModel",n.resultInfo.outputs[t].desc),I.Cb(1),I.Mc(n.resultInfo.outputs[t].desc),I.Cb(1),I.nc("ngIf",null==n.viewControls.errorOutputs[t]?null:n.viewControls.errorOutputs[t].desc)}}function Qc(e,t){if(1&e&&I.Jc(0,Gc,22,14,"div",123),2&e){const e=t.$implicit;I.nc("ngIf","outFile"==(null==e?null:e.type))}}function Xc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",86),I.cc("click",(function(){return I.Bc(e),I.gc().checkResultInfo()})),I.Lc(1,"Set the result information"),I.Tb()}}function Zc(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",121),I.cc("click",(function(){return I.Bc(e),I.gc().resultInfoChecked=!1})),I.Lc(1,"Modify info "),I.Tb()}}function en(e,t){if(1&e&&(I.Ub(0,"mat-icon",43),I.Lc(1,"looks_4"),I.Tb(),I.Ub(2,"span"),I.Lc(3," Confirm and submit "),I.Tb()),2&e){const e=I.gc();I.Fb("text-primary",3===e.currentStep),I.Cb(2),I.Fb("text-primary",3===e.currentStep)}}function tn(e,t){if(1&e&&I.Pb(0,"bdp-result-describer",128),2&e){const e=I.gc();I.nc("currentTask",e.selectedTask)("currentProject",e.currentProject)("resultInfo",e.resultInfo)("selectedInputs",e._selectedInputs)("validInputs",e.validInputs)}}function cn(e,t){1&e&&(I.Ub(0,"span"),I.Lc(1,"Save and Run"),I.Tb())}function nn(e,t){1&e&&(I.Ub(0,"span"),I.Pb(1,"i",129),I.Lc(2," Submitting ... "),I.Tb())}const rn=function(){return["/home"]},sn=function(){return["/project/list"]};let an=(()=>{class e{constructor(e,t,c,n,i,r,s,a){this.router=e,this.route=t,this.projectService=c,this.systemService=n,this.userService=i,this.dataService=r,this.taskService=s,this.dialogRef=a,this.currentStep=0,this.paramChecked=!1,this.resultInfoChecked=!1,this.taskViewType="all",this.showWorkflow=!1,this.showIntermediateFile=!1}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.projectID=this.route.snapshot.params.pid,this._subs=[],this.taskList={},this.allTasksInPkg={},this.taskListView={},this.taskKey2name={},this.taskKeys=[],this.validInputs=[],this.inputDataPreview=[],this._selectedInputs=[],this._selectedDataFiles=[],this._valueOfListData=[],this._loadedDataFile={},this.loadedTasks={},this.selectedTask=void 0,this.resultInfo={name:"",desc:"",prefix:"",suffix:"",outputs:[]},this.viewControls={isLoadingInputs:!1,isSubmitted:!1,isSubmitting:!1,isError:!1,errorInputs:[],errorOutputs:[],errorName:!1,errorDesc:!1,workflowErrors:[]},this._subs.push(this.projectService.currentProject$.subscribe(e=>{if(this.currentProject=e,e){this.currentProject.privilege.canRun||this.router.navigate(["/project",this.currentProject.id,"info"]);const t=e.packages;t.length>0?this.taskService.loadTasks(t.map(e=>e.id)):this.taskService.loadTasks()}})),this._subs.push(this.systemService.sysInfo$.subscribe(e=>this.sysConfig=e)),this._subs.push(this.userService.currentUser$.subscribe(e=>this.currentUser=e)),this._subs.push(this.taskService.taskList$.subscribe(e=>{if(e&&e.length>=0){this.taskList={},this.allTasksInPkg={},this.tasks=e;for(const t of e){const e=t.package.sheetID+t.package.fullname;this.taskKey2name[e]=`${t.package.fullname} from `+(t.package.sheetName||"Internal Package List"),this.taskList[e]||(this.taskList[e]=[]),this.allTasksInPkg[t.id]=t,this.taskList[e].push(t)}this.taskKeys=this.currentProject&&Array.isArray(this.currentProject.packages)?this.currentProject.packages.map(e=>e.sheetID+e.fullname):Object.keys(this.taskKey2name),this.changeTaskViewFilter(this.taskViewType);for(const e of this.taskKeys)this.taskList[e]=Object(q.a)(this.taskList[e],[e=>e.package.fullname,e=>e.name],["asc","asc"])}})),this._subs.push(this.taskService.taskValidInputs$.subscribe(e=>this.onValidInputChanged(e))),this._subs.push(this.dataService.incomingData$.subscribe(e=>{if("colnames"===e.viewType||"rownames"===e.viewType||"table"===e.viewType){const t=e.id+e.viewType+e.isPreview;this._loadedDataFile[t]||(this._loadedDataFile[t]={}),this._loadedDataFile[t]=e.data}})),this.projectService.setCurrentProject(this.projectID)}get outputNumber(){return this.selectedTask?this.selectedTask.arguments.filter(e=>"outFile"===e.type).length:0}changeTaskViewFilter(e){e=e||"all";for(const t of this.taskKeys)this.taskListView[t]=Object(q.a)(Array.isArray(this.taskList[t])?this.taskList[t].filter(t=>"all"===e||t.type===e):[],[e=>e.name],["asc"]);this.taskViewType=e}getTaskByMap(e){const t=this.taskService.getTaskByMap(e).subscribe(c=>{t.unsubscribe(),console.log("XDD"),c.isError&&this.viewControls.workflowErrors.push(`This task requires the task key ${e.key} of package ${e.pkg}.`);const n=c.success;this.loadedTasks[n.package.id]||(this.loadedTasks[n.package.id]={}),this.loadedTasks[n.package.id][n.id]=n,e.id=n.id,e.key=n.key,e.ver=n.package.version,e.pkg=n.package.name,e.pkgid=n.package.id})}onSelectTask(e){if((!this.selectedTask||this.selectedTask.id!==e.id)&&(this.selectedTask=e,this._selectedInputs.length=0,this._selectedDataFiles.length=0,this.timeStamp=at().format("YYYYMMDD.HHmmss.SSS"),this.resultInfo.name="Result from "+e.name,this.resultInfo.desc="",this.resultInfo.outputs.length=0,this.resultInfoChecked=!1,this.paramChecked=!1,this.currentProject)){if(this.viewControls.isLoadingInputs=!0,e&&"workflow"===e.type){const t=e.mapper;this.viewControls.workflowErrors=[];for(let c=0;c<t.length;c++)for(let n=0;n<t[c].length;n++){const i=t[c][n];i.pkgid&&i.pkgid!==e.package.id&&this.getTaskByMap(i)}}this.taskService.getValidInputFile(e.id,this.currentProject.id);for(let e=0;e<this.selectedTask.arguments.length;e++){const t=this.selectedTask.arguments[e];"list"===t.type?this._selectedInputs[e]=t.default&&void 0!==t.default[0]?t.multiple?t.default:t.default[0]:[]:"value"===t.type?this._selectedInputs[e]=t.default&&void 0!==t.default[0]?t.default[0]:void 0:"outFile"===t.type&&(this.resultInfo.outputs[e]={name:t.name,desc:""})}}}onTaskReloadBtnClick(){this.currentProject&&this.currentProject.packages&&this.taskService.loadTasks(this.currentProject.packages.map(e=>e.id))}onTaskBlur(e){e.stopPropagation(),this.viewControls.workflowErrors=[],this.selectedTask=void 0,this.paramChecked=!1,this.resultInfoChecked=!1,this.currentStep=0}onGetList(e,t){if(this.paramChecked)return;const c=this.selectedTask.arguments[t];if(this._selectedInputs[t]=void 0,this.viewControls.errorInputs=[],"list"===c.type){const e=c.dependOn.split(".");if("argv"===e[0]){let n;const i=this._selectedInputs[+e[1]];for(const e in i)if(i[e]){n=e;break}if(n){const e=c.listType.split(".");"table"===e[0]&&this.dataService.getData(n,e[1],c.preview),this._valueOfListData[t]=n+e[1]+c.preview}else this.viewControls.errorInputs[+e[1]]="Please set this input first."}}}onListSaved(e,t){this._selectedInputs[t]=e.selectedList,this.viewControls.errorInputs=[]}onFocusedDataFile(e,t,c){if(!this.paramChecked){for(const c in this._selectedInputs[t])this._selectedInputs[t][c]=c===e.id&&!this._selectedInputs[t][c];this._selectedDataFiles[t]=Object.values(this._selectedInputs[t]).filter(e=>e).length>0,this.viewControls.errorInputs=[];for(let e=0;e<this.selectedTask.arguments.length;e++){const c=this.selectedTask.arguments[e];"list"===c.type&&c.dependOn==="argv."+t&&(this._selectedInputs[e]=void 0,this._valueOfListData[e]=void 0)}}}onValidInputChanged(e){this.viewControls.isLoadingInputs=!1,this.validInputs.length=0,this.viewControls.errorInputs=[];for(let t=0;t<e.length;t++){const c=e[t];this.validInputs[c.index]=c.models,this._selectedInputs[c.index]||(this._selectedInputs[c.index]={});const n=Object.keys(this._selectedInputs[c.index]),i=c.models.map(e=>e.id);for(let e=0;e<n.length;e++){const t=n[e];i.indexOf(t)<0&&delete this._selectedInputs[c.index][t]}for(let e=0;e<c.models.length;e++)this._selectedInputs[c.index][c.models[e].id]=!!this._selectedInputs[c.index][c.models[e].id]}}loadValidSubset(e){}trackByDataFile(e,t){return t.id}checkParams(){let e=!1;this.viewControls.errorInputs=[];const t=[];this.paramChecked=!1;for(let c=0;c<this.selectedTask.arguments.length;c++){const n=this.selectedTask.arguments[c];if("outFile"!==n.type){if("inFile"===n.type)for(const e in this._selectedInputs[c])this._selectedInputs[c][e]&&(t[c]=e);else"value"===n.type?"number"===n.format&&isNaN(parseFloat(this._selectedInputs[c]))?this.viewControls.errorInputs[c]="Only numbers are accepted.":t[c]=this._selectedInputs[c]:"list"===n.type?this._selectedInputs[c]&&(t[c]=this._selectedInputs[c],Array.isArray(t[c])||(t[c]=[t[c]])):"static"===n.type&&(n.default[0]||(n.default[0]=" "),t[c]=n.default[0]);void 0!==this.viewControls.errorInputs[c]?e=!0:n.optional||t[c]&&0!==t[c].length||(e=!0,this.viewControls.errorInputs[c]="Please set this argument")}}e?(this.paramChecked=!1,this.currentStep=1):(this.paramChecked=!0,this.currentStep=2)}onTimeStampChange(e){console.log(e.checked),this.resultInfo.prefix=e.checked?"["+this.timeStamp+"] ":""}checkResultInfo(){let e=!1;this.resultInfo.prefix=this.resultInfo.prefix.replace(/^\ +/,"").replace(/\ +$/," "),this.resultInfo.suffix=this.resultInfo.suffix.replace(/^\ +/," ").replace(/\ +$/,""),this.resultInfo.prefix.length>36?(this.viewControls.errorName="The length of the prefix should be less than or equal to 36 characters.",e=!0):this.resultInfo.suffix.length>36?(this.viewControls.errorName="The length of the suffix should be less than or equal to 36 characters.",e=!0):this.viewControls.errorName=!1,this.resultInfo.desc.length>500?(this.viewControls.errorDesc="The max length of the description is 500 characters.",e=!0):this.viewControls.errorDesc=!1,e||(this.resultInfoChecked=!0,this.currentStep=4)}handleCorrectCaptcha(e){this.recaptchaResponse=e}performTask(){const e=[],t=[];let c=!1;this.viewControls.errorInputs=[],this.resultInfo.name.length>160?(this.viewControls.errorName="The length of the name should be less than or equal to 160 characters.",c=!0):this.viewControls.errorName=!1,this.resultInfo.desc.length>500?(this.viewControls.errorDesc="The max length of the description is 500 characters.",c=!0):this.viewControls.errorDesc=!1;for(let n=0;n<this.selectedTask.arguments.length;n++){const i=this.selectedTask.arguments[n];if("outFile"!==i.type){if("inFile"===i.type)for(const t in this._selectedInputs[n])this._selectedInputs[n][t]&&(e[n]=t);else"value"===i.type?"number"===i.format&&isNaN(parseFloat(this._selectedInputs[n]))?this.viewControls.errorInputs[n]="Only numbers are accepted.":e[n]=this._selectedInputs[n]:"list"===i.type?this._selectedInputs[n]&&(e[n]=this._selectedInputs[n],Array.isArray(e[n])||(e[n]=[e[n]])):"static"===i.type&&(i.default[0]||(i.default[0]=" "),e[n]=i.default[0]);void 0!==this.viewControls.errorInputs[n]?c=!0:i.optional||e[n]&&0!==e[n].length||(c=!0,this.viewControls.errorInputs[n]="Please set this input")}else{const e={name:void 0,desc:void 0};this.resultInfo.outputs[n].name.length>160&&(e.name="The name length exceeds 160 characters. Please shorten the name."),this.resultInfo.outputs[n].desc.length>500&&(e.desc="The description exceeds 500 characters. Please shorten the description."),e.name||e.desc?(this.viewControls.errorOutputs[n]=e,c=!0):t[n]={name:this.resultInfo.outputs[n].name,desc:this.resultInfo.outputs[n].desc}}}if(c)window.location.hash="settingParameters";else{const c=t.filter(e=>e),n={run:!0,projectID:this.currentProject.id,inputs:e,outputs:c,name:this.resultInfo.name,desc:this.resultInfo.desc,prefix:this.resultInfo.prefix,suffix:this.resultInfo.suffix};this.viewControls.isSubmitting=!0,this.projectService.createResult(this.selectedTask.id,n).subscribe(e=>{if(!e.isError){const t=e.success;setTimeout(()=>{this.router.navigate(["/result",t.id,"info"])},100)}})}}reset(){console.log("reset"),this.viewControls.isSubmitted=!1,this.viewControls.isSubmitting=!1,this.viewControls.isError=!1,this.selectedTask=void 0}hasTag(e,t,c){let n=0;for(let r=0;r<e.length;r++)for(let c=0;c<t.length;c++)e[r]===t[c]&&n++;let i=!1;return("any"===c&&n>0||"all"===c&&n===e.length)&&(i=!0),i}uploadFileForArg(e){this.dialogRef.open(Re.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{title:`Importing file(s) for the argument <u>${e.name}</u> of the task <u>${this.selectedTask.name}</u>.`,allowedFormats:[e.format],project:this.currentProject,sysConfig:this.sysConfig,tasks:this.tasks,importType:"Folder"===e.format?"folder":"local",currentUser:this.currentUser,tags:e.tags}}).afterClosed().subscribe(()=>{this.taskService.getValidInputFile(this.selectedTask.id,this.currentProject.id)})}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(P.c),I.Ob(P.a),I.Ob(B.a),I.Ob(V.a),I.Ob(E.a),I.Ob(ot.a),I.Ob($.a),I.Ob(w.b))},e.\u0275cmp=I.Ib({type:e,selectors:[["result-create"]],decls:93,vars:42,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"container-fluid"],["animationDuration","150ms",3,"dynamicHeight","selectedIndex","selectedIndexChange"],["mat-tab-label",""],[1,"p-1"],["class","row",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[3,"disabled"],[1,"row"],[1,"col-12"],["mat-raised-button","",3,"click"],[4,"ngIf"],["class","col-12",4,"ngIf"],[1,"ml-5"],[3,"disabled","change"],["useTimeStamp",""],[1,"ml-3"],["matInput","","placeholder","Prefix",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","Suffix",3,"disabled","ngModel","ngModelChange"],[1,"col-md-2"],[1,"col-md-10"],[2,"width","100%"],["matInput","","type","text","maxlength","160","size","160",3,"disabled","ngModel","placeholder","ngModelChange"],["matPrefix",""],["matSuffix",""],["class","text-danger",4,"ngIf"],["matInput","","maxlength","500","rows","4","placeholder","(Optional) Give some descriptions about this result",3,"disabled","ngModel","ngModelChange"],["class","row mt-3",4,"ngIf"],["ngFor","",3,"ngForOf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[3,"currentTask","currentProject","resultInfo","selectedInputs","validInputs",4,"ngIf"],["resultOK",""],["mat-raised-button","","color","accent","role","button",1,"btn","btn-primary",3,"disabled","click"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"mr-2"],["name","fontStyle","aria-label","Font Style",3,"ngModel","ngModelChange"],["value","all"],["value","standard"],[1,"fas","fa-cog","fa-fx"],["value","workflow"],[1,"fas","fa-cogs","fa-fx"],["value","system"],[1,"fas","fa-server","fa-fx"],[3,"click"],[1,"fas","fa-sync-alt","fa-fx"],["class","col-12 text-primary","style","font-size: 36px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12","my-2"],[1,"col-12","text-primary",2,"font-size","36px"],[1,"fas","fa-cube","fa-fw","mr-2"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"d-flex","flex-column",3,"click"],["mat-card-avatar","",3,"src",4,"ngIf"],["class","fas fa-cogs fa-lg fa-fw",4,"ngIf"],["class","fas fa-cog fa-lg fa-fw",4,"ngIf"],["class","fas fa-puzzle-piece fa-lg fa-fw",4,"ngIf"],["class","fas fa-server fa-lg fa-fw",4,"ngIf"],[1,"fas","fa-cube","mr-2"],["style","min-height: 300px; display: flex; justify-content: center; flex-direction: column;",4,"ngIf"],["style","height: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;","class","px-5",3,"innerHTML",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["role","list",4,"ngIf"],["style","width: 100%;",3,"taskMapper","additionalTasks","childTasks","taskArgs",4,"ngIf"],["mat-card-avatar","",3,"src"],[1,"fas","fa-cogs","fa-lg","fa-fw"],[1,"fas","fa-cog","fa-lg","fa-fw"],[1,"fas","fa-puzzle-piece","fa-lg","fa-fw"],[1,"fas","fa-server","fa-lg","fa-fw"],[2,"min-height","300px","display","flex","justify-content","center","flex-direction","column"],["mat-card-image","",1,"align-self-center",2,"max-height","300px","max-width","400px",3,"src"],[1,"px-5",2,"height","100px","white-space","nowrap","overflow","hidden","text-overflow","ellipsis",3,"innerHTML"],[3,"innerHTML"],["style","font-size: 14px;",4,"ngIf"],[2,"font-size","14px"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"fas","fa-project-diagram"],["mat-raised-button","","color","primary",3,"disabled","click"],["role","list"],["role","listitem","class","text-danger",4,"ngFor","ngForOf"],["role","listitem",1,"text-danger"],[2,"width","100%",3,"taskMapper","additionalTasks","childTasks","taskArgs"],[1,"my-4"],[1,"row","pb-2","mb-4",3,"ngSwitch"],["class","col-md-12",4,"ngIf"],[3,"ngSwitchCase"],[1,"col-md-12"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["matInput","","type","text",3,"disabled","placeholder","ngModel","ngModelChange"],[1,"text-danger"],["mat-icon-button","",3,"click"],[1,"fas","fa-upload","fa-fw","fa-lg"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"badge","badge-primary","m-1"],["class","col-xl-4 col-lg-6 my-2",3,"role","checked","disabled","dataFile","onFocused",4,"ngIf"],[1,"col-xl-4","col-lg-6","my-2",3,"role","checked","disabled","dataFile","onFocused"],[3,"ngModel","multiple","disabled","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","col-12 p-2 m-2","style","padding:0px 10px;",4,"ngIf"],[1,"col-12","p-2","m-2",2,"padding","0px 10px"],["mat-button","","color","primary",1,"mb-3",2,"cursor","pointer",3,"click"],[1,"fa","fa-table"],[1,"fa","fa-caret-down","ml-2"],[1,"input-group"],["type","text","placeholder","No data selected.","readonly","",1,"form-control",3,"disabled","value"],[3,"hidden"],["style","width: 100%;","placeholder","Click to select the data","size","8",3,"multiple","ngModel","disabled","ngModelChange",4,"ngIf"],["placeholder","Click to select the data","size","8",2,"width","100%",3,"multiple","ngModel","disabled","ngModelChange"],["mat-raised-button","","color","warn",3,"click"],[1,"row","mt-3"],["class","row my-2",3,"hasError",4,"ngIf"],[1,"row","my-2"],["matInput","","type","text","maxlength","160","size","160",3,"disabled","placeholder","ngModel","ngModelChange"],[1,"col-md-12","mb-5"],["matInput","","maxlength","500","rows","4","placeholder","(Optional) Give some descriptions about this output.",3,"disabled","ngModel","ngModelChange"],[3,"currentTask","currentProject","resultInfo","selectedInputs","validInputs"],[1,"fas","fa-circle-o-notch","fa-spin","fa-lg","fa-fw","mr-3"]],template:function(e,t){if(1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",1),I.Ub(5,"a",2),I.Lc(6,"Project List"),I.Tb(),I.Tb(),I.Jc(7,Ft,4,4,"li",3),I.Jc(8,Mt,2,0,"li",3),I.Jc(9,_t,5,6,"li",4),I.Jc(10,Rt,2,0,"li",4),I.Tb(),I.Ub(11,"div",5),I.Ub(12,"h4",6),I.Lc(13,"Let's perform a task"),I.Tb(),I.Pb(14,"br"),I.Pb(15,"br"),I.Ub(16,"div",7),I.Ub(17,"mat-tab-group",8),I.cc("selectedIndexChange",(function(e){return t.currentStep=e})),I.Ub(18,"mat-tab"),I.Jc(19,Nt,4,4,"ng-template",9),I.Ub(20,"div",10),I.Ub(21,"h2"),I.Lc(22,"Step 1. Choose a task"),I.Tb(),I.Jc(23,Dt,13,1,"div",11),I.Jc(24,oc,4,2,"div",12),I.Tb(),I.Tb(),I.Ub(25,"mat-tab",13),I.Jc(26,bc,4,4,"ng-template",9),I.Ub(27,"h2"),I.Lc(28,"2. Set parameters"),I.Tb(),I.Jc(29,lc,9,2,"div",11),I.Ub(30,"div",14),I.Ub(31,"div",15),I.Ub(32,"button",16),I.cc("click",(function(){return t.showIntermediateFile=!t.showIntermediateFile})),I.Lc(33,"Toggle intermediate output files"),I.Tb(),I.Tb(),I.Tb(),I.Ub(34,"div",14),I.Jc(35,uc,2,0,"div",17),I.Jc(36,Ec,7,4,"div",18),I.Tb(),I.Tb(),I.Ub(37,"mat-tab",13),I.Jc(38,Ac,4,4,"ng-template",9),I.Ub(39,"h2"),I.Lc(40,"Step 3. Set result information"),I.Tb(),I.Pb(41,"br"),I.Ub(42,"div",14),I.Ub(43,"div",15),I.Ub(44,"h3"),I.Lc(45,"Result prefix/suffix:"),I.Tb(),I.Ub(46,"div",19),I.Ub(47,"mat-checkbox",20,21),I.cc("change",(function(e){return t.onTimeStampChange(e)})),I.Lc(49,"Time stamp"),I.Tb(),I.Ub(50,"mat-form-field",22),I.Ub(51,"input",23),I.cc("ngModelChange",(function(e){return t.resultInfo.prefix=e})),I.Tb(),I.Tb(),I.Ub(52,"mat-form-field",22),I.Ub(53,"input",24),I.cc("ngModelChange",(function(e){return t.resultInfo.suffix=e})),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Ub(54,"div",14),I.Ub(55,"div",25),I.Ub(56,"h3"),I.Lc(57,"Name"),I.Tb(),I.Tb(),I.Ub(58,"div",26),I.Ub(59,"mat-form-field",27),I.Ub(60,"input",28),I.cc("ngModelChange",(function(e){return t.resultInfo.name=e})),I.Tb(),I.Ub(61,"span",29),I.Lc(62),I.Tb(),I.Ub(63,"span",30),I.Lc(64),I.Tb(),I.Jc(65,zc,2,1,"mat-hint",31),I.Tb(),I.Tb(),I.Tb(),I.Ub(66,"div",14),I.Ub(67,"div",25),I.Ub(68,"h3"),I.Lc(69,"Description"),I.Tb(),I.Tb(),I.Ub(70,"div",26),I.Ub(71,"mat-form-field",27),I.Ub(72,"textarea",32),I.cc("ngModelChange",(function(e){return t.resultInfo.desc=e})),I.Lc(73),I.Tb(),I.Jc(74,Hc,2,1,"mat-hint",31),I.Tb(),I.Tb(),I.Tb(),I.Jc(75,Yc,4,0,"div",33),I.Jc(76,Qc,1,1,"ng-template",34),I.Jc(77,Xc,2,0,"button",35),I.Jc(78,Zc,2,0,"button",36),I.Tb(),I.Ub(79,"mat-tab",13),I.Jc(80,en,4,4,"ng-template",9),I.Ub(81,"h2"),I.Lc(82,"Step 4. Confirm and submit"),I.Tb(),I.Jc(83,tn,1,5,"bdp-result-describer",37),I.Pb(84,"hr"),I.Pb(85,"br"),I.Ub(86,"mat-checkbox",null,38),I.Lc(88,"I have checked my result settings."),I.Tb(),I.Pb(89,"br"),I.Ub(90,"button",39),I.cc("click",(function(){return t.performTask()})),I.Jc(91,cn,2,0,"span",17),I.Jc(92,nn,3,0,"span",17),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.yc(48),c=I.yc(87);I.Cb(2),I.nc("routerLink",I.qc(40,rn)),I.Cb(3),I.nc("routerLink",I.qc(41,sn)),I.Cb(2),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",!t.currentProject),I.Cb(1),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",!t.currentProject),I.Cb(7),I.nc("dynamicHeight",!0)("selectedIndex",t.currentStep),I.Cb(6),I.nc("ngIf",!t.selectedTask),I.Cb(1),I.nc("ngForOf",t.taskKeys),I.Cb(1),I.nc("disabled",!t.selectedTask),I.Cb(4),I.nc("ngIf",t.selectedTask),I.Cb(6),I.nc("ngIf",t.viewControls.isLoadingInputs),I.Cb(1),I.nc("ngIf",!t.viewControls.isLoadingInputs),I.Cb(1),I.nc("disabled",!t.selectedTask||!t.paramChecked),I.Cb(10),I.nc("disabled",t.resultInfoChecked),I.Cb(4),I.nc("disabled",t.resultInfoChecked)("ngModel",t.resultInfo.prefix)("disabled",e.checked),I.Cb(2),I.nc("disabled",t.resultInfoChecked)("ngModel",t.resultInfo.suffix),I.Cb(7),I.pc("placeholder","Result of ",null==t.selectedTask?null:t.selectedTask.name,""),I.nc("disabled",t.resultInfoChecked)("ngModel",t.resultInfo.name),I.Cb(2),I.Mc(t.resultInfo.prefix),I.Cb(2),I.Mc(t.resultInfo.suffix),I.Cb(1),I.nc("ngIf",t.viewControls.errorName),I.Cb(7),I.nc("disabled",t.resultInfoChecked)("ngModel",t.resultInfo.desc),I.Cb(1),I.Mc(t.resultInfo.desc),I.Cb(1),I.nc("ngIf",t.viewControls.errorDesc),I.Cb(1),I.nc("ngIf",t.outputNumber>0),I.Cb(1),I.nc("ngForOf",null==t.selectedTask?null:t.selectedTask.arguments),I.Cb(1),I.nc("ngIf",t.selectedTask&&!t.resultInfoChecked),I.Cb(1),I.nc("ngIf",t.selectedTask&&t.resultInfoChecked),I.Cb(1),I.nc("disabled",!t.selectedTask||!t.paramChecked||!t.resultInfoChecked),I.Cb(4),I.nc("ngIf",t.paramChecked&&t.resultInfoChecked),I.Cb(7),I.nc("disabled",!c.checked||t.viewControls.isSubmitting),I.Cb(1),I.nc("ngIf",!t.viewControls.isSubmitting),I.Cb(1),I.nc("ngIf",t.viewControls.isSubmitting)}},directives:[P.f,n.n,m.c,m.a,m.d,n.m,s.b,b.a,L.b,g.a,i.b,i.i,i.l,i.e,L.f,L.g,d.a,a.b,a.a,T.a,n.l,o.a,o.f,o.j,o.i,o.d,o.b,o.c,o.g,C.a,C.c,bt.a,n.p,n.q,L.e,lt.a,p.a,j.k,xt],pipes:[n.v],styles:["fieldset[_ngcontent-%COMP%]{border:1px solid grey;padding:10px 15px}legend[_ngcontent-%COMP%]{width:auto;margin-bottom:0}.hasError[_ngcontent-%COMP%]{border:1px solid red;background-color:rgba(231,195,195,.3)}.link[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,255,.1)}.mat-tab-label[_ngcontent-%COMP%]{opacity:1!important}"]}),e})();var on=c("eIep");function bn(e,t){1&e&&(I.Ub(0,"h3",12),I.Lc(1,"My projects"),I.Tb())}function ln(e,t){1&e&&(I.Ub(0,"h3",12),I.Lc(1,"Projects that shared with me"),I.Tb())}function un(e,t){1&e&&(I.Ub(0,"h3",12),I.Lc(1,"Public projects"),I.Tb())}function dn(e,t){1&e&&(I.Ub(0,"h1"),I.Lc(1,"One more step to proceed."),I.Tb())}function gn(e,t){1&e&&(I.Ub(0,"p"),I.Lc(1,"Please wait the administrator to unlock your privileges."),I.Tb())}function fn(e,t){1&e&&(I.Ub(0,"h1"),I.Lc(1,"This account has been locked. Please inform the administrator to unlock your account."),I.Tb())}const pn=function(){return["/account/profile"]};function hn(e,t){1&e&&(I.Ub(0,"p"),I.Pb(1,"br"),I.Lc(2,"Sorry for the inconvinience, but this site aims for a private group to use. "),I.Pb(3,"br"),I.Lc(4,"Every user needs the admin's approval to use the resources. "),I.Pb(5,"br"),I.Ub(6,"b"),I.Lc(7,"You might want to "),I.Ub(8,"a",2),I.Lc(9,"specify your account name"),I.Tb(),I.Lc(10," to allow the administrator to recognize you."),I.Tb(),I.Tb()),2&e&&(I.Cb(8),I.nc("routerLink",I.qc(1,pn)))}function mn(e,t){if(1&e&&(I.Ub(0,"div"),I.Ub(1,"div",13),I.Jc(2,dn,2,0,"h1",9),I.Jc(3,gn,2,0,"p",9),I.Jc(4,fn,2,0,"h1",9),I.Jc(5,hn,11,2,"p",9),I.Ub(6,"p"),I.Ub(7,"button",14),I.Lc(8,"Learn more"),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(2),I.nc("ngIf",e.currentUser&&!e.currentUser.auths.bdp),I.Cb(1),I.nc("ngIf",e.currentUser&&!e.currentUser.auths.bdp),I.Cb(1),I.nc("ngIf",e.currentUser&&1===e.currentUser.auths.bdp),I.Cb(1),I.nc("ngIf",e.currentUser&&!e.currentUser.auths.bdp)}}function Tn(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",27),I.Ub(1,"h1",28),I.Lc(2,"Welcome to Big Data Processor!"),I.Tb(),I.Ub(3,"p",29),I.Lc(4,"You haven't created any project."),I.Tb(),I.Pb(5,"hr",30),I.Ub(6,"p"),I.Lc(7,"Try to create a project first."),I.Tb(),I.Ub(8,"button",31),I.cc("click",(function(){return I.Bc(e),I.gc(3).onNewProject()})),I.Lc(9," Create a project "),I.Tb(),I.Tb()}}const Cn=function(){return["/project/list"]},vn=function(){return{listType:"myProjects"}},Un=function(){return{listType:"publicProjects"}};function kn(e,t){1&e&&(I.Ub(0,"div",27),I.Ub(1,"h1",32),I.Lc(2,"You have no shared projects."),I.Tb(),I.Ub(3,"p",29),I.Lc(4,"Other users can share their projects with you."),I.Tb(),I.Pb(5,"hr",30),I.Ub(6,"button",33),I.Lc(7," View your own projects "),I.Tb(),I.Ub(8,"button",34),I.Lc(9," View public projects "),I.Tb(),I.Tb()),2&e&&(I.Cb(6),I.nc("routerLink",I.qc(4,Cn))("queryParams",I.qc(5,vn)),I.Cb(2),I.nc("routerLink",I.qc(6,Cn))("queryParams",I.qc(7,Un)))}const Pn=function(){return{listType:"sharedProjects"}};function wn(e,t){1&e&&(I.Ub(0,"div",27),I.Ub(1,"h1",32),I.Lc(2,"No public projects."),I.Tb(),I.Ub(3,"p",29),I.Lc(4,"Public projects can be viewed by registered users."),I.Tb(),I.Pb(5,"hr",30),I.Ub(6,"p"),I.Lc(7,"Registered users can specify their projects as public."),I.Tb(),I.Ub(8,"button",33),I.Lc(9," View your own projects "),I.Tb(),I.Ub(10,"button",34),I.Lc(11," View shared projects "),I.Tb(),I.Tb()),2&e&&(I.Cb(8),I.nc("routerLink",I.qc(4,Cn))("queryParams",I.qc(5,vn)),I.Cb(2),I.nc("routerLink",I.qc(6,Cn))("queryParams",I.qc(7,Pn)))}function In(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",35),I.cc("click",(function(){I.Bc(e);const c=t.$implicit;return I.gc(3).onProjectInfo(c)})),I.Ub(1,"span",36),I.Lc(2),I.Tb(),I.Pb(3,"br"),I.Ub(4,"h2",37),I.Lc(5),I.Tb(),I.Pb(6,"br"),I.Ub(7,"p",38),I.Lc(8),I.Tb(),I.Ub(9,"div"),I.Ub(10,"span",39),I.Lc(11),I.Tb(),I.Ub(12,"div",40),I.Ub(13,"span",41),I.Lc(14),I.Tb(),I.Pb(15,"br"),I.Ub(16,"span",41),I.Pb(17,"i",42),I.Lc(18),I.Tb(),I.Tb(),I.Tb(),I.Tb()}if(2&e){const e=t.$implicit;I.Cb(2),I.Mc(null==e?null:e.id),I.Cb(3),I.Mc(null==e?null:e.name),I.Cb(3),I.Nc(" ",null==e?null:e.desc," "),I.Cb(3),I.Nc("Updated at ",null==e||null==e.updatedAt?null:e.updatedAt.calendar(),""),I.Cb(3),I.Nc("Owner: ",(null==e||null==e.owner?null:e.owner.name)||"unknown",""),I.Cb(4),I.Mc(null==e||null==e.packages[0]?null:e.packages[0].fullname)}}const Ln=function(){return[2,5,10,30,50,100,300,500]},jn=function(){return[10,30,50,100,300,500]};function yn(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div"),I.Ub(1,"mat-paginator",22),I.cc("page",(function(t){return I.Bc(e),I.gc(2).onPageChange(t)})),I.Tb(),I.Jc(2,Tn,10,0,"div",23),I.Jc(3,kn,10,8,"div",23),I.Jc(4,wn,12,8,"div",23),I.Ub(5,"div",24),I.cc("click",(function(){return I.Bc(e),I.gc(2).onNewProject()})),I.Pb(6,"i",25),I.Lc(7,"Create a new project "),I.Tb(),I.Jc(8,In,19,6,"div",26),I.Ub(9,"mat-paginator",22),I.cc("page",(function(t){return I.Bc(e),I.gc(2).onPageChange(t)})),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2);I.Cb(1),I.nc("length",e.totalCount)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",I.qc(12,Ln)),I.Cb(1),I.nc("ngIf","myProjects"===e.listType&&e.projects&&0===e.projects.length),I.Cb(1),I.nc("ngIf","sharedProjects"===e.listType&&e.projects&&0===e.projects.length),I.Cb(1),I.nc("ngIf","publicProjects"===e.listType&&e.projects&&0===e.projects.length),I.Cb(4),I.nc("ngForOf",e.projects),I.Cb(1),I.nc("length",e.totalCount)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",I.qc(13,jn))}}function xn(e,t){if(1&e&&(I.Ub(0,"div",15),I.Ub(1,"div",16),I.Ub(2,"nav",17),I.Ub(3,"a",18),I.Pb(4,"i",19),I.Lc(5,"My Projects "),I.Tb(),I.Ub(6,"a",18),I.Pb(7,"i",20),I.Lc(8,"Shared "),I.Tb(),I.Ub(9,"a",18),I.Pb(10,"i",21),I.Lc(11,"Public "),I.Tb(),I.Tb(),I.Tb(),I.Ub(12,"div",16),I.Jc(13,yn,10,14,"div",9),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(3),I.Ic("background-color","myProjects"===e.listType?"#CCE5FE":"initial"),I.Fb("text-primary","myProjects"===e.listType),I.nc("routerLink",I.qc(22,Cn))("queryParams",I.qc(23,vn))("active","myProjects"===e.listType),I.Cb(3),I.Ic("background-color","sharedProjects"===e.listType?"#CCE5FE":"initial"),I.Fb("text-primary","sharedProjects"===e.listType),I.nc("routerLink",I.qc(24,Cn))("queryParams",I.qc(25,Pn))("active","sharedProjects"===e.listType),I.Cb(3),I.Ic("background-color","publicProjects"===e.listType?"#CCE5FE":"initial"),I.Fb("text-primary","publicProjects"===e.listType),I.nc("routerLink",I.qc(26,Cn))("queryParams",I.qc(27,Un))("active","publicProjects"===e.listType),I.Cb(4),I.nc("ngIf",e.projects&&e.currentUser&&e.currentUser.auths.bdp>=2)}}function Sn(e,t){1&e&&I.Pb(0,"i",55)}function Jn(e,t){1&e&&I.Pb(0,"i",56)}function Fn(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",43),I.Ub(1,"a",44),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.showRightButtonContent=!t.showRightButtonContent})),I.Jc(2,Sn,1,0,"i",45),I.Jc(3,Jn,1,0,"i",46),I.Ub(4,"span",47),I.Lc(5,"MENU"),I.Tb(),I.Ub(6,"span",48),I.Lc(7,"\u276f"),I.Tb(),I.Tb(),I.Pb(8,"br"),I.Ub(9,"a",49),I.Pb(10,"i",50),I.Ub(11,"span",51),I.Lc(12,"My projects"),I.Tb(),I.Ub(13,"span",48),I.Lc(14,"\u276f"),I.Tb(),I.Tb(),I.Pb(15,"br"),I.Ub(16,"a",49),I.Pb(17,"i",52),I.Ub(18,"span",51),I.Lc(19,"Shared with me"),I.Tb(),I.Ub(20,"span",48),I.Lc(21,"\u276f"),I.Tb(),I.Tb(),I.Pb(22,"br"),I.Ub(23,"a",49),I.Pb(24,"i",53),I.Ub(25,"span",51),I.Lc(26,"Public projects"),I.Tb(),I.Ub(27,"span",48),I.Lc(28,"\u276f"),I.Tb(),I.Tb(),I.Pb(29,"br"),I.Ub(30,"a",44),I.cc("click",(function(){return I.Bc(e),I.gc().onNewProject()})),I.Pb(31,"i",54),I.Ub(32,"span",51),I.Lc(33,"New project"),I.Tb(),I.Ub(34,"span",48),I.Lc(35,"\u276f"),I.Tb(),I.Tb(),I.Pb(36,"br"),I.Tb()}if(2&e){const e=I.gc();I.nc("@rightButtonState",e.showRightButtonContent?"active":"inactive"),I.Cb(2),I.nc("ngIf",e.showRightButtonContent),I.Cb(1),I.nc("ngIf",!e.showRightButtonContent),I.Cb(1),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.Fb("active","myProjects"===e.listType),I.nc("routerLink",I.qc(25,Cn))("queryParams",I.qc(26,vn)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.Fb("active","sharedProjects"===e.listType),I.nc("routerLink",I.qc(27,Cn))("queryParams",I.qc(28,Pn)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.Fb("active","publicProjects"===e.listType),I.nc("routerLink",I.qc(29,Cn))("queryParams",I.qc(30,Un)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(7),I.Fb("active",e.showRightButtonContent)}}const Mn=function(){return["/home"]};let On=(()=>{class e{constructor(e,t,c,n,i){this.projectService=e,this.systemService=t,this.router=c,this.route=n,this.userService=i}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.projects=void 0,this.showRightButtonContent=!1,this._subs=[],this.listType="myProjects",this.pageIndex=0,this.pageSize=30,this.totalCount=0,this._subs.push(this.userService.currentUser$.subscribe(e=>this.currentUser=e)),this.route.queryParamMap.pipe(Object(on.a)(e=>(this.listType=e.get("listType")||"myProjects",this.pageSize=+e.get("pageSize")||30,this.pageIndex=+e.get("pageIndex")||0,"sharedProjects"===this.listType?this.projectService.getSharedProjects(this.pageIndex,this.pageSize):"publicProjects"===this.listType?this.projectService.getPublicProjects(this.pageIndex,this.pageSize):this.projectService.getProjects(this.pageIndex,this.pageSize)))).subscribe(e=>{e.isError||(this.projects=e.success.records,this.totalCount=e.success.totalCount)})}sortFunc(e,t){return t.createdAt.valueOf()-e.createdAt.valueOf()}onNewProject(){this.router.navigate(["/project/create"])}onProjectInfo(e){this.router.navigate(["/project/"+e.id+"/info"])}onPageChange(e){this.router.navigate(["/project/list"],{queryParams:{listType:this.listType,pageSize:e.pageSize,pageIndex:e.pageIndex}})}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(B.a),I.Ob(V.a),I.Ob(P.c),I.Ob(P.a),I.Ob(E.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["project-list"]],decls:18,vars:12,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"bdp-main-container"],["class","chi-header",4,"ngIf"],[1,"container",2,"padding","10px"],[4,"ngIf"],["class","row",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"chi-header"],[1,"jumbotron"],["type","button","role","button",1,"btn","btn-primary","btn-lg"],[1,"row"],[1,"col-12"],["mat-tab-nav-bar",""],["mat-tab-link","",2,"text-decoration","none",3,"routerLink","queryParams","active"],[1,"fas","fa-list","mr-3"],[1,"far","fa-handshake","fa-fw","mr-2"],[1,"fa","fa-list-alt","fa-fw","mr-2"],[2,"background-color","rgba(255,255, 255, 0.7)","border","thin solid darkgray",3,"length","pageSize","pageIndex","pageSizeOptions","page"],["class","jumbotron mb-0",4,"ngIf"],[1,"project","clearfix",2,"text-align","center","line-height","40px","min-height","40px","background-color","rgba(255, 243, 205, 0.4)",3,"click"],[1,"fas","fa-plus-square","fa-fw","mr-2"],["class","project clearfix",3,"click",4,"ngFor","ngForOf"],[1,"jumbotron","mb-0"],[1,"mat-display-2"],[1,"mat-title"],[1,"my-4"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-display-1"],["mat-raised-button","","color","primary",3,"routerLink","queryParams"],["mat-raised-button","",1,"ml-3",3,"routerLink","queryParams"],[1,"project","clearfix",3,"click"],[1,"text-muted","float-right",2,"font-size","8pt"],[1,"projectTitle"],[1,"p-2","text-muted"],[1,"text-muted",2,"font-size","10pt"],[1,"clearfix","float-right","text-muted"],[1,"float-right"],[1,"fas","fa-cube","mr-2"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"chi-rbtn",3,"routerLink","queryParams"],[1,"fas","fa-list","fa-fw"],[1,"chi-rbtn-content"],[1,"far","fa-handshake","fa-fw"],[1,"fa","fa-list-alt","fa-fw"],[1,"fas","fa-plus-square","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"]],template:function(e,t){1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",3),I.Ub(5,"a",2),I.Lc(6," Project List"),I.Tb(),I.Ub(7,"a",4),I.Pb(8,"i",5),I.Tb(),I.Tb(),I.Tb(),I.Ub(9,"div",6),I.Jc(10,bn,2,0,"h3",7),I.Jc(11,ln,2,0,"h3",7),I.Jc(12,un,2,0,"h3",7),I.Pb(13,"br"),I.Ub(14,"div",8),I.Jc(15,mn,9,4,"div",9),I.Jc(16,xn,14,28,"div",10),I.Tb(),I.Tb(),I.Jc(17,Fn,37,31,"div",11)),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(9,Mn)),I.Cb(3),I.nc("routerLink",I.qc(10,Cn)),I.Cb(2),I.nc("routerLink",I.qc(11,Cn)),I.Cb(3),I.nc("ngIf","myProjects"===t.listType),I.Cb(1),I.nc("ngIf","sharedProjects"===t.listType),I.Cb(1),I.nc("ngIf","publicProjects"===t.listType),I.Cb(3),I.nc("ngIf",t.currentUser&&t.currentUser.auths.bdp<=1),I.Cb(1),I.nc("ngIf",t.currentUser&&t.currentUser.auths.bdp>=2),I.Cb(1),I.nc("ngIf",t.projects&&t.currentUser&&t.currentUser.auths.bdp>=2))},directives:[P.f,n.n,m.f,m.e,f.a,n.m,s.b,P.d],styles:[".project[_ngcontent-%COMP%]{min-height:70px;padding:5px;height:auto;margin:5px 0;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);background-color:hsla(0,0%,100%,.5);cursor:pointer;transition:all .3s cubic-bezier(.25,.8,.25,1)}.project[_ngcontent-%COMP%]:hover{box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);background-color:#fff3cd}.projectTitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.mat-tab-link[_ngcontent-%COMP%]{opacity:1!important}"],data:{animation:[_e.a]}}),e})();var _n=c("MKys"),Rn=c("xsm5"),Nn=c("RMae"),Dn=c("jhN1"),qn=c("2uAV");function Bn(e,t){if(1&e&&(I.Ub(0,"span"),I.Lc(1),I.Tb()),2&e){const e=I.gc(2);I.Cb(1),I.Nc(" ",e.currentProject.name,"")}}const $n=function(e){return["/project",e,"info"]};function Vn(e,t){if(1&e&&(I.Ub(0,"li",8),I.Ub(1,"a",2),I.Lc(2,"Project"),I.Jc(3,Bn,2,1,"span",5),I.Tb(),I.Ub(4,"a",9),I.Pb(5,"i",10),I.Tb(),I.Tb()),2&e){const e=I.gc();I.Cb(1),I.nc("routerLink",I.rc(3,$n,e.currentProject.id)),I.Cb(2),I.nc("ngIf",e.currentProject),I.Cb(1),I.nc("routerLink",I.rc(5,$n,e.currentProject.id))}}function En(e,t){1&e&&(I.Ub(0,"li",8),I.Lc(1,"Project information"),I.Tb())}function An(e,t){1&e&&(I.Ub(0,"div"),I.Lc(1,"Loading ... "),I.Pb(2,"i",11),I.Tb())}function zn(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-form-field",31),I.Ub(1,"input",32),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc(2).currentProject.name=t})),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2);I.Cb(1),I.nc("ngModel",e.currentProject.name)}}function Hn(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-form-field",31),I.Ub(1,"textarea",33),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc(2).currentProject.desc=t})),I.Lc(2),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2);I.Cb(1),I.nc("ngModel",e.currentProject.desc),I.Cb(1),I.Mc(e.currentProject.desc)}}function Yn(e,t){1&e&&(I.Ub(0,"div",34),I.Lc(1," No package assigned. "),I.Tb())}function Kn(e,t){1&e&&I.Pb(0,"i",59)}function Wn(e,t){1&e&&I.Pb(0,"i",60)}function Gn(e,t){if(1&e&&(I.Sb(0),I.Jc(1,Kn,1,0,"i",57),I.Jc(2,Wn,1,0,"i",58),I.Rb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",null==e.privilege?null:e.privilege.canView),I.Cb(1),I.nc("ngIf",!(null!=e.privilege&&e.privilege.canView))}}function Qn(e,t){1&e&&I.Pb(0,"i",61)}function Xn(e,t){1&e&&(I.Ub(0,"span",48),I.Lc(1,"owner"),I.Tb())}function Zn(e,t){1&e&&(I.Ub(0,"span",48),I.Lc(1,"manager"),I.Tb())}function ei(e,t){1&e&&(I.Ub(0,"span",48),I.Lc(1," viewer"),I.Tb())}function ti(e,t){1&e&&(I.Ub(0,"span",48),I.Lc(1," runner"),I.Tb())}function ci(e,t){if(1&e&&(I.Ub(0,"div",62),I.Jc(1,Xn,2,0,"span",49),I.Jc(2,Zn,2,0,"span",49),I.Jc(3,ei,2,0,"span",49),I.Jc(4,ti,2,0,"span",49),I.Tb()),2&e){const e=I.gc(2).$implicit;I.Cb(1),I.nc("ngIf",e.privilege.isOwner),I.Cb(1),I.nc("ngIf",e.privilege.isManager),I.Cb(1),I.nc("ngIf",e.privilege.isViewer),I.Cb(1),I.nc("ngIf",e.privilege.isRunner)}}function ni(e,t){1&e&&(I.Ub(0,"div",62),I.Ub(1,"span",48),I.Lc(2,"public"),I.Tb(),I.Tb())}function ii(e,t){1&e&&(I.Ub(0,"span",63),I.Lc(1,"main package"),I.Tb())}function ri(e,t){if(1&e&&(I.Ub(0,"span",64),I.Lc(1),I.Tb()),2&e){const e=t.$implicit;I.Cb(1),I.Mc(e)}}function si(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",69),I.cc("click",(function(){I.Bc(e);const t=I.gc(3).index;return I.gc(3).movePkgUp(t)})),I.Pb(1,"i",70),I.Tb()}}function ai(e,t){if(1&e){const e=I.Vb();I.Ub(0,"button",69),I.cc("click",(function(){I.Bc(e);const t=I.gc(3).index;return I.gc(3).movePkgDown(t)})),I.Pb(1,"i",71),I.Tb()}}function oi(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-card-actions"),I.Jc(1,si,2,0,"button",65),I.Jc(2,ai,2,0,"button",66),I.Ub(3,"button",67),I.cc("click",(function(){I.Bc(e);const t=I.gc(2).index;return I.gc(3).removePkg(t)})),I.Pb(4,"i",68),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2).index,t=I.gc(3);I.Cb(1),I.nc("ngIf",0!==e),I.Cb(1),I.nc("ngIf",e<t.currentProject.packages.length-1)}}function bi(e,t){1&e&&(I.Ub(0,"span",48),I.Lc(1," (You)"),I.Tb())}function li(e,t){1&e&&(I.Ub(0,"span",72),I.Lc(1,"Under development"),I.Tb())}function ui(e,t){1&e&&(I.Ub(0,"span",73),I.Lc(1,"Experimenting"),I.Tb())}function di(e,t){1&e&&(I.Ub(0,"span",74),I.Lc(1,"Stable"),I.Tb())}function gi(e,t){1&e&&(I.Ub(0,"span",75),I.Lc(1,"Out of date"),I.Tb())}function fi(e,t){if(1&e&&(I.Ub(0,"mat-card",39),I.Ub(1,"mat-card-header"),I.Ub(2,"div",40),I.Jc(3,Gn,3,2,"ng-container",5),I.Jc(4,Qn,1,0,"i",41),I.Tb(),I.Ub(5,"mat-card-title"),I.Ub(6,"b"),I.Lc(7),I.Tb(),I.Tb(),I.Ub(8,"mat-card-subtitle"),I.Lc(9),I.hc(10,"htmlToPlainText"),I.Tb(),I.Jc(11,ci,5,4,"div",42),I.Jc(12,ni,3,0,"div",42),I.Tb(),I.Ub(13,"mat-card-content"),I.Jc(14,ii,2,0,"span",43),I.Jc(15,ri,2,1,"span",44),I.Tb(),I.Jc(16,oi,5,2,"mat-card-actions",5),I.Ub(17,"mat-card-footer",45),I.Ub(18,"div",46),I.Pb(19,"i",47),I.Ub(20,"span",48),I.Lc(21),I.Tb(),I.Jc(22,bi,2,0,"span",49),I.Tb(),I.Tb(),I.Ub(23,"mat-card-footer",50),I.Ub(24,"div",51),I.Sb(25,52),I.Jc(26,li,2,0,"span",53),I.Jc(27,ui,2,0,"span",54),I.Jc(28,di,2,0,"span",55),I.Jc(29,gi,2,0,"span",56),I.Rb(),I.Tb(),I.Tb(),I.Tb()),2&e){const e=I.gc(),t=e.$implicit,c=e.index,n=I.gc(3);I.Cb(3),I.nc("ngIf",!t.public),I.Cb(1),I.nc("ngIf",t.public),I.Cb(3),I.Mc(t.fullname),I.Cb(2),I.Nc(" ",I.ic(10,16,t.desc)," "),I.Cb(2),I.nc("ngIf",!t.public),I.Cb(1),I.nc("ngIf",t.public),I.Cb(2),I.nc("ngIf",0===c),I.Cb(1),I.nc("ngForOf",t.scope),I.Cb(1),I.nc("ngIf",n._viewControls.isEditing),I.Cb(5),I.Mc(t.owner?t.owner.name:"unset"),I.Cb(1),I.nc("ngIf",(null==t.owner?null:t.owner.id)===(null==n.currentUser?null:n.currentUser.id)),I.Cb(3),I.nc("ngSwitch",t.status),I.Cb(1),I.nc("ngSwitchCase",0),I.Cb(1),I.nc("ngSwitchCase",1),I.Cb(1),I.nc("ngSwitchCase",2),I.Cb(1),I.nc("ngSwitchCase",3)}}function pi(e,t){if(1&e&&(I.Ub(0,"div",37),I.Jc(1,fi,30,18,"mat-card",38),I.Tb()),2&e){const e=t.$implicit,c=I.gc(3);I.nc("cdkDragDisabled",!c._viewControls.isEditing),I.Cb(1),I.nc("ngIf",e)}}function hi(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",24),I.Ub(1,"div",35),I.cc("cdkDropListDropped",(function(t){return I.Bc(e),I.gc(2).drop(t)})),I.Jc(2,pi,2,2,"div",36),I.Tb(),I.Tb()}if(2&e){const e=I.gc(2);I.Cb(2),I.nc("ngForOf",e.currentProject.packages)}}function mi(e,t){if(1&e){const e=I.Vb();I.Ub(0,"mat-card",76),I.cc("click",(function(){return I.Bc(e),I.gc(2).onClickPackageSelector()})),I.Ub(1,"mat-card-header"),I.Ub(2,"div",40),I.Pb(3,"i",77),I.Tb(),I.Ub(4,"mat-card-title"),I.Ub(5,"b"),I.Lc(6,"Click to add a package"),I.Tb(),I.Tb(),I.Tb(),I.Tb()}}const Ti=function(e){return["/project",e,"dataFile","list"]},Ci=function(e){return["/project",e,"result","list"]};function vi(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",12),I.Ub(1,"div",13),I.Ub(2,"div",14),I.Ub(3,"div",15),I.Ub(4,"strong"),I.Lc(5,"Project name"),I.Tb(),I.Tb(),I.Ub(6,"div",16),I.Ub(7,"span",17),I.Lc(8),I.Tb(),I.Jc(9,zn,2,1,"mat-form-field",18),I.Tb(),I.Tb(),I.Pb(10,"br"),I.Ub(11,"div",14),I.Ub(12,"div",15),I.Ub(13,"strong"),I.Lc(14,"Description"),I.Tb(),I.Tb(),I.Ub(15,"div",16),I.Ub(16,"span",19),I.Lc(17),I.Tb(),I.Jc(18,Hn,3,2,"mat-form-field",18),I.Tb(),I.Tb(),I.Pb(19,"br"),I.Ub(20,"div",14),I.Ub(21,"div",15),I.Ub(22,"strong"),I.Lc(23,"Creation time"),I.Tb(),I.Tb(),I.Ub(24,"div",16),I.Lc(25),I.Tb(),I.Tb(),I.Pb(26,"br"),I.Ub(27,"div",14),I.Ub(28,"div",15),I.Ub(29,"strong"),I.Lc(30,"Last manipulation"),I.Tb(),I.Tb(),I.Ub(31,"div",16),I.Lc(32),I.Tb(),I.Tb(),I.Pb(33,"br"),I.Ub(34,"div",14),I.Ub(35,"div",15),I.Ub(36,"strong"),I.Lc(37,"Summary"),I.Tb(),I.Tb(),I.Ub(38,"div",16),I.Ub(39,"a",2),I.Lc(40),I.Tb(),I.Lc(41," and "),I.Ub(42,"a",2),I.Lc(43),I.Tb(),I.Lc(44,". "),I.Tb(),I.Tb(),I.Pb(45,"br"),I.Ub(46,"div",14),I.Ub(47,"div",15),I.Ub(48,"strong"),I.Lc(49,"Public project?"),I.Tb(),I.Tb(),I.Ub(50,"div",16),I.Ub(51,"mat-radio-group",20),I.cc("ngModelChange",(function(t){return I.Bc(e),I.gc().currentProject.public=t})),I.Ub(52,"mat-radio-button",21),I.Lc(53,"Private"),I.Tb(),I.Ub(54,"mat-radio-button",22),I.Lc(55,"Public"),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Ub(56,"div",14),I.Ub(57,"div",23),I.Ub(58,"strong"),I.Lc(59,"Privilege role settings"),I.Tb(),I.Tb(),I.Ub(60,"div",24),I.Ub(61,"table",25),I.Ub(62,"tr"),I.Ub(63,"td"),I.Lc(64,"Owner"),I.Tb(),I.Ub(65,"td"),I.Ub(66,"button",26),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.openUserSelectDialog("the project owner","owner",!1,t.currentProject.owner)})),I.Lc(67),I.Tb(),I.Tb(),I.Tb(),I.Ub(68,"tr"),I.Ub(69,"td"),I.Lc(70,"Managers"),I.Tb(),I.Ub(71,"td"),I.Ub(72,"button",26),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.openUserSelectDialog("the project managers","managers",!0,t.currentProject.managers)})),I.Lc(73),I.Tb(),I.Tb(),I.Tb(),I.Ub(74,"tr"),I.Ub(75,"td"),I.Lc(76,"Task runners"),I.Tb(),I.Ub(77,"td"),I.Ub(78,"button",26),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.openUserSelectDialog("the task runners","runners",!0,t.currentProject.runners)})),I.Lc(79),I.Tb(),I.Tb(),I.Tb(),I.Ub(80,"tr"),I.Ub(81,"td"),I.Lc(82,"Viewers"),I.Tb(),I.Ub(83,"button",26),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.openUserSelectDialog("the project viewers","viewers",!0,t.currentProject.viewers)})),I.Lc(84),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Pb(85,"br"),I.Ub(86,"div",14),I.Ub(87,"div",27),I.Ub(88,"b"),I.Lc(89,"Packages"),I.Tb(),I.Tb(),I.Jc(90,Yn,2,0,"div",28),I.Jc(91,hi,3,1,"div",29),I.Jc(92,mi,7,0,"mat-card",30),I.Tb(),I.Pb(93,"br"),I.Tb(),I.Tb()}if(2&e){const e=I.gc();I.Cb(7),I.nc("hidden",e._viewControls.isEditing),I.Cb(1),I.Mc(null!=e.currentProject&&e.currentProject.name?null==e.currentProject?null:e.currentProject.name:"None"),I.Cb(1),I.nc("ngIf",e._viewControls.isEditing),I.Cb(7),I.nc("hidden",e._viewControls.isEditing),I.Cb(1),I.Mc(null!=e.currentProject&&e.currentProject.desc?null==e.currentProject?null:e.currentProject.desc:"None"),I.Cb(1),I.nc("ngIf",e._viewControls.isEditing),I.Cb(7),I.Nc(" ",null==e.currentProject||null==e.currentProject.createdAt?null:e.currentProject.createdAt.calendar()," "),I.Cb(7),I.Nc(" ",null==e.currentProject||null==e.currentProject.updatedAt?null:e.currentProject.updatedAt.calendar()," "),I.Cb(7),I.nc("routerLink",I.rc(23,Ti,e.currentProject.id)),I.Cb(1),I.Nc("",null==e.currentProject?null:e.currentProject.dataFileNumber," data files"),I.Cb(2),I.nc("routerLink",I.rc(25,Ci,e.currentProject.id)),I.Cb(1),I.Nc("",null==e.currentProject?null:e.currentProject.resultNumber," results"),I.Cb(8),I.nc("ngModel",e.currentProject.public)("disabled",!e._viewControls.isEditing),I.Cb(1),I.nc("value",!1),I.Cb(2),I.nc("value",!0),I.Cb(13),I.Mc(e.currentProject.owner.name?e.currentProject.owner.name:"unset"),I.Cb(6),I.Mc(null==e.currentProject.managers?null:e.currentProject.managers.length),I.Cb(6),I.Mc(null==e.currentProject.runners?null:e.currentProject.runners.length),I.Cb(5),I.Mc(null==e.currentProject.viewers?null:e.currentProject.viewers.length),I.Cb(6),I.nc("ngIf",0===e.currentProject.packages.length),I.Cb(1),I.nc("ngIf",e.currentProject.packages.length>0&&e.packageSheetNames.length>0),I.Cb(1),I.nc("ngIf",e._viewControls.isEditing&&e.currentProject.packages.length<=10)}}function Ui(e,t){1&e&&I.Pb(0,"i",88)}function ki(e,t){1&e&&I.Pb(0,"i",89)}const Pi=function(e,t){return{"fa-edit":e,"fa-save":t}};function wi(e,t){if(1&e){const e=I.Vb();I.Sb(0),I.Ub(1,"a",79),I.cc("click",(function(){return I.Bc(e),I.gc(2).onSave()})),I.Pb(2,"i",90),I.Ub(3,"span",86),I.Lc(4),I.Tb(),I.Ub(5,"span",83),I.Lc(6,"\u276f"),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Rb()}if(2&e){const e=I.gc(2);I.Cb(1),I.Fb("active",e._viewControls.isEditing),I.Cb(1),I.nc("ngClass",I.sc(6,Pi,!e._viewControls.isEditing,e._viewControls.isEditing)),I.Cb(1),I.Fb("active",e._viewControls.isEditing||e.showRightButtonContent),I.Cb(1),I.Mc(e._viewControls.isEditing?"Click to save info":"Edit project info")}}const Ii=function(e){return["/project",e,"fileImport"]};function Li(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"a",84),I.Pb(2,"i",91),I.Ub(3,"span",86),I.Lc(4,"File Import"),I.Tb(),I.Ub(5,"span",83),I.Lc(6,"\u276f"),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Rb()),2&e){const e=I.gc(2);I.Cb(1),I.nc("routerLink",I.rc(3,Ii,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent)}}const ji=function(e){return["/project",e,"result","creation"]};function yi(e,t){if(1&e&&(I.Sb(0),I.Ub(1,"a",84),I.Pb(2,"i",92),I.Ub(3,"span",86),I.Lc(4,"Execute tasks"),I.Tb(),I.Ub(5,"span",83),I.Lc(6,"\u276f"),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Rb()),2&e){const e=I.gc(2);I.Cb(1),I.nc("routerLink",I.rc(3,ji,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent)}}function xi(e,t){if(1&e){const e=I.Vb();I.Sb(0),I.Ub(1,"a",79),I.cc("click",(function(){return I.Bc(e),I.gc(2).deleteProjectDialog()})),I.Pb(2,"i",93),I.Ub(3,"span",86),I.Lc(4,"Delete"),I.Tb(),I.Ub(5,"span",83),I.Lc(6,"\u276f"),I.Tb(),I.Tb(),I.Pb(7,"br"),I.Rb()}if(2&e){const e=I.gc(2);I.Cb(3),I.Fb("active",e.showRightButtonContent)}}function Si(e,t){if(1&e){const e=I.Vb();I.Ub(0,"div",78),I.Ub(1,"a",79),I.cc("click",(function(){I.Bc(e);const t=I.gc();return t.showRightButtonContent=!t.showRightButtonContent})),I.Jc(2,Ui,1,0,"i",80),I.Jc(3,ki,1,0,"i",81),I.Ub(4,"span",82),I.Lc(5,"MENU"),I.Tb(),I.Ub(6,"span",83),I.Lc(7,"\u276f"),I.Tb(),I.Tb(),I.Pb(8,"br"),I.Jc(9,wi,8,9,"ng-container",5),I.Ub(10,"a",84),I.Pb(11,"i",85),I.Ub(12,"span",86),I.Lc(13,"Data files"),I.Tb(),I.Ub(14,"span",83),I.Lc(15,"\u276f"),I.Tb(),I.Tb(),I.Pb(16,"br"),I.Ub(17,"a",84),I.Pb(18,"i",87),I.Ub(19,"span",86),I.Lc(20,"Results"),I.Tb(),I.Ub(21,"span",83),I.Lc(22,"\u276f"),I.Tb(),I.Tb(),I.Pb(23,"br"),I.Jc(24,Li,8,5,"ng-container",5),I.Jc(25,yi,8,5,"ng-container",5),I.Jc(26,xi,8,2,"ng-container",5),I.Tb()}if(2&e){const e=I.gc();I.nc("@rightButtonState",e.showRightButtonContent?"active":"inactive"),I.Cb(2),I.nc("ngIf",e.showRightButtonContent),I.Cb(1),I.nc("ngIf",!e.showRightButtonContent),I.Cb(1),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.nc("ngIf",e.currentProject.privilege.canEdit),I.Cb(1),I.nc("routerLink",I.rc(15,Ti,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.nc("routerLink",I.rc(17,Ci,e.currentProject.id)),I.Cb(2),I.Fb("active",e.showRightButtonContent),I.Cb(5),I.nc("ngIf",e.currentProject.privilege.canAddFile),I.Cb(1),I.nc("ngIf",e.currentProject.privilege.canRun),I.Cb(1),I.nc("ngIf",e.currentProject.privilege.canDelete)}}const Ji=function(){return["/home"]},Fi=function(){return["/project/list"]};function Mi(e,t){1&e&&(I.Ub(0,"div",18),I.Ub(1,"div",28),I.Pb(2,"i",29),I.Lc(3,"Your account hasn't been activated as a Normal User, please contact the System Root."),I.Tb(),I.Tb())}function Oi(e,t){1&e&&(I.Ub(0,"b"),I.Lc(1,"*Require "),I.Ub(2,"u"),I.Lc(3,"Normal User"),I.Tb(),I.Tb())}function _i(e,t){1&e&&(I.Ub(0,"b"),I.Lc(1,"*Require "),I.Ub(2,"u"),I.Lc(3,"Normal User"),I.Tb(),I.Tb())}function Ri(e,t){1&e&&(I.Ub(0,"b"),I.Lc(1,"*Require "),I.Ub(2,"u"),I.Lc(3,"Normal User"),I.Tb(),I.Tb())}const Ni=function(){return["/project/create"]},Di=function(){return["/project/list"]};function qi(e,t){1&e&&(I.Ub(0,"span",30),I.Lc(1,"If you don't know where to start, you may "),I.Ub(2,"a",2),I.Lc(3,"create a new project"),I.Tb(),I.Lc(4," or select a project from "),I.Ub(5,"a",2),I.Lc(6,"the project lists"),I.Tb(),I.Lc(7,"."),I.Tb()),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(2,Ni)),I.Cb(3),I.nc("routerLink",I.qc(3,Di)))}const Bi=function(){return["/home"]},$i=function(){return["/project/quick-start"]},Vi=function(){return["/account/profile"]},Ei=function(){return["/result/activities"]},Ai=function(e){return["/project",e,"fileImport"]},zi=function(e){return["/project",e,"result","creation"]},Hi=function(e){return["/project",e,"dataFile","list"]},Yi=function(e){return["/project",e,"result","list"]},Ki=function(){return["/page"]},Wi=function(e){return{project:e}},Gi=P.g.forChild([{path:"",pathMatch:"full",redirectTo:"list"},{path:"create",component:Oe,data:{path:"project/create"},canActivate:[_n.a]},{path:":pid/info",component:(()=>{class e{constructor(e,t,c,n,i,r,s,a,o,b){this.router=e,this.route=t,this.projectService=i,this.infoService=r,this.dialog=s,this.systemService=a,this.accountService=o,this.taskService=b,this._subs=[],c.addSvgIcon("pipeline-exec",n.bypassSecurityTrustResourceUrl("assets/icon/noun_82501_cc.svg"))}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.dataFileCardMode="card",this._viewControls={isDataFileDeleting:!1,isResultDeleting:!1,dataFileViewMode:"table",resultViewMode:"table",isEditing:!1,isLoading:!0,isProjectDeleting:!1,isHideDataFiles:!1,isHideResults:!1,confirmDelete:"",showPackageInfo:!1},this.packageSheetNames=[],this.showRightButtonContent=!1,this._subs.push(this.accountService.currentUser$.subscribe(e=>{e&&e.isLoggedIn&&(this.currentUser=e)})),this._subs.push(this.systemService.sysInfo$.subscribe(e=>{e&&(this.recaptchaKey=e.reCaptchaSiteKey)})),this._subs.push(this.projectService.currentProject$.subscribe(e=>{e&&(this.currentProject=e,e.packages&&(this.currentPackages=e.packages),this._viewControls.isLoading=!1)})),this.taskService.packageList$.subscribe(e=>{this.packageLists={},this.packageSheetNames=[],e.forEach(e=>{const t=e.sheetName||"Internal Package List";this.packageLists[t]||(this.packageLists[t]=[]),this.packageLists[t].push(e)}),this.packageSheetNames=Object.keys(this.packageLists),this.packageSheetNames=Object(q.a)(this.packageSheetNames);for(const t of this.packageSheetNames)this.packageLists[t]=Object(q.a)(this.packageLists[t],[e=>e.name],["asc"])}),this.route.queryParamMap.subscribe(e=>{this._viewControls.isEditing="1"===e.get("edit")}),this.route.paramMap.subscribe(e=>{const t=e.get("pid");this.projectService.setCurrentProject(t,!0)}),this.taskService.loadPackages()}onProjectChange(e){this.currentProject=e}setStatusCSS(e){const t={"fa-circle-o-notch":!1,"fa-spin":!1,"fa-hourglass-half":!1,"fa-check":!1,"fa-times":!1};switch(e){case 0:t["fa-hourglass-half"]=!0;break;case 1:t["fa-circle-o-notch"]=!0,t["fa-spin"]=!0;break;case 2:t["fa-check"]=!0;break;case 3:t["fa-times"]=!0}return t}refresh(){return this.currentProject?this.projectService.setCurrentProject(this.currentProject.id,!0):""}goToFileUploadPage(){this.router.navigate(["/project",this.currentProject.id,"fileImport"])}trackByDataFile(e,t){return t.id}goToNewResultPage(){this.router.navigate(["/project",this.currentProject.id,"result","creation"])}onFocusedDataFile(e){this.focusedDataFile=e}onFocusedResult(e){this.focusedResult=e}gotoDataFile(e,t){return this.router.navigate(["/dataFile",e.id,"info"],t?{queryParams:{edit:1}}:{})}gotoResult(e,t){return this.router.navigate(["/result",e.id,"info"],t?{queryParams:{edit:1}}:{})}deleteProject(e){this._subs.push(this.projectService.removeProject(this.currentProject).subscribe(e=>e.isError?"":this.router.navigate(["/project/list"])))}deleteProjectDialog(){const e=this.dialog.open(Rn.a,{disableClose:!1});e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger" id="myModalLabel"> Are you sure you want to delete the project\n        <strong>${this.currentProject.name}</strong>?</h4>`,desc:`<span class="text-danger">This will delete the project, name: <b>${this.currentProject.name}</b>,\n         and all the associated results and data files.<br>This cannot be undone.\n         Make sure this is something you really want to do!</span><br>`,confirmWord:"Delete"}),e.afterClosed().subscribe(e=>e?this.deleteProject(e):"")}onSave(){if(this._viewControls.isEditing){this._viewControls.isEditing=!1;const e=this.projectService.updateProjectInfo(this.currentProject,this.currentProject.packages.map(e=>e.id)).subscribe(t=>{t.isError||this.projectService.setCurrentProject(t.success.id),e.unsubscribe()})}else this._viewControls.isEditing=!0}openUserSelectDialog(e,t,c,n){const i=this.dialog.open(Nn.a,{disableClose:!1,width:"95%",height:"95%"});c||(n=n&&n.id?[n]:[]);const r=this.currentProject.privilege,s=r.canSetMember&&!(("owner"===t||"managers"===t)&&r.isManager);i.componentInstance.setOptions({scope:e,isMultiple:c,canEdit:s,userList:n,authField:"bdp",currentUser:this.currentUser}),i.afterClosed().subscribe(e=>{if(s&&e&&e.length>0){const c=this.projectService.setProjectMembers(this.currentProject.id,t,e).subscribe(()=>c.unsubscribe())}})}drop(e){Object(k.d)(this.currentProject.packages,e.previousIndex,e.currentIndex)}movePkgUp(e){if(e<1)return;const t=this.currentProject.packages.splice(e,1)[0];console.log(t),this.currentProject.packages.splice(e-1,0,t)}movePkgDown(e){if(e>=this.currentProject.packages.length-1)return;const t=this.currentProject.packages.splice(e,1)[0];this.currentProject.packages.splice(e+1,0,t)}removePkg(e){this.currentProject.packages.splice(e,1)}onClickPackageSelector(){this.dialog.open(D,{disableClose:!1,data:{packageLists:this.packageLists,packageSheetNames:this.packageSheetNames,selectedPackages:this.currentProject.packages}}).afterClosed().subscribe(e=>{this.currentProject.packages.push(e)})}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(P.c),I.Ob(P.a),I.Ob(d.c),I.Ob(Dn.b),I.Ob(B.a),I.Ob(qn.a),I.Ob(w.b),I.Ob(V.a),I.Ob(E.a),I.Ob($.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["project-info"]],decls:17,vars:9,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"fas","fa-circle-notch","fa-fw","fa-spin","fa-lg"],[1,"container-fluid"],[2,"font-size","14px"],[1,"row"],[1,"col-md-2"],[1,"col-md-9"],[2,"text-indent","36px","width","100%",3,"hidden"],["style","width: 100%;",4,"ngIf"],[2,"text-indent","36px","width","100%","word-break","break-all",3,"hidden"],[3,"ngModel","disabled","ngModelChange"],[1,"ml-2",3,"value"],[1,"ml-5",3,"value"],[1,"col-12","my-3"],[1,"col-12"],[1,"ml-5"],["mat-button","",3,"click"],[1,"col-lg-3"],["class","col-lg-9",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12","class","link viewable","style","height: auto; width: 100%;",3,"click",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","40","size","40","placeholder","The subset name (length must be smaller or equal than 40 characters)",3,"ngModel","ngModelChange"],["matInput","","placeholder","Say something about this project. (max length: 160 characters)","maxlength","160","rows","3",3,"ngModel","ngModelChange"],[1,"col-lg-9"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","",3,"cdkDragDisabled"],["class","ml-1 my-2","style","height: auto",4,"ngIf"],[1,"ml-1","my-2",2,"height","auto"],["mat-card-avatar",""],["class","fas fa-unlock fa-fw fa-2x",4,"ngIf"],["class","ml-3","style","position: absolute; top: 2px; right: 5px; font-size: 14px;",4,"ngIf"],["class","badge badge-warning m-3",4,"ngIf"],["class","m-3 badge badge-primary",4,"ngFor","ngForOf"],[2,"text-align","left"],[1,"small","ml-3",2,"font-size","12pt","margin","5px 5px"],[1,"fas","fa-user-circle","text-muted","ml-5","mr-2"],[1,"text-muted"],["class","text-muted",4,"ngIf"],[2,"text-align","right"],[1,"small","text-mute",2,"font-size","14pt","margin","5px 5px"],[3,"ngSwitch"],["class","badge badge-danger",4,"ngSwitchCase"],["class","badge badge-warning",4,"ngSwitchCase"],["class","badge badge-success",4,"ngSwitchCase"],["class","badge badge-default",4,"ngSwitchCase"],["class","fas fa-cube fa-fw fa-2x",4,"ngIf"],["class","fas fa-lock fa-fw fa-2x",4,"ngIf"],[1,"fas","fa-cube","fa-fw","fa-2x"],[1,"fas","fa-lock","fa-fw","fa-2x"],[1,"fas","fa-unlock","fa-fw","fa-2x"],[1,"ml-3",2,"position","absolute","top","2px","right","5px","font-size","14px"],[1,"badge","badge-warning","m-3"],[1,"m-3","badge","badge-primary"],["mat-button","","color","primary","style","min-width: 1%;",3,"click",4,"ngIf"],["style","min-width: 1%;","mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","accent",2,"min-width","1%",3,"click"],[1,"fas","fa-times","fa-fw"],["mat-button","","color","primary",2,"min-width","1%",3,"click"],[1,"fas","fa-arrow-up","fa-fw"],[1,"fas","fa-arrow-down","fa-fw"],[1,"badge","badge-danger"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"badge","badge-default"],[1,"link","viewable",2,"height","auto","width","100%",3,"click"],[1,"far","fa-plus-square","fa-fw","fa-2x"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-file","fa-fw"],[1,"chi-rbtn-content"],[1,"far","fa-folder-open","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],[1,"far","fa-fw",3,"ngClass"],[1,"fa","fa-upload","fa-fw"],[1,"fa","fa-play","fa-fw"],[1,"far","fa-trash-alt","fa-fw"]],template:function(e,t){1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",1),I.Ub(5,"a",2),I.Lc(6,"Project List"),I.Tb(),I.Tb(),I.Jc(7,Vn,6,7,"li",3),I.Jc(8,En,2,0,"li",3),I.Tb(),I.Ub(9,"div",4),I.Ub(10,"h3"),I.Lc(11,"Project information"),I.Tb(),I.Pb(12,"br"),I.Pb(13,"br"),I.Jc(14,An,3,0,"div",5),I.Jc(15,vi,94,27,"div",6),I.Tb(),I.Jc(16,Si,27,19,"div",7)),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(7,Ji)),I.Cb(3),I.nc("routerLink",I.qc(8,Fi)),I.Cb(2),I.nc("ngIf",t.currentProject),I.Cb(1),I.nc("ngIf",!t.currentProject),I.Cb(6),I.nc("ngIf",t._viewControls.isLoading),I.Cb(1),I.nc("ngIf",!t._viewControls.isLoading&&void 0!==t.currentProject),I.Cb(1),I.nc("ngIf",t.currentProject))},directives:[P.f,n.n,v.b,i.i,i.l,v.a,s.b,L.b,g.a,i.b,i.e,k.b,n.m,k.a,o.a,o.f,o.c,o.j,o.i,o.d,o.e,n.p,n.q,o.b,n.l],pipes:[A.a],styles:["h3[_ngcontent-%COMP%]{font-style:italic;font-size:27px;border-bottom:1px solid #b4b4b4;padding-bottom:0;display:inline-block;margin:0}.projectTitle[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%;padding-right:150px;font-size:18px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:1px}.subsetCard[_ngcontent-%COMP%]{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);min-height:80px;background-color:hsla(0,0%,100%,.5);padding:10px;margin:10px 0;height:150px;overflow:hidden;text-overflow:ellipsis}.viewable[_ngcontent-%COMP%]:hover{background-color:#fff3cd;border-color:#ffeeba;box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}"],data:{animation:[_e.a]}}),e})(),data:{path:"project/info"},canActivate:[_n.a]},{path:":pid/fileImport",component:st,data:{path:"project/import"},canActivate:[_n.a]},{path:"list",component:On,data:{path:"project/list"},canActivate:[_n.a]},{path:":pid/result/creation",component:an,data:{path:"project/resultcreate"},canActivate:[_n.a]},{path:"quick-start",component:(()=>{class e{constructor(e,t,c){this.systemService=e,this.projectService=t,this.accountService=c,this._subs=[]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs.push(this.projectService.currentProject$.subscribe(e=>this.currentProject=e)),this._subs.push(this.accountService.currentUser$.subscribe(e=>this.currentUser=e))}ngOnDestroy(){this._subs.map(e=>e.unsubscribe?e.unsubscribe():"")}}return e.\u0275fac=function(t){return new(t||e)(I.Ob(V.a),I.Ob(B.a),I.Ob(E.a))},e.\u0275cmp=I.Ib({type:e,selectors:[["quick-start"]],decls:89,vars:84,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"bdp-main-container"],[1,"chi-header"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-md-6","col-lg-4","col-xl-3","my-3"],[1,"quick-card","link","p-4",3,"routerLink"],[1,"far","fa-address-card","fa-3x"],[1,"text-muted","text-justify","px-3","desc"],[1,"far","fa-plus-square","fa-3x"],[4,"ngIf"],[1,"fas","fa-th-list","fa-3x"],[1,"fas","fa-history","fa-3x"],[1,"col-12"],[1,"px-3","py-2"],["class","px-5",4,"ngIf"],[1,"quick-card","p-4",3,"routerLink"],[1,"fas","fa-upload","fa-3x"],[1,"fas","fa-play","fa-3x"],[1,"fas","fa-file","fa-3x"],[1,"fas","fa-folder-open","fa-3x"],[1,"quick-card","link","p-4",3,"routerLink","queryParams"],[1,"fas","fa-scroll","fa-3x"],[1,"alert","alert-danger","m-3"],[1,"fas","fa-exclamation-triangle","fa-fw","mr-2"],[1,"px-5"]],template:function(e,t){1&e&&(I.Ub(0,"ol",0),I.Ub(1,"li",1),I.Ub(2,"a",2),I.Lc(3,"Home"),I.Tb(),I.Tb(),I.Ub(4,"li",3),I.Ub(5,"a",2),I.Lc(6," Quick Start"),I.Tb(),I.Ub(7,"a",4),I.Pb(8,"i",5),I.Tb(),I.Tb(),I.Tb(),I.Ub(9,"div",6),I.Ub(10,"h3",7),I.Lc(11,"Quick Start"),I.Tb(),I.Ub(12,"div",8),I.Jc(13,Mi,4,0,"div",9),I.Ub(14,"div",10),I.Ub(15,"div",11),I.Pb(16,"i",12),I.Ub(17,"h2"),I.Lc(18,"User profile"),I.Tb(),I.Ub(19,"span",13),I.Lc(20," You can change your display name here, so that the other users or System Root can recognize you. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(21,"div",10),I.Ub(22,"div",11),I.Pb(23,"i",14),I.Ub(24,"h2"),I.Lc(25,"Create a Project"),I.Tb(),I.Jc(26,Oi,4,0,"b",15),I.Ub(27,"span",13),I.Lc(28," To create a project, You need to specify data processing or analysis packages for that project. Then, all defined tasks/workflows of those packages can be used in the project. The project can be modified after project creation. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(29,"div",10),I.Ub(30,"div",11),I.Pb(31,"i",16),I.Ub(32,"h2"),I.Lc(33,"View Projects"),I.Tb(),I.Jc(34,_i,4,0,"b",15),I.Ub(35,"span",13),I.Lc(36," View your own projects, other project that someone shared with you and public projects. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(37,"div",10),I.Ub(38,"div",11),I.Pb(39,"i",17),I.Ub(40,"h2"),I.Lc(41,"Recent Activities"),I.Tb(),I.Jc(42,Ri,4,0,"b",15),I.Ub(43,"span",13),I.Lc(44," All-related results of all projects are sorted by time and displayed here. The related results may be from your or shared projects. "),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Pb(45,"mat-divider"),I.Ub(46,"div",8),I.Ub(47,"div",18),I.Ub(48,"h2",19),I.Lc(49,"The following actions require you to select a project first."),I.Tb(),I.Jc(50,qi,8,4,"span",20),I.Tb(),I.Ub(51,"div",10),I.Ub(52,"div",21),I.Pb(53,"i",22),I.Ub(54,"h2"),I.Lc(55,"Import Files"),I.Tb(),I.Ub(56,"span",13),I.Lc(57," Once you have selected a project and you do have privileges to import files to that project. This will be DISABLED if you haven't selected a project or you have NO privileges. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(58,"div",10),I.Ub(59,"div",11),I.Pb(60,"i",23),I.Ub(61,"h2"),I.Lc(62,"Execute Tasks"),I.Tb(),I.Ub(63,"span",13),I.Lc(64," To perform defined tasks or workflows of packages in the selected project. The packages need to be chosen for the project. You need to select a project first to execute tasks. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(65,"div",10),I.Ub(66,"div",11),I.Pb(67,"i",24),I.Ub(68,"h2"),I.Lc(69,"View DataFiles"),I.Tb(),I.Ub(70,"span",13),I.Lc(71," All imported files and result outputs in this project can be found here. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(72,"div",10),I.Ub(73,"div",11),I.Pb(74,"i",25),I.Ub(75,"h2"),I.Lc(76,"View Results"),I.Tb(),I.Ub(77,"span",13),I.Lc(78," All results of executed tasks in this project can be found here. This platform records all provenence of every task run: the input arguments, execution time and the output files. "),I.Tb(),I.Tb(),I.Tb(),I.Ub(79,"div",10),I.Ub(80,"div",26),I.Pb(81,"i",27),I.Ub(82,"h2"),I.Lc(83,"Project Pages"),I.Tb(),I.Ub(84,"span",13),I.Ub(85,"p"),I.Ub(86,"b"),I.Lc(87,"Page"),I.Tb(),I.Lc(88," is the customized web interface whic is developed by package builder. The Project Page may provide documentations as well as guide users to upload files and execute tasks. You can change the packages of this project to view the corresponding Page. If the developers of the packages did not provide the customized Pages, you may see the warning of page not found."),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb(),I.Tb()),2&e&&(I.Cb(2),I.nc("routerLink",I.qc(66,Bi)),I.Cb(3),I.nc("routerLink",I.qc(67,$i)),I.Cb(2),I.nc("routerLink",I.qc(68,$i)),I.Cb(6),I.nc("ngIf",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.Cb(2),I.nc("routerLink",I.qc(69,Vi)),I.Cb(7),I.Fb("link",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2)("inactive",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2)("text-muted",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.nc("routerLink",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2?I.qc(70,Ni):null),I.Cb(4),I.nc("ngIf",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.Cb(4),I.Fb("link",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2)("inactive",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2)("text-muted",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.nc("routerLink",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2?I.qc(71,Di):null),I.Cb(4),I.nc("ngIf",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.Cb(4),I.Fb("link",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2)("inactive",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2)("text-muted",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.nc("routerLink",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2?I.qc(72,Ei):null),I.Cb(4),I.nc("ngIf",!t.currentUser||!t.currentUser.auths||t.currentUser.auths.bdp<2),I.Cb(8),I.nc("ngIf",t.currentUser&&t.currentUser.auths&&t.currentUser.auths.bdp>=2),I.Cb(2),I.Fb("link",t.currentProject&&t.currentProject.privilege.canAddFile)("inactive",!t.currentProject||!t.currentProject.privilege.canAddFile)("text-muted",!t.currentProject||!t.currentProject.privilege.canAddFile),I.nc("routerLink",t.currentProject&&t.currentProject.privilege.canAddFile?I.rc(73,Ai,t.currentProject.id):null),I.Cb(7),I.Fb("link",t.currentProject&&t.currentProject.privilege.canRun)("inactive",!t.currentProject||!t.currentProject.privilege.canRun)("text-muted",!t.currentProject||!t.currentProject.privilege.canRun),I.nc("routerLink",t.currentProject&&t.currentProject.privilege.canRun?I.rc(75,zi,t.currentProject.id):null),I.Cb(7),I.Fb("link",t.currentProject&&t.currentProject.privilege.canRun)("inactive",!t.currentProject||!t.currentProject.privilege.canRun)("text-muted",!t.currentProject||!t.currentProject.privilege.canRun),I.nc("routerLink",t.currentProject&&t.currentProject.privilege.canRun?I.rc(77,Hi,t.currentProject.id):null),I.Cb(7),I.Fb("link",t.currentProject&&t.currentProject.privilege.canRun)("inactive",!t.currentProject||!t.currentProject.privilege.canRun)("text-muted",!t.currentProject||!t.currentProject.privilege.canRun),I.nc("routerLink",t.currentProject&&t.currentProject.privilege.canRun?I.rc(79,Yi,t.currentProject.id):null),I.Cb(7),I.Fb("link",t.currentProject&&t.currentProject.privilege.canRun)("inactive",!t.currentProject||!t.currentProject.privilege.canRun)("text-muted",!t.currentProject||!t.currentProject.privilege.canRun),I.nc("routerLink",t.currentProject&&t.currentProject.privilege.canRun?I.qc(81,Ki):null)("queryParams",I.rc(82,Wi,t.currentProject?t.currentProject.id:null)))},directives:[P.f,n.n,P.d,T.a],styles:[".quick-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;align-content:flex-start;height:100%}.quick-card[_ngcontent-%COMP%]:hover{background-color:rgba(204,229,254,.8)}.inactive.quick-card[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,91.4%,.8)}.quick-card.inactive[_ngcontent-%COMP%]{opacity:.8}.desc[_ngcontent-%COMP%]{min-height:180px}"]}),e})(),data:{path:"quickstart"},canActivate:[_n.a]}]),Qi=[];var Xi=c("BBfw"),Zi=c("Bchi"),er=c("LzwD");let tr=(()=>{class e{}return e.\u0275mod=I.Mb({type:e}),e.\u0275inj=I.Lb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,i.d,P.g,L.d,g.b]]}),e})(),cr=(()=>{class e{}return e.\u0275mod=I.Mb({type:e}),e.\u0275inj=I.Lb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,i.d,w.f,g.b,s.c,p.b]]}),e})();var nr=c("GQzp"),ir=c("pkYj");let rr=(()=>{class e{}return e.\u0275mod=I.Mb({type:e}),e.\u0275inj=I.Lb({factory:function(t){return new(t||e)},providers:[Qi],imports:[[n.c,i.d,s.c,m.g,d.b,o.h,g.b,p.b,b.b,l.e,C.d,v.c,Zi.a,U.a,h.a,f.b,er.a,a.c,r.b,u.b,T.b,Xi.a,tr,cr,k.c,nr.a,ir.a,Gi]]}),e})()}}]);