(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GfiD:function(t,e,i){"use strict";i.r(e),i.d(e,"DataFileModule",(function(){return si}));var n=i("3Pt+"),a=i("ofXK"),c=i("/1cH"),s=i("A5z7"),o=i("qFsG"),r=i("d3UM"),l=i("bTqV"),b=i("NFeN"),d=i("8yBR"),g=i("+0xr"),f=i("M9IT"),h=i("bSwM"),u=i("f0Cb"),p=i("Dh3D"),m=i("nNey"),C=i("wkOn"),T=i("pkYj"),F=i("tyNb"),v=i("RMCY"),U=i("FvrZ"),w=i("+mqT"),k=i("7Cdu"),x=i("xsm5"),P=i("FtGj"),L=i("eIep"),D=i("2Vo4"),I=i("LRne"),j=i("fXoL"),S=i("flj8"),y=i("c3AT"),_=i("EnSQ"),M=i("0IaG"),B=i("YiK1"),J=i("i6c7"),E=i("kmnG"),O=i("I7HA"),R=i("FKr1");const N=["tagInput"];function $(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",12),j.cc("click",(function(e){return j.Bc(t),j.gc().gotoProject(e)})),j.Lc(1,"Project"),j.Tb()}}function V(t,e){if(1&t&&(j.Ub(0,"span"),j.Lc(1),j.Tb()),2&t){const t=j.gc(2);j.Cb(1),j.Nc(": ",t.currentProject.name,"")}}const A=function(t){return["/project",t]};function z(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",13),j.cc("click",(function(e){return j.Bc(t),j.gc().gotoProject(e)})),j.Lc(1,"Project "),j.Jc(2,V,2,1,"span",9),j.Tb()}if(2&t){const t=j.gc();j.nc("routerLink",j.rc(2,A,t.dataFile.project)),j.Cb(2),j.nc("ngIf",t.currentProject)}}const q=function(t){return["/project",t,"dataFile","list"]};function H(t,e){if(1&t&&(j.Ub(0,"li",1),j.Ub(1,"a",2),j.Lc(2,"DataFile List "),j.Tb(),j.Tb()),2&t){const t=j.gc();j.Cb(1),j.nc("routerLink",j.rc(1,q,t.dataFile.project))}}const Y=function(t){return["/dataFile",t,"info"]};function K(t,e){if(1&t&&(j.Ub(0,"li",14),j.Ub(1,"a",2),j.Lc(2,"File"),j.Tb(),j.Ub(3,"a",15),j.Pb(4,"i",16),j.Tb(),j.Tb()),2&t){const t=j.gc();j.Cb(1),j.nc("routerLink",j.rc(2,Y,t.dataFile.id)),j.Cb(2),j.nc("routerLink",j.rc(4,Y,t.dataFile.id))}}function G(t,e){1&t&&(j.Ub(0,"li",14),j.Lc(1,"File"),j.Tb())}function Q(t,e){1&t&&(j.Ub(0,"div"),j.Lc(1," Loading... "),j.Tb())}function W(t,e){if(1&t){const t=j.Vb();j.Ub(0,"p"),j.Ub(1,"u",37),j.Lc(2),j.Tb(),j.Lc(3),j.Ub(4,"u",37),j.Lc(5),j.Tb(),j.Ub(6,"span",25),j.cc("click",(function(){return j.Bc(t),j.gc(3).isEditing=!0})),j.Tb(),j.Tb()}if(2&t){const t=j.gc(3);j.Cb(2),j.Mc(null==t.dataFile?null:t.dataFile.prefix),j.Cb(1),j.Nc(" ",null==t.dataFile?null:t.dataFile.name," "),j.Cb(2),j.Mc(null==t.dataFile?null:t.dataFile.suffix)}}function X(t,e){if(1&t){const t=j.Vb();j.Sb(0),j.Ub(1,"mat-form-field",38),j.Ub(2,"input",39),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3).dataFile.prefix=e})),j.Tb(),j.Tb(),j.Ub(3,"mat-form-field",38),j.Ub(4,"input",40),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3).dataFile.suffix=e})),j.Tb(),j.Tb(),j.Ub(5,"mat-form-field",41),j.Ub(6,"i",42),j.cc("click",(function(){return j.Bc(t),j.gc(3).onSave()})),j.Tb(),j.Ub(7,"input",43),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3).dataFile.name=e})),j.Tb(),j.Ub(8,"span",44),j.Pb(9,"u",45),j.Tb(),j.Ub(10,"span",46),j.Pb(11,"u",45),j.Tb(),j.Tb(),j.Rb()}if(2&t){const t=j.gc(3);j.Cb(2),j.nc("ngModel",t.dataFile.prefix),j.Cb(2),j.nc("ngModel",t.dataFile.suffix),j.Cb(3),j.nc("ngModel",t.dataFile.name),j.Cb(2),j.nc("innerHTML",null==t.dataFile?null:t.dataFile.prefix,j.Cc),j.Cb(2),j.nc("innerHTML",null==t.dataFile?null:t.dataFile.suffix,j.Cc)}}function Z(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-form-field",41),j.Ub(1,"i",42),j.cc("click",(function(){return j.Bc(t),j.gc(3).onSave()})),j.Tb(),j.Ub(2,"textarea",47),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3).dataFile.desc=e})),j.Lc(3),j.Tb(),j.Tb()}if(2&t){const t=j.gc(3);j.Cb(2),j.nc("ngModel",t.dataFile.desc),j.Cb(1),j.Mc(t.dataFile.desc)}}function tt(t,e){if(1&t&&(j.Ub(0,"span",48),j.Lc(1),j.Tb()),2&t){const t=j.gc(3);j.Fb("badge-secondary","Folder"!==(null==t.dataFile?null:t.dataFile.format))("badge-success","Folder"===(null==t.dataFile?null:t.dataFile.format)),j.Cb(1),j.Nc("",null==t.dataFile?null:t.dataFile.format," ")}}function et(t,e){if(1&t){const t=j.Vb();j.Ub(0,"i",25),j.cc("click",(function(){return j.Bc(t),j.gc(3).isEditing=!0})),j.Tb()}}function it(t,e){if(1&t){const t=j.Vb();j.Ub(0,"i",42),j.cc("click",(function(){return j.Bc(t),j.gc(4).onSave()})),j.Tb()}}function nt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-form-field"),j.Jc(1,it,1,0,"i",49),j.Ub(2,"input",50),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3).dataFile.format=e})),j.Tb(),j.Tb()}if(2&t){const t=j.gc(3);j.Cb(1),j.nc("ngIf",t.isEditing),j.Cb(1),j.nc("ngModel",t.dataFile.format)}}function at(t,e){if(1&t){const t=j.Vb();j.Ub(0,"bdp-tag-input",51),j.cc("tagChange",(function(e){return j.Bc(t),j.gc(3).onTagChanged(e)})),j.Tb()}if(2&t){const t=j.gc(3);j.nc("packages",t.currentProject.packages)("tasks",t.tasks)("tags",t.dataFile.tags)("disabled",!t.isEditing)}}function ct(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",30),j.Ub(1,"div",20),j.Ub(2,"b"),j.Lc(3,"Folder"),j.Tb(),j.Tb(),j.Ub(4,"div",22),j.Ub(5,"a",2),j.Lc(6),j.Tb(),j.Ub(7,"span",52),j.cc("click",(function(){j.Bc(t);const e=j.gc(3);return e._viewControls.moveToDataFileID="",e.moveDataFileToFolder()})),j.Lc(8,"(X)"),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=j.gc(3);j.Cb(5),j.nc("routerLink",j.rc(2,Y,t.currentFolder.id)),j.Cb(1),j.Mc(t.currentFolder.name)}}function st(t,e){if(1&t&&(j.Ub(0,"mat-option",57),j.Lc(1),j.Tb()),2&t){const t=j.gc(4);j.nc("value",""),j.Cb(1),j.Nc(" Move out of the folder, ",t.currentFolder.name," ")}}function ot(t,e){if(1&t&&(j.Ub(0,"mat-option",57),j.Lc(1),j.Tb()),2&t){const t=j.gc().$implicit;j.nc("value",t.id),j.Cb(1),j.Mc(t.name)}}function rt(t,e){if(1&t&&j.Jc(0,ot,2,2,"mat-option",54),2&t){const t=e.$implicit,i=j.gc(4);j.nc("ngIf",i.dataFile.parent!==t.id)}}function lt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",30),j.Pb(1,"br"),j.Ub(2,"div",20),j.Ub(3,"b"),j.Lc(4,"Folder"),j.Tb(),j.Tb(),j.Ub(5,"div",22),j.Lc(6," Move to folder: "),j.Ub(7,"mat-form-field"),j.Ub(8,"mat-select",53),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc(3)._viewControls.moveToDataFileID=e})),j.Jc(9,st,2,2,"mat-option",54),j.Jc(10,rt,1,1,"ng-template",55),j.Tb(),j.Ub(11,"button",56),j.cc("click",(function(){return j.Bc(t),j.gc(3).moveDataFileToFolder()})),j.Lc(12,"Confirm"),j.Tb(),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=j.gc(3);j.Cb(8),j.nc("ngModel",t._viewControls.moveToDataFileID),j.Cb(1),j.nc("ngIf",t.dataFile.parent),j.Cb(1),j.nc("ngForOf",t.folders)}}function bt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div"),j.Ub(1,"div",58),j.Ub(2,"b"),j.Lc(3,"Export"),j.Tb(),j.Tb(),j.Ub(4,"div",22),j.Ub(5,"mat-form-field",59),j.Pb(6,"input",60,61),j.Ub(8,"mat-hint"),j.Lc(9,"(if you would also like to share this file to someone)"),j.Tb(),j.Tb(),j.Pb(10,"br"),j.Pb(11,"br"),j.Ub(12,"button",62),j.cc("click",(function(){j.Bc(t);const e=j.yc(7),i=j.gc(4);return i.dataExport(i.dataFile,"gdrive",e.value)})),j.Pb(13,"i",63),j.Lc(14,"Google Drive "),j.Tb(),j.Tb(),j.Tb()}}function dt(t,e){1&t&&(j.Ub(0,"span"),j.Lc(1,"Loading the data ... "),j.Pb(2,"i",64),j.Tb())}function gt(t,e){if(1&t&&(j.Ub(0,"div"),j.Pb(1,"img",65),j.Tb()),2&t){const t=j.gc(4);j.Cb(1),j.nc("src","./data/api/dataFile/"+t.dataFile.id+"/view",j.Ec)}}function ft(t,e){if(1&t&&(j.Ub(0,"div",19),j.Pb(1,"br"),j.Jc(2,bt,15,0,"div",9),j.Pb(3,"br"),j.Jc(4,dt,3,0,"span",9),j.Pb(5,"hr"),j.Jc(6,gt,2,1,"div",9),j.Tb()),2&t){const t=j.gc(3);j.Cb(2),j.nc("ngIf","csv"==t.dataFile.format&&t._viewControls.showExportAndShare),j.Cb(2),j.nc("ngIf",t._viewControls.isDataLoading),j.Cb(2),j.nc("ngIf",t.isImage)}}function ht(t,e){if(1&t&&(j.Ub(0,"span",83),j.Lc(1),j.Tb()),2&t){const t=e.$implicit;j.Cb(1),j.Mc(t)}}function ut(t,e){if(1&t){const t=j.Vb();j.Ub(0,"tr"),j.Ub(1,"td"),j.Ub(2,"a",2),j.Lc(3),j.Tb(),j.Tb(),j.Ub(4,"td"),j.Ub(5,"span",77),j.Lc(6),j.Tb(),j.Tb(),j.Ub(7,"td"),j.Jc(8,ht,2,1,"span",78),j.Tb(),j.Ub(9,"td"),j.Ub(10,"button",79),j.cc("click",(function(){j.Bc(t);const i=e.$implicit;return j.gc(5).onUnTrackFile(i)})),j.Ub(11,"span",80),j.Pb(12,"i",81),j.Pb(13,"i",82),j.Tb(),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=e.$implicit;j.Cb(2),j.nc("routerLink",j.rc(4,Y,t.id)),j.Cb(1),j.Mc(t.name),j.Cb(3),j.Mc(t.format),j.Cb(2),j.nc("ngForOf",t.tags)}}function pt(t,e){if(1&t&&(j.Ub(0,"span"),j.Ub(1,"div",74),j.Ub(2,"table",75),j.Ub(3,"thead"),j.Ub(4,"tr"),j.Ub(5,"th"),j.Lc(6,"Name"),j.Tb(),j.Ub(7,"th"),j.Lc(8,"Format"),j.Tb(),j.Ub(9,"th"),j.Lc(10,"Tags"),j.Tb(),j.Pb(11,"th"),j.Tb(),j.Tb(),j.Ub(12,"tbody"),j.Jc(13,ut,14,6,"ng-template",76),j.Tb(),j.Tb(),j.Tb(),j.Tb()),2&t){const t=j.gc(4);j.Cb(13),j.nc("ngForOf",t.trackingFiles)("ngForTrackBy",t.trackByDataFile)}}function mt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-tree-node",84),j.Ub(1,"li",85),j.Pb(2,"button",86),j.Ub(3,"mat-checkbox",87),j.cc("change",(function(){j.Bc(t);const i=e.$implicit;return j.gc(4).onTrackFileChange(i)})),j.Pb(4,"i",88),j.Ub(5,"span",89),j.Lc(6),j.Tb(),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=e.$implicit;j.Cb(3),j.nc("checked",t.state.selected),j.Cb(2),j.Ic("font-weight",t.state.highlighted?800:400),j.Cb(1),j.Mc(t.text)}}function Ct(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-nested-tree-node"),j.Ub(1,"li"),j.Ub(2,"div",85),j.Ub(3,"button",90),j.cc("click",(function(){j.Bc(t);const i=e.$implicit;return j.gc(4).toggleFiles(i)})),j.Ub(4,"mat-icon",91),j.Lc(5),j.Tb(),j.Tb(),j.Ub(6,"mat-checkbox",92),j.cc("change",(function(){j.Bc(t);const i=e.$implicit;return j.gc(4).onTrackFileChange(i)})),j.Pb(7,"i",93),j.Ub(8,"span",94),j.Lc(9),j.Tb(),j.Tb(),j.Tb(),j.Ub(10,"ul"),j.Qb(11,95),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=e.$implicit,i=j.gc(4);j.Cb(3),j.Db("aria-label","toggle "+t.text),j.Cb(2),j.Nc(" ",i.nestedTreeControl.isExpanded(t)?"expand_more":"chevron_right"," "),j.Cb(1),j.nc("checked",t.state.selected)("indeterminate",!t.state.selected&&t.state.highlighted),j.Cb(2),j.Ic("font-weight",t.state.highlighted?800:400),j.Cb(1),j.Mc(t.text),j.Cb(1),j.Fb("example-tree-invisible",!i.nestedTreeControl.isExpanded(t))}}const Tt=function(){return["/page"]},Ft=function(t){return{datafile:t,static:"true"}},vt=function(t){return["/data","api","dataFile",t,"static"]};function Ut(t,e){if(1&t&&(j.Ub(0,"div",19),j.Ub(1,"div",66),j.Ub(2,"h4"),j.Lc(3,"Tracked file(s)"),j.Tb(),j.Jc(4,pt,14,2,"span",9),j.Tb(),j.Ub(5,"div",67),j.Ub(6,"h4"),j.Ub(7,"a",68),j.Lc(8,"Contained files"),j.Tb(),j.Ub(9,"a",69),j.Pb(10,"i",70),j.Tb(),j.Tb(),j.Ub(11,"mat-tree",71),j.Jc(12,mt,7,4,"mat-tree-node",72),j.Jc(13,Ct,12,9,"mat-nested-tree-node",73),j.Tb(),j.Tb(),j.Tb()),2&t){const t=j.gc(3);j.Cb(4),j.nc("ngIf",t.currentProject&&t.dataFile),j.Cb(3),j.nc("routerLink",j.qc(7,Tt))("queryParams",j.rc(8,Ft,t.dataFile.id)),j.Cb(2),j.nc("routerLink",j.rc(10,vt,t.dataFile.id)),j.Cb(2),j.nc("dataSource",t.nestedDataSource)("treeControl",t.nestedTreeControl),j.Cb(2),j.nc("matTreeNodeDefWhen",t.hasChildrenNodes)}}function wt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div"),j.Ub(1,"div",19),j.Ub(2,"div",20),j.Ub(3,"strong"),j.Lc(4,"Name"),j.Tb(),j.Tb(),j.Ub(5,"div",21),j.cc("dblclick",(function(){return j.Bc(t),j.gc(2).isEditing=!0})),j.Jc(6,W,7,3,"p",9),j.Jc(7,X,12,5,"ng-container",9),j.Tb(),j.Tb(),j.Ub(8,"div",19),j.Ub(9,"div",20),j.Ub(10,"strong"),j.Lc(11,"Description"),j.Tb(),j.Tb(),j.Ub(12,"div",22),j.Ub(13,"div",23),j.Ub(14,"p",24),j.Lc(15),j.Ub(16,"i",25),j.cc("click",(function(){return j.Bc(t),j.gc(2).isEditing=!0})),j.Tb(),j.Tb(),j.Tb(),j.Jc(17,Z,4,2,"mat-form-field",26),j.Tb(),j.Tb(),j.Ub(18,"div",27),j.Ub(19,"div",20),j.Ub(20,"strong"),j.Lc(21,"Owner"),j.Tb(),j.Tb(),j.Ub(22,"div",22),j.Ub(23,"span"),j.Lc(24),j.Tb(),j.Tb(),j.Tb(),j.Ub(25,"div",19),j.Ub(26,"div",20),j.Ub(27,"strong"),j.Lc(28,"Creation"),j.Tb(),j.Tb(),j.Ub(29,"div",22),j.Ub(30,"p"),j.Lc(31),j.Tb(),j.Tb(),j.Tb(),j.Ub(32,"div",19),j.Ub(33,"div",20),j.Ub(34,"strong"),j.Lc(35,"Format"),j.Tb(),j.Tb(),j.Ub(36,"div",22),j.Jc(37,tt,2,5,"span",28),j.Jc(38,et,1,0,"i",29),j.Jc(39,nt,3,2,"mat-form-field",9),j.Tb(),j.Tb(),j.Ub(40,"div",30),j.Ub(41,"div",20),j.Ub(42,"strong"),j.Lc(43,"Tags"),j.Tb(),j.Tb(),j.Ub(44,"div",22),j.Jc(45,at,1,4,"bdp-tag-input",31),j.Tb(),j.Tb(),j.Ub(46,"div",30),j.Ub(47,"div",20),j.Ub(48,"strong"),j.Lc(49,"Server path"),j.Tb(),j.Tb(),j.Ub(50,"div",22),j.Ub(51,"button",32),j.cc("click",(function(){return j.Bc(t),j.gc(2).copyFilePath()})),j.Pb(52,"i",33),j.Tb(),j.Ub(53,"small",34),j.Lc(54),j.Tb(),j.Tb(),j.Tb(),j.Jc(55,ct,9,4,"div",35),j.Jc(56,lt,13,3,"div",35),j.Jc(57,ft,7,3,"div",36),j.Pb(58,"br"),j.Pb(59,"hr"),j.Jc(60,Ut,14,12,"div",36),j.Tb()}if(2&t){const t=j.gc(2);j.Cb(6),j.nc("ngIf",!t.isEditing),j.Cb(1),j.nc("ngIf",t.isEditing),j.Cb(6),j.nc("hidden",t.isEditing),j.Cb(2),j.Nc("",(null==t.dataFile?null:t.dataFile.desc)||"None."," "),j.Cb(2),j.nc("ngIf",t.isEditing),j.Cb(7),j.Mc(t.dataFile.owner?t.dataFile.owner.name:"Unknown"),j.Cb(7),j.Mc(null==t.dataFile||null==t.dataFile.createdAt?null:t.dataFile.createdAt.calendar()),j.Cb(6),j.nc("ngIf",!t.isEditing||t.currentUser.auths.bdp<2||"Folder"===t.dataFile.format),j.Cb(1),j.nc("ngIf",!t.isEditing&&t.currentUser.auths.bdp>=2&&"Folder"!==t.dataFile.format),j.Cb(1),j.nc("ngIf",t.isEditing&&t.currentUser.auths.bdp>=2&&"Folder"!==t.dataFile.format),j.Cb(6),j.nc("ngIf",t.dataFile&&t.currentProject),j.Cb(9),j.Mc(t.dataFile.realPath||t.dataFile.path),j.Cb(1),j.nc("ngIf",t.dataFile.parent&&t.currentFolder),j.Cb(1),j.nc("ngIf",!t.dataFile.parent&&"Folder"!==t.dataFile.format&&t._viewControls.showMoveToFolder),j.Cb(1),j.nc("ngIf","Folder"!==t.dataFile.format),j.Cb(3),j.nc("ngIf","Folder"==t.dataFile.format)}}function kt(t,e){1&t&&j.Pb(0,"div",96)}function xt(t,e){if(1&t&&(j.Ub(0,"div",17),j.Jc(1,wt,61,16,"div",9),j.Jc(2,kt,1,0,"div",18),j.Tb()),2&t){const t=j.gc();j.Cb(1),j.nc("ngIf",!t.isLoading),j.Cb(1),j.nc("ngIf",t.isDeleting)}}function Pt(t,e){1&t&&j.Pb(0,"i",109)}function Lt(t,e){1&t&&j.Pb(0,"i",110)}const Dt=function(t,e){return{"fa-edit":t,"fa-save":e}};function It(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",98),j.cc("click",(function(){return j.Bc(t),j.gc(2).onSave()})),j.Pb(1,"i",111),j.Ub(2,"span",105),j.Lc(3),j.Tb(),j.Ub(4,"span",102),j.Lc(5,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Fb("active",t.isEditing),j.Cb(1),j.nc("ngClass",j.sc(6,Dt,!t.isEditing,t.isEditing)),j.Cb(1),j.Fb("active",t.showRightButtonContent||t.isEditing),j.Cb(1),j.Mc(t.isEditing?"Save":"Edit")}}function jt(t,e){if(1&t){const t=j.Vb();j.Sb(0),j.Ub(1,"a",98),j.cc("click",(function(){return j.Bc(t),j.gc(2).importFileDialog()})),j.Pb(2,"i",112),j.Ub(3,"span",105),j.Lc(4,"Import files"),j.Tb(),j.Ub(5,"span",102),j.Lc(6,"\u276f"),j.Tb(),j.Tb(),j.Pb(7,"br"),j.Rb()}if(2&t){const t=j.gc(2);j.Cb(1),j.Fb("active",!!t._viewControls.showCreateFolder),j.Cb(2),j.Fb("active",t.showRightButtonContent||t._viewControls.showCreateFolder)}}function St(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",98),j.cc("click",(function(){j.Bc(t);const e=j.gc(2);return e.deleteDataFileDialog(e.dataFile)})),j.Pb(1,"i",113),j.Ub(2,"span",105),j.Lc(3,"Delete"),j.Tb(),j.Ub(4,"span",102),j.Lc(5,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Cb(2),j.Fb("active",t.showRightButtonContent)}}function yt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",98),j.cc("click",(function(){j.Bc(t);const e=j.gc(2);return e._viewControls.showMoveToFolder=!e._viewControls.showMoveToFolder})),j.Ub(1,"span",114),j.Pb(2,"i",115),j.Pb(3,"i",116),j.Tb(),j.Ub(4,"span",105),j.Lc(5,"Move to Folder"),j.Tb(),j.Ub(6,"span",102),j.Lc(7,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Fb("active",t._viewControls.showMoveToFolder),j.Cb(4),j.Fb("active",t.showRightButtonContent||t._viewControls.showMoveToFolder)}}function _t(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",98),j.cc("click",(function(){j.Bc(t);const e=j.gc(2);return e._viewControls.showExportAndShare=!e._viewControls.showExportAndShare})),j.Pb(1,"i",117),j.Ub(2,"span",105),j.Lc(3,"Export"),j.Tb(),j.Ub(4,"span",102),j.Lc(5,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Fb("active",t._viewControls.showExportAndShare),j.Cb(2),j.Fb("active",t.showRightButtonContent||t._viewControls.showExportAndShare)}}const Mt=function(t){return{datafile:t}};function Bt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",97),j.Ub(1,"a",98),j.cc("click",(function(){j.Bc(t);const e=j.gc();return e.showRightButtonContent=!e.showRightButtonContent})),j.Jc(2,Pt,1,0,"i",99),j.Jc(3,Lt,1,0,"i",100),j.Ub(4,"span",101),j.Lc(5,"MENU"),j.Tb(),j.Ub(6,"span",102),j.Lc(7,"\u276f"),j.Tb(),j.Tb(),j.Pb(8,"br"),j.Jc(9,It,6,9,"a",103),j.Pb(10,"br"),j.Jc(11,jt,8,4,"ng-container",9),j.Ub(12,"a",98),j.cc("click",(function(){return j.Bc(t),j.gc().onDownloadBtn()})),j.Pb(13,"i",104),j.Ub(14,"span",105),j.Lc(15,"Download"),j.Tb(),j.Ub(16,"span",102),j.Lc(17,"\u276f"),j.Tb(),j.Tb(),j.Pb(18,"br"),j.Jc(19,St,6,2,"a",106),j.Pb(20,"br"),j.Ub(21,"a",107),j.Pb(22,"i",108),j.Ub(23,"span",105),j.Lc(24,"File Page"),j.Tb(),j.Ub(25,"span",102),j.Lc(26,"\u276f"),j.Tb(),j.Tb(),j.Pb(27,"br"),j.Jc(28,yt,8,4,"a",103),j.Pb(29,"br"),j.Jc(30,_t,6,4,"a",103),j.Pb(31,"br"),j.Tb()}if(2&t){const t=j.gc();j.nc("@rightButtonState",t.showRightButtonContent?"active":"inactive"),j.Cb(2),j.nc("ngIf",t.showRightButtonContent),j.Cb(1),j.nc("ngIf",!t.showRightButtonContent),j.Cb(1),j.Fb("active",t.showRightButtonContent),j.Cb(5),j.nc("ngIf",!t.dataFile.readOnly),j.Cb(2),j.nc("ngIf",t.currentProject.privilege.canAddFile&&"Folder"===t.dataFile.format),j.Cb(3),j.Fb("active",t.showRightButtonContent),j.Cb(5),j.nc("ngIf",!t.dataFile.readOnly),j.Cb(2),j.nc("routerLink",j.qc(16,Tt))("queryParams",j.rc(17,Mt,t.dataFile.id)),j.Cb(2),j.Fb("active",t.showRightButtonContent),j.Cb(5),j.nc("ngIf","Folder"!==t.dataFile.format&&!t.dataFile.parent),j.Cb(2),j.nc("ngIf","csv"==t.dataFile.format)}}const Jt=function(){return["/home"]},Et=function(){return["/project/list"]};let Ot=(()=>{class t{constructor(t,e,i,n,a,c,s,o){this.router=t,this.route=e,this.accountService=i,this.projectService=n,this.dataService=a,this.dialogRef=c,this.systemService=s,this.taskService=o,this.separatorKeysCodes=[P.g,P.c]}ngOnInit(){this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.textToBeTag="",this.validTags=[],this.tagInputValue="",this.filteredTags=[],this.pathToName={},this.childrenNodes=new D.a([]),this.isLoading=!0,this.isEditing=!1,this.isDeleting=!1,this.showRightButtonContent=!1,this.features=[],this._subs=[],this.tasks=[],this.hintTags=[],this.currentProject=void 0,this._viewControls={isDataLoading:!1,viewMode:"",showMoveToFolder:!1,showExportAndShare:!1,moveToDataFileID:"",fileTreeOption:{},confirmDelete:""},this._subs.push(this.taskService.taskList$.subscribe(t=>{t&&(this.tasks=Object(w.a)(t,[t=>t.name],["asc"]),this.validTags=this.getValidTags(t))})),this._subs.push(this.accountService.currentUser$.subscribe(t=>this.currentUser=t)),this._subs.push(this.dataService.incomingData$.subscribe(t=>this.resultData=t.data)),this._subs.push(this.projectService.currentProject$.subscribe(t=>{t&&(t&&!this.currentProject||t.id===this.currentProject.id)&&(this.currentProject=t,this.allowedFormats=[...new Set([].concat.apply([],this.currentProject.packages.map(t=>t.allowedFormats)))].map(t=>t.toString()),this.updateChildrenNodes(),t.packages&&this.taskService.loadTasks(t.packages.map(t=>t.id)))})),this.route.queryParamMap.subscribe(t=>{this.isEditing="1"===t.get("edit")}),this.route.paramMap.pipe(Object(L.a)(t=>{const e=t.get("dataId");return this.isLoading=!0,this.resultData=void 0,this.dataFile=void 0,this._viewControls.viewMode="",e?this.projectService.loadDataFileInfo(e):Object(I.a)({errors:[],success:null})})).subscribe(t=>{this.dataFile=t.success,this._viewControls.showMoveToFolder=!1,this.isLoading=!1,this.resultData=void 0,this.dataFile&&"Folder"===this.dataFile.format&&this.listFiles()}),this._subs.push(this.systemService.sysInfo$.subscribe(t=>{this.sysConfig=t,t&&(this.recaptchaKey=t.reCaptchaSiteKey)})),this.nestedTreeControl=new U.k(t=>t.children),this.nestedDataSource=new d.d,this.childrenNodes.subscribe(t=>this.nestedDataSource.data=t)}getValidTags(t){const e={};return t.forEach(t=>{const i=t.arguments.filter(t=>"inFile"===t.type||"outFile"===t.type).map(t=>t.tags);[].concat.apply([],i).forEach(t=>{e[t]=1})}),Object.keys(e)}loadData(){let t;"csv"===this.dataFile.format?t="table":"json"===this.dataFile.format&&(t="json"),this.dataService.getData(this.dataFile.id,t,!1)}get isImage(){return!!this.dataFile&&!!this.dataFile.format.toLowerCase().match(/jpg|jpeg|gif|png/)}get folders(){return this.currentProject&&this.currentProject.dataFiles?this.currentProject.dataFiles.filter(t=>"Folder"===t.format&&!t.hidden):[]}get trackingFiles(){const t=[];if(this.currentProject&&this.dataFile){const e=this.currentProject.dataFiles;for(let i=0;i<e.length;i++)e[i].id!==this.dataFile.id&&(this.dataFile.id===e[i].parent||this.dataFile.parent&&this.dataFile.parent===e[i].parent)&&(t.push(e[i]),this.pathToName[e[i].path]=e[i].name)}return t}get currentFolder(){return this.currentProject&&this.currentProject.dataFiles?this.currentProject.dataFiles.filter(t=>"Folder"===t.format&&this.dataFile.parent===t.id)[0]:void 0}getNameByPath(t){if(this.currentProject&&this.dataFile){if(this.dataFile.path===t)return this.dataFile.name+"."+this.dataFile.format;{const e=this.trackingFiles;for(let i=0;i<e.length;i++)if(e[i].path===t||e[i].realPath===t)return e[i].name+"."+e[i].format;return""}}return""}isTracked(t){if(this.currentProject&&this.dataFile){if(this.dataFile.path===t)return 1;{const e=this.trackingFiles;for(let i=0;i<e.length;i++){if(e[i].path===t||e[i].realPath===t)return 1;if(0===e[i].path.indexOf(t))return 2}return 0}}return 0}setViewMode(t){this._viewControls.viewMode=t}trackByDataFile(t,e){return e.id}onSave(){this.isEditing?(this.isEditing=!1,this._subs.push(this.projectService.updateDataFileInfo(this.dataFile).subscribe(t=>{this.dataFile=t.success}))):this.isEditing=!0}onDownloadBtn(){this.dataService.downloadData(this.dataFile.id)}gotoProject(t){const e=this.dataFile.project;e&&this.router.navigate(["/project/"+e+"/info"])}gotoResult(){const t=this.dataFile.result;t&&this.router.navigate(["/result/"+t+"/info"])}deleteDataFileDialog(t){const e=this.dialogRef.open(x.a,{disableClose:!1});e.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">You are going to delete the data file:\'<strong>'+t.name+"</strong>'?</h4>",desc:'<span class="text-danger">This will delete the data file, name: <b>'+t.name+"</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>"}),e.afterClosed().subscribe(e=>{e&&this.deleteDataFile(t,e)})}deleteDataFile(t,e){this.isDeleting=!0,t.status=3,this._subs.push(this.projectService.deleteDataFile(t).subscribe(t=>{this.router.navigate(["/project",this.dataFile.project,"dataFile","list"])}))}dataExport(t,e,i){this.projectService.exportDataFile(t,e,i),this._viewControls.showExportAndShare=!1}moveDataFileToFolder(){(this.dataFile.parent||""!==this._viewControls.moveToDataFileID)&&this.dataFile.parent!==this._viewControls.moveToDataFileID&&this._subs.push(this.projectService.moveDataFileToFolder(this.dataFile,this._viewControls.moveToDataFileID).subscribe(t=>{this._viewControls.showMoveToFolder=!1,this._viewControls.moveToDataFileID="",t.isError||(this.dataFile=t.success)}))}onTrackFileChange(t){if("Folder"!==this.dataFile.format)return;const e=t.value.path;if(t.state.selected){t.state.selected=!1;const i=this.trackingFiles.filter(t=>t.path===e||t.realPath===e)[0];!i||i.parent!==this.dataFile.id&&this.dataFile.parent!=this.dataFile.parent||this.projectService.untrackDataFile(i).subscribe(e=>{if(e.isError)t.state.selected=!0;else{const e=this.isTracked(t.value.path);t.state.highlighted=e>0}})}else t.state.highlighted=!0,this.projectService.trackDataFile(e,this.dataFile).subscribe(e=>{e.isError||(t.state.highlighted=!0,t.state.selected=!0)})}toggleFiles(t){console.log(t.children),t.state.opened||"directory"!==t.value.type?(t.state.opened=!t.state.opened,t.state.opened?this.nestedTreeControl.expand(t):this.nestedTreeControl.collapse(t)):(t.state.loading=!0,this.projectService.listFilesInDataFolder(this.dataFile,t.value.path).subscribe(e=>{const i=e.success.map(t=>this._convertTreeData(t));t.children.next(i),t.state.loading=!1,t.state.opened=!t.state.opened,this.nestedTreeControl.expand(t)}))}_convertTreeData(t){const e=this.isTracked(t.path);if(t.state){const e=this.getNameByPath(t.value.path);return e&&console.log(e),t.state.selected=!!e,t.state.highlighted=!!e,t.text=e||t.text,t.children&&t.children.length>0&&(t.children=new D.a(t.children.map(t=>this._convertTreeData(t)))),t}return{text:t.name,value:t,children:new D.a("directory"===t.type?t.children.map(t=>this._convertTreeData(t)):[]),icon:t.children?void 0:"tree-file",state:{opened:!1,selected:1===e,disabled:!1,loading:!1,highlighted:e>0,openable:"directory"===t.type,dropAllowed:!1}}}hasChildrenNodes(t,e){return"directory"===e.value.type}listFiles(){this.projectService.listFilesInDataFolder(this.dataFile).subscribe(t=>{t.isError||this.childrenNodes.next(t.success.map(t=>this._convertTreeData(t)))})}updateChildrenNodes(){this.childrenNodes&&this.childrenNodes.next(this.childrenNodes.value.map(t=>this._convertTreeData(t)))}onTrackFile(t,e){t.preventDefault(),t.stopPropagation(),"Folder"===this.dataFile.format&&this._subs.push(this.projectService.trackDataFile(e.data.path,this.dataFile).subscribe(t=>{t.isError||this.listFiles()}))}onUnTrackFile(t){t.parent===this.dataFile.id&&this.projectService.untrackDataFile(t).subscribe(t=>{t.isError||this.updateChildrenNodes()})}onTagChanged(t){this.dataFile&&(this.dataFile.tags=t)}importFileDialog(){this.dataFile&&"Folder"===this.dataFile.format&&(this._viewControls.showCreateFolder=!0,this.dialogRef.open(k.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{allowedFormats:this.allowedFormats,project:this.currentProject,sysConfig:this.sysConfig,parentDataFileID:this.dataFile.id,tasks:this.tasks,importType:"local",currentUser:this.currentUser,tags:[]}}).afterClosed().subscribe(()=>{this._viewControls.showCreateFolder=!1}))}copyFilePath(){if(!this.dataFile)return;const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=this.dataFile.path||this.dataFile.realPath,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}ngOnDestroy(){for(let t=0;t<this._subs.length;t++)this._subs[t].unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(j.Ob(F.c),j.Ob(F.a),j.Ob(S.a),j.Ob(y.a),j.Ob(_.a),j.Ob(M.b),j.Ob(B.a),j.Ob(J.a))},t.\u0275cmp=j.Ib({type:t,selectors:[["datafile-info"]],viewQuery:function(t,e){var i;1&t&&j.Rc(N,!0),2&t&&j.xc(i=j.dc())&&(e.tagInput=i.first)},decls:21,vars:12,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["class","link",3,"click",4,"ngIf"],[3,"routerLink","click",4,"ngIf"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[4,"ngIf"],["class","container-fluid","style","height: 100%",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"link",3,"click"],[3,"routerLink","click"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid",2,"height","100%"],["class","overlay",4,"ngIf"],[1,"row"],[1,"col-md-2"],[1,"col-md-10",3,"dblclick"],[1,"col-md-10"],[3,"hidden"],[2,"word-break","break-all"],[1,"ml-1","link","fa","fa-edit","fa-lg",3,"click"],["style","width: 100%;",4,"ngIf"],[1,"row","mb-3"],["class","badge m-1",3,"badge-secondary","badge-success",4,"ngIf"],["class","ml-1 link fa fa-edit fa-lg",3,"click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[3,"packages","tasks","tags","disabled","tagChange",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"fas","fa-link","fa-fw","fa-lg","mr-2"],[1,"text-muted"],["class","row","style","margin-top: 10px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-muted",2,"white-space","pre"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matPrefix","",1,"link","fa","fa-save","fa-lg","mr-1",3,"click"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["matInput","","placeholder","Say something about this DataFile. (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],[1,"badge","m-1"],["matPrefix","","class","link fa fa-save fa-lg mr-1",3,"click",4,"ngIf"],["matInput","","type","text","maxlength","16","size","16","placeholder","The data file format",3,"ngModel","ngModelChange"],[3,"packages","tasks","tags","disabled","tagChange"],[1,"link",2,"text-decoration","underline",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngIf"],["ngFor","",3,"ngForOf"],["mat-raised-button","","type","button","color","primary",3,"click"],[3,"value"],[1,"col-md-2",2,"line-height","1.42857143"],[2,"width","350px"],["matInput","","type","text","placeholder","[Optional] Put the email to share"],["shareEmail",""],["mat-raised-button","","type","button",1,"btn","btn-danger","btn-xs",3,"click"],[1,"fab","fa-google-drive","mr-2"],[1,"fas","fa-circle-o-notch","fa-spin","fa-fw"],[1,"img-responsive",3,"src"],[1,"col-md-6",2,"border-right","1px solid black","min-height","350px"],[1,"col-md-6"],[3,"routerLink","queryParams"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"link","fas","fa-external-link-alt","fa-fx"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"container-fluid",2,"overflow","auto"],[1,"table","table-condensed"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"badge","badge-secondary"],["class","badge badge-primary",4,"ngFor","ngForOf"],["mat-icon-button","","color","accent",3,"click"],[1,"fa-stack"],[1,"fas","fa-thumbtack","fa-stack-1x"],[1,"fas","fa-slash","fa-stack-1x","text-danger"],[1,"badge","badge-primary"],["matTreeNodeToggle",""],[1,"mat-tree-node"],["mat-icon-button","","disabled",""],[3,"checked","change"],[1,"far","fa-file-alt","fa-lg","fa-fw","mr-2"],[2,"font-size","1rem"],["mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"],[1,"fas","fa-folder-open","fa-lg","fa-fw","mr-2"],[2,"font-size","1.2rem"],["matTreeNodeOutlet",""],[1,"overlay"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],["class","chi-rbtn",3,"active","click",4,"ngIf"],[1,"fas","fa-file-download","fa-fw"],[1,"chi-rbtn-content"],["class","chi-rbtn",3,"click",4,"ngIf"],[1,"chi-rbtn",3,"routerLink","queryParams"],["aria-hidden","true",1,"fas","fa-scroll","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["aria-hidden","true",1,"fas","fa-fw",3,"ngClass"],[1,"fa","fa-upload","fa-fw"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"],[1,"fa-stack","fa-2x","fa-fw",2,"font-size","9px"],[1,"far","fa-folder","fa-stack-2x","fa-fw"],[1,"fas","fa-arrow-right","fa-stack-1x","fa-fw"],[1,"fas","fa-cloud-upload-alt"]],template:function(t,e){1&t&&(j.Ub(0,"ol",0),j.Ub(1,"li",1),j.Ub(2,"a",2),j.Lc(3,"Home"),j.Tb(),j.Tb(),j.Ub(4,"li",1),j.Ub(5,"a",2),j.Lc(6,"Project List"),j.Tb(),j.Tb(),j.Ub(7,"li",1),j.Jc(8,$,2,0,"a",3),j.Jc(9,z,3,4,"a",4),j.Tb(),j.Jc(10,H,3,3,"li",5),j.Jc(11,K,5,6,"li",6),j.Jc(12,G,2,0,"li",6),j.Tb(),j.Ub(13,"div",7),j.Ub(14,"h4",8),j.Lc(15,"Data information"),j.Tb(),j.Jc(16,Q,2,0,"div",9),j.Pb(17,"br"),j.Pb(18,"br"),j.Jc(19,xt,3,2,"div",10),j.Tb(),j.Jc(20,Bt,32,19,"div",11)),2&t&&(j.Cb(2),j.nc("routerLink",j.qc(10,Jt)),j.Cb(3),j.nc("routerLink",j.qc(11,Et)),j.Cb(3),j.nc("ngIf",!e.dataFile),j.Cb(1),j.nc("ngIf",null==e.dataFile?null:e.dataFile.project),j.Cb(1),j.nc("ngIf",e.dataFile),j.Cb(1),j.nc("ngIf",e.dataFile),j.Cb(1),j.nc("ngIf",!e.dataFile),j.Cb(4),j.nc("ngIf",e.isLoading),j.Cb(3),j.nc("ngIf",e.dataFile),j.Cb(1),j.nc("ngIf",e.dataFile))},directives:[F.f,a.n,l.b,E.b,o.a,n.b,n.e,n.i,n.l,E.f,E.g,O.a,r.a,a.m,R.k,E.e,d.b,d.f,d.e,d.i,h.a,d.a,b.a,d.g,a.l],styles:[".mat-option.mat-active[_ngcontent-%COMP%]{background:rgba(0,123,255,.4)}.mat-option[_ngcontent-%COMP%]:hover{background:rgba(0,123,255,.2)}.example-tree[_ngcontent-%COMP%]{background-color:transparent;transform-origin:0 0}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.mat-tree-node[_ngcontent-%COMP%]{min-height:unset}.example-tree-invisible[_ngcontent-%COMP%]{display:none}"],data:{animation:[v.a]}}),t})();var Rt=i("MKys"),Nt=i("R0Ic"),$t=i("wd/R");function Vt(t,e){if(1&t&&(j.Ub(0,"span"),j.Lc(1),j.Tb()),2&t){const t=j.gc(2);j.Cb(1),j.Nc(": ",t.currentProject.name,"")}}const At=function(t){return["/project",t,"info"]};function zt(t,e){if(1&t&&(j.Ub(0,"a",2),j.Lc(1,"Project "),j.Jc(2,Vt,2,1,"span",14),j.Tb()),2&t){const t=j.gc();j.nc("routerLink",j.rc(2,At,t.currentProject.id)),j.Cb(2),j.nc("ngIf",t.currentProject)}}const qt=function(t){return["/project",t,"dataFile","list"]};function Ht(t,e){if(1&t&&(j.Ub(0,"li",15),j.Ub(1,"a",2),j.Lc(2,"DataFile List"),j.Tb(),j.Ub(3,"a",16),j.Pb(4,"i",17),j.Tb(),j.Tb()),2&t){const t=j.gc();j.Cb(1),j.nc("routerLink",j.rc(2,qt,t.currentProject.id)),j.Cb(2),j.nc("routerLink",j.rc(4,qt,t.currentProject.id))}}function Yt(t,e){1&t&&(j.Ub(0,"li",15),j.Lc(1,"DataFile List"),j.Tb())}function Kt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"span",52),j.cc("click",(function(){j.Bc(t);const i=e.$implicit;return j.gc(2).toggleTag(i)})),j.Lc(1),j.Tb()}if(2&t){const t=e.$implicit,i=j.gc(2);j.Fb("badge-primary",i._viewControls.filteredTags.indexOf(t)>=0)("badge-secondary",-1===i._viewControls.filteredTags.indexOf(t)),j.Cb(1),j.Mc(t)}}function Gt(t,e){1&t&&(j.Sb(0),j.Lc(1,"s"),j.Rb())}function Qt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"button",54),j.cc("click",(function(){return j.Bc(t),j.gc(3).onDownloadSelected()})),j.Pb(1,"i",58),j.Tb()}}function Wt(t,e){if(1&t){const t=j.Vb();j.Ub(0,"button",59),j.cc("click",(function(){return j.Bc(t),j.gc(3).deleteDataFileDialog()})),j.Ub(1,"mat-icon"),j.Lc(2,"delete"),j.Tb(),j.Tb()}}function Xt(t,e){if(1&t&&(j.Ub(0,"mat-option",68),j.Lc(1),j.Tb()),2&t){const t=j.gc().$implicit;j.nc("value",t),j.Cb(1),j.Nc(" ",t.name+" (owner: "+t.owner+")"," ")}}function Zt(t,e){if(1&t&&(j.Sb(0),j.Jc(1,Xt,2,2,"mat-option",67),j.Rb()),2&t){const t=e.$implicit,i=j.gc(4);j.Cb(1),j.nc("ngIf",t.id!==i.currentProject.id&&t.privilege.canAddFile)}}function te(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",19),j.Ub(1,"mat-form-field",60),j.Ub(2,"mat-select",61,62),j.Jc(4,Zt,2,1,"ng-container",63),j.Tb(),j.Tb(),j.Ub(5,"mat-checkbox",null,64),j.Lc(7,"Make a full copy"),j.Tb(),j.Ub(8,"small",65),j.Lc(9,"*If checked, the file/folder content will be copied."),j.Tb(),j.Pb(10,"br"),j.Ub(11,"button",66),j.cc("click",(function(){j.Bc(t);const e=j.yc(3),i=j.yc(6);return j.gc(3).importToProject(e.value,i.checked),e.value=void 0})),j.Lc(12,"Export files to selected project"),j.Tb(),j.Tb()}if(2&t){const t=j.yc(3),e=j.gc(3);j.Cb(4),j.nc("ngForOf",e.projectList),j.Cb(7),j.nc("disabled",!t.value)}}function ee(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",7),j.Ub(1,"div",19),j.Ub(2,"span"),j.Lc(3),j.Jc(4,Gt,2,0,"ng-container",14),j.Tb(),j.Pb(5,"i",53),j.Ub(6,"button",54),j.cc("click",(function(){return j.Bc(t),j.gc(2).onToggleFileImport()})),j.Ub(7,"mat-icon"),j.Lc(8,"move_to_inbox"),j.Tb(),j.Tb(),j.Jc(9,Qt,2,0,"button",55),j.Jc(10,Wt,3,0,"button",56),j.Tb(),j.Jc(11,te,13,2,"div",57),j.Tb()}if(2&t){const t=j.gc(2);j.Cb(3),j.Nc("Selected ",t.selectedList.length," data file"),j.Cb(1),j.nc("ngIf",t.selectedList.length>1),j.Cb(5),j.nc("ngIf",t.currentProject.privilege.canView),j.Cb(1),j.nc("ngIf",t.currentProject.privilege.canDeleteFile),j.Cb(1),j.nc("ngIf",t.toggleFileImport)}}function ie(t,e){if(1&t){const t=j.Vb();j.Ub(0,"th",69),j.Ub(1,"mat-checkbox",70,71),j.cc("change",(function(e){return j.Bc(t),j.gc(2).onAllCheckBoxChange(e)})),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Cb(1),j.nc("checked",t.selectedList.length===t.pageSize||t.selectedList.length===t.dataFiles.length)("indeterminate",t.selectedList.length>0&&t.selectedList.length<t.pageSize&&t.selectedList.length<t.dataFiles.length)}}function ne(t,e){if(1&t){const t=j.Vb();j.Ub(0,"td",72),j.Ub(1,"mat-checkbox",73),j.cc("change",(function(i){j.Bc(t);const n=e.$implicit;return j.gc(2).onFileCheckBoxChange(i,n.id)}))("click",(function(e){return j.Bc(t),e.stopPropagation()})),j.Tb(),j.Tb()}if(2&t){const t=e.$implicit,i=j.gc(2);j.Db("rowspan",i.expandedDataFiles.has(t.id)||i.isEditing?2:1),j.Cb(1),j.nc("checked",i.selectedList.indexOf(t.id)>=0)}}function ae(t,e){1&t&&(j.Ub(0,"th",74),j.Lc(1,"Prefix"),j.Tb())}function ce(t,e){if(1&t&&(j.Ub(0,"u",78),j.Lc(1),j.Tb()),2&t){const t=j.gc().$implicit;j.Cb(1),j.Mc(t.prefix)}}function se(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-form-field",60),j.Ub(1,"input",79),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc().$implicit.prefix=e})),j.Tb(),j.Tb()}if(2&t){const t=j.gc().$implicit;j.Cb(1),j.nc("ngModel",t.prefix)}}function oe(t,e){if(1&t&&(j.Ub(0,"td",75),j.Jc(1,ce,2,1,"u",76),j.Jc(2,se,2,1,"mat-form-field",77),j.Tb()),2&t){const t=j.gc(2);j.Cb(1),j.nc("ngIf",!t.isEditing),j.Cb(1),j.nc("ngIf",t.isEditing)}}function re(t,e){1&t&&(j.Ub(0,"th",74),j.Ub(1,"span",80),j.Lc(2,"Name"),j.Tb(),j.Tb())}function le(t,e){1&t&&j.Pb(0,"i",85)}const be=function(t){return["/dataFile",t,"info"]};function de(t,e){if(1&t&&(j.Sb(0),j.Ub(1,"a",2),j.Jc(2,le,1,0,"i",82),j.Lc(3),j.Tb(),j.Ub(4,"a",83),j.Pb(5,"span",84),j.Tb(),j.Rb()),2&t){const t=j.gc().$implicit;j.Cb(1),j.nc("routerLink",j.rc(4,be,t.id)),j.Cb(1),j.nc("ngIf","Folder"===t.format),j.Cb(1),j.Nc(" ",null==t?null:t.name," "),j.Cb(1),j.nc("routerLink",j.rc(6,be,t.id))}}function ge(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-form-field",60),j.Ub(1,"input",86),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc().$implicit.name=e})),j.Tb(),j.Tb()}if(2&t){const t=j.gc().$implicit;j.Cb(1),j.nc("ngModel",t.name)}}function fe(t,e){if(1&t&&(j.Ub(0,"td",81),j.Jc(1,de,6,8,"ng-container",14),j.Jc(2,ge,2,1,"mat-form-field",77),j.Tb()),2&t){const t=j.gc(2);j.Cb(1),j.nc("ngIf",!t.isEditing),j.Cb(1),j.nc("ngIf",t.isEditing)}}function he(t,e){1&t&&(j.Ub(0,"th",74),j.Lc(1,"Suffix"),j.Tb())}function ue(t,e){if(1&t&&(j.Ub(0,"u",78),j.Lc(1),j.Tb()),2&t){const t=j.gc().$implicit;j.Cb(1),j.Mc(t.suffix)}}function pe(t,e){if(1&t){const t=j.Vb();j.Ub(0,"mat-form-field",60),j.Ub(1,"input",88),j.cc("ngModelChange",(function(e){return j.Bc(t),j.gc().$implicit.suffix=e})),j.Tb(),j.Tb()}if(2&t){const t=j.gc().$implicit;j.Cb(1),j.nc("ngModel",t.suffix)}}function me(t,e){if(1&t&&(j.Ub(0,"td",87),j.Jc(1,ue,2,1,"u",76),j.Jc(2,pe,2,1,"mat-form-field",77),j.Tb()),2&t){const t=j.gc(2);j.Cb(1),j.nc("ngIf",!t.isEditing),j.Cb(1),j.nc("ngIf",t.isEditing)}}function Ce(t,e){1&t&&(j.Ub(0,"th",74),j.Lc(1,"Status"),j.Tb())}function Te(t,e){1&t&&j.Pb(0,"i",96)}function Fe(t,e){1&t&&(j.Ub(0,"p",97),j.Pb(1,"i",98),j.Tb())}function ve(t,e){1&t&&j.Pb(0,"i",99)}function Ue(t,e){1&t&&j.Pb(0,"i",100)}function we(t,e){1&t&&j.Pb(0,"i",101)}function ke(t,e){if(1&t&&(j.Ub(0,"td",89),j.Ub(1,"div",90),j.Jc(2,Te,1,0,"i",91),j.Jc(3,Fe,2,0,"p",92),j.Jc(4,ve,1,0,"i",93),j.Jc(5,Ue,1,0,"i",94),j.Jc(6,we,1,0,"i",95),j.Tb(),j.Tb()),2&t){const t=e.$implicit;j.Cb(1),j.nc("ngSwitch",null==t?null:t.status),j.Cb(1),j.nc("ngSwitchCase",0),j.Cb(1),j.nc("ngSwitchCase",1),j.Cb(1),j.nc("ngSwitchCase",2),j.Cb(1),j.nc("ngSwitchCase",3),j.Cb(1),j.nc("ngSwitchCase",4)}}function xe(t,e){1&t&&(j.Ub(0,"th",74),j.Lc(1,"Creation time"),j.Tb())}function Pe(t,e){if(1&t&&(j.Ub(0,"td",89),j.Lc(1),j.Tb()),2&t){const t=e.$implicit;j.Cb(1),j.Mc(null==t||null==t.createdAt?null:t.createdAt.format("YYYY/MM/DD HH:mm:ss"))}}function Le(t,e){1&t&&(j.Ub(0,"th",74),j.Lc(1,"Owner"),j.Tb())}function De(t,e){if(1&t&&(j.Ub(0,"td",89),j.Ub(1,"span"),j.Lc(2),j.Tb(),j.Tb()),2&t){const t=e.$implicit;j.Cb(2),j.Mc(null==t||null==t.owner?null:t.owner.name)}}function Ie(t,e){1&t&&(j.Ub(0,"th",102),j.Lc(1,"Tags"),j.Tb())}function je(t,e){if(1&t){const t=j.Vb();j.Ub(0,"td",103),j.Ub(1,"bdp-tag-input",104),j.cc("tagChange",(function(i){j.Bc(t);const n=e.$implicit;return j.gc(2).onTagChanged(i,n)}))("tagClicked",(function(e){return j.Bc(t),j.gc(2).onTagClicked(e)})),j.Tb(),j.Tb()}if(2&t){const t=e.$implicit,i=j.gc(2);j.Cb(1),j.nc("packages",i.currentProject.packages)("tasks",i.tasks)("tags",t.tags)("disabled",!i.isEditing)("highlightTags",i._viewControls.filteredTags)}}function Se(t,e){if(1&t&&(j.Ub(0,"span",114),j.Lc(1),j.Tb()),2&t){const t=e.$implicit;j.Fb("badge-primary","Folder"!==t)("badge-success","Folder"===t),j.Cb(1),j.Mc(t)}}function ye(t,e){1&t&&(j.Ub(0,"span",115),j.Lc(1,"No Tags"),j.Tb())}const _e=function(t){return{"fa-folder":t}};function Me(t,e){if(1&t&&(j.Sb(0),j.Ub(1,"tr"),j.Ub(2,"td"),j.Ub(3,"a",2),j.Pb(4,"i",109),j.Ub(5,"b"),j.Lc(6),j.Tb(),j.Tb(),j.Tb(),j.Ub(7,"td"),j.Jc(8,Se,2,5,"span",110),j.Jc(9,ye,2,0,"span",111),j.Tb(),j.Ub(10,"td",112),j.Lc(11),j.Tb(),j.Tb(),j.Ub(12,"tr"),j.Ub(13,"td",113),j.Pb(14,"span",107),j.Lc(15),j.Tb(),j.Tb(),j.Rb()),2&t){const t=e.$implicit;j.Cb(3),j.nc("routerLink",j.rc(9,be,t.id)),j.Cb(1),j.nc("ngClass",j.rc(11,_e,"Folder"===t.format)),j.Cb(1),j.Fb("text-success","Folder"===t.format),j.Cb(1),j.Mc(t.name),j.Cb(2),j.nc("ngForOf",t.tags),j.Cb(1),j.nc("ngIf",!t.tags||0===t.tags.length),j.Cb(2),j.Mc(null==t||null==t.createdAt?null:t.createdAt.format("YYYY/MM/DD HH:mm:ss")),j.Cb(4),j.Nc("Description: ",t.desc||"no descriptions","")}}function Be(t,e){if(1&t&&(j.Ub(0,"div"),j.Ub(1,"strong"),j.Pb(2,"i",107),j.Lc(3,"Contained tracked files"),j.Tb(),j.Lc(4,": "),j.Ub(5,"div",27),j.Ub(6,"table",108),j.Jc(7,Me,16,13,"ng-container",63),j.Tb(),j.Tb(),j.Tb()),2&t){const t=j.gc(2).$implicit,e=j.gc(2);j.Cb(7),j.nc("ngForOf",e.containedFiles(t.id))}}function Je(t,e){if(1&t&&(j.Ub(0,"div"),j.Ub(1,"strong"),j.Pb(2,"i",107),j.Lc(3,"Description"),j.Tb(),j.Lc(4,": "),j.Ub(5,"p"),j.Lc(6),j.Tb(),j.Jc(7,Be,8,1,"div",14),j.Tb()),2&t){const t=j.gc().$implicit;j.Cb(6),j.Mc(t.desc?t.desc:"No description"),j.Cb(1),j.nc("ngIf",t.tags.indexOf("Folder")>=0)}}function Ee(t,e){if(1&t&&(j.Ub(0,"td",105),j.Ub(1,"div",106),j.Jc(2,Je,8,2,"div",14),j.Tb(),j.Tb()),2&t){const t=e.$implicit,i=j.gc(2);j.Db("colspan",i.expandedDataFiles.has(t.id)||i.isEditing?7:8),j.Cb(1),j.nc("@detailExpand",i.expandedDataFiles.has(t.id)||i.isEditing?"expanded":"collapsed"),j.Cb(1),j.nc("ngIf",i.expandedDataFiles.has(t.id)||i.isEditing)}}function Oe(t,e){1&t&&j.Pb(0,"tr",116)}function Re(t,e){if(1&t){const t=j.Vb();j.Ub(0,"tr",117),j.cc("click",(function(){j.Bc(t);const i=e.$implicit,n=e.dataIndex;return j.gc(2).toggleRow(i.id,n)})),j.Tb()}if(2&t){const t=e.$implicit,i=j.gc(2);j.Fb("table-primary",i.expandedDataFiles.has(t.id))}}function Ne(t,e){1&t&&j.Pb(0,"tr",118)}const $e=function(){return[5,10,30,50,100,300,500]},Ve=function(){return["dataFileCheckbox","dataFilePrefix","dataFileName","dataFileSuffix","dataFileTags","dataFileStatus","dataFileCreationTime","dataFileOwner"]},Ae=function(){return["dataFileDetail"]};function ze(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",18),j.Ub(1,"div",7),j.Ub(2,"div",19),j.Ub(3,"span",20),j.Pb(4,"span",21),j.Lc(5,"Tags filter "),j.Tb(),j.Ub(6,"span",22),j.cc("click",(function(){j.Bc(t);const e=j.gc();return e._viewControls.filteredTags=e.all_possible_tags})),j.Lc(7,"All"),j.Tb(),j.Ub(8,"span",23),j.cc("click",(function(){return j.Bc(t),j.gc()._viewControls.filteredTags=[]})),j.Lc(9,"None"),j.Tb(),j.Jc(10,Kt,2,5,"span",24),j.Tb(),j.Tb(),j.Jc(11,ee,12,5,"div",25),j.Pb(12,"br"),j.Ub(13,"div",7),j.Ub(14,"div",19),j.Ub(15,"mat-paginator",26),j.cc("page",(function(e){return j.Bc(t),j.gc().onPageChange(e)})),j.Tb(),j.Ub(16,"div",27),j.Ub(17,"table",28),j.cc("matSortChange",(function(e){return j.Bc(t),j.gc().sortData(e)})),j.hc(18,"slice"),j.Sb(19,29),j.Jc(20,ie,3,2,"th",30),j.Jc(21,ne,2,2,"td",31),j.Rb(),j.Sb(22,32),j.Jc(23,ae,2,0,"th",33),j.Jc(24,oe,3,2,"td",34),j.Rb(),j.Sb(25,35),j.Jc(26,re,3,0,"th",33),j.Jc(27,fe,3,2,"td",36),j.Rb(),j.Sb(28,37),j.Jc(29,he,2,0,"th",33),j.Jc(30,me,3,2,"td",38),j.Rb(),j.Sb(31,39),j.Jc(32,Ce,2,0,"th",33),j.Jc(33,ke,7,6,"td",40),j.Rb(),j.Sb(34,41),j.Jc(35,xe,2,0,"th",42),j.Jc(36,Pe,2,1,"td",40),j.Rb(),j.Sb(37,43),j.Jc(38,Le,2,0,"th",42),j.Jc(39,De,3,1,"td",40),j.Rb(),j.Sb(40,44),j.Jc(41,Ie,2,0,"th",45),j.Jc(42,je,2,5,"td",46),j.Rb(),j.Sb(43,47),j.Jc(44,Ee,3,3,"td",48),j.Rb(),j.Jc(45,Oe,1,0,"tr",49),j.Jc(46,Re,1,2,"tr",50),j.Jc(47,Ne,1,0,"tr",51),j.Tb(),j.Tb(),j.Ub(48,"mat-paginator",26),j.cc("page",(function(e){return j.Bc(t),j.gc().onPageChange(e)})),j.Tb(),j.Tb(),j.Tb(),j.Tb()}if(2&t){const t=j.gc();j.Cb(10),j.nc("ngForOf",t.all_possible_tags),j.Cb(1),j.nc("ngIf",t.selectedList.length>0),j.Cb(4),j.nc("length",t.dataFiles.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",j.qc(18,$e)),j.Cb(2),j.nc("dataSource",j.kc(18,14,t.dataFiles,t.pageIndex*t.pageSize,(t.pageIndex+1)*t.pageSize)),j.Cb(28),j.nc("matHeaderRowDef",j.qc(19,Ve)),j.Cb(1),j.nc("matRowDefColumns",j.qc(20,Ve)),j.Cb(1),j.nc("matRowDefColumns",j.qc(21,Ae)),j.Cb(1),j.nc("length",t.dataFiles.length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",j.qc(22,$e))}}function qe(t,e){1&t&&j.Pb(0,"i",129)}function He(t,e){1&t&&j.Pb(0,"i",130)}const Ye=function(t,e){return{"fa-edit":t,"fa-save":e}};function Ke(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",120),j.cc("click",(function(){return j.Bc(t),j.gc(2).onSave()})),j.Pb(1,"i",131),j.Ub(2,"span",128),j.Lc(3),j.Tb(),j.Ub(4,"span",124),j.Lc(5,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Fb("active",t.isEditing),j.Cb(1),j.nc("ngClass",j.sc(6,Ye,!t.isEditing,t.isEditing)),j.Cb(1),j.Fb("active",t.showRightButtonContent||t.isEditing),j.Cb(1),j.Mc(t.isEditing?"Save":"Modify file info")}}function Ge(t,e){if(1&t){const t=j.Vb();j.Sb(0),j.Ub(1,"a",120),j.cc("click",(function(){return j.Bc(t),j.gc(2).onCancel()})),j.Pb(2,"i",132),j.Ub(3,"span",128),j.Lc(4,"Cancel"),j.Tb(),j.Ub(5,"span",124),j.Lc(6,"\u276f"),j.Tb(),j.Tb(),j.Pb(7,"br"),j.Rb()}if(2&t){const t=j.gc(2);j.Cb(1),j.Fb("active",t.isEditing),j.Cb(2),j.Fb("active",t.showRightButtonContent||t.isEditing)}}const Qe=function(t,e){return{"fa-arrows-alt-v":t,"fa-angle-double-up":e}};function We(t,e){if(1&t){const t=j.Vb();j.Ub(0,"a",120),j.cc("click",(function(){return j.Bc(t),j.gc(2).toggleExpansion()})),j.Pb(1,"i",131),j.Ub(2,"span",128),j.Lc(3),j.Tb(),j.Ub(4,"span",124),j.Lc(5,"\u276f"),j.Tb(),j.Tb()}if(2&t){const t=j.gc(2);j.Fb("active",t._viewControls.allExpanded),j.Cb(1),j.nc("ngClass",j.sc(6,Qe,!t._viewControls.allExpanded,t._viewControls.allExpanded)),j.Cb(1),j.Fb("active",t.showRightButtonContent),j.Cb(1),j.Mc(t._viewControls.allExpanded?"Collapse info":"Expand info")}}function Xe(t,e){if(1&t){const t=j.Vb();j.Sb(0),j.Ub(1,"a",120),j.cc("click",(function(){return j.Bc(t),j.gc(2).importFileDialog()})),j.Pb(2,"i",133),j.Ub(3,"span",128),j.Lc(4,"Import files"),j.Tb(),j.Ub(5,"span",124),j.Lc(6,"\u276f"),j.Tb(),j.Tb(),j.Pb(7,"br"),j.Rb()}if(2&t){const t=j.gc(2);j.Cb(1),j.Fb("active",!!t._viewControls.showCreateFolder),j.Cb(2),j.Fb("active",t.showRightButtonContent||t._viewControls.showCreateFolder)}}const Ze=function(t){return["/project",t,"result","list"]};function ti(t,e){if(1&t){const t=j.Vb();j.Ub(0,"div",119),j.Ub(1,"a",120),j.cc("click",(function(){j.Bc(t);const e=j.gc();return e.showRightButtonContent=!e.showRightButtonContent})),j.Jc(2,qe,1,0,"i",121),j.Jc(3,He,1,0,"i",122),j.Ub(4,"span",123),j.Lc(5,"MENU"),j.Tb(),j.Ub(6,"span",124),j.Lc(7,"\u276f"),j.Tb(),j.Tb(),j.Pb(8,"br"),j.Jc(9,Ke,6,9,"a",125),j.Pb(10,"br"),j.Jc(11,Ge,8,4,"ng-container",14),j.Jc(12,We,6,9,"a",125),j.Pb(13,"br"),j.Jc(14,Xe,8,4,"ng-container",14),j.Ub(15,"a",126),j.Pb(16,"i",127),j.Ub(17,"span",128),j.Lc(18,"Results"),j.Tb(),j.Ub(19,"span",124),j.Lc(20,"\u276f"),j.Tb(),j.Tb(),j.Pb(21,"br"),j.Tb()}if(2&t){const t=j.gc();j.nc("@rightButtonState",t.showRightButtonContent?"active":"inactive"),j.Cb(2),j.nc("ngIf",t.showRightButtonContent),j.Cb(1),j.nc("ngIf",!t.showRightButtonContent),j.Cb(1),j.Fb("active",t.showRightButtonContent),j.Cb(5),j.nc("ngIf",t.currentProject.privilege.canEditFile),j.Cb(2),j.nc("ngIf",t.currentProject.privilege.canEditFile&&t.isEditing),j.Cb(1),j.nc("ngIf",t.currentProject.privilege.canEditFile),j.Cb(2),j.nc("ngIf",t.currentProject.privilege.canAddFile),j.Cb(1),j.nc("routerLink",j.rc(12,Ze,t.currentProject.id)),j.Cb(2),j.Fb("active",t.showRightButtonContent)}}const ei=function(){return["/home"]},ii=function(){return["/project/list"]},ni=F.g.forChild([{path:"list",component:(()=>{class t{constructor(t,e,i,n,a,c,s,o){this.projectService=t,this.router=e,this.route=i,this.dialogRef=n,this.userService=a,this.systemService=c,this.taskService=s,this.dataService=o,this.pageIndex=0,this.pageSize=30,this.totalLength=0,this.tasks=[]}ngOnInit(){this.expandedDataFiles=new Set,this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs=[],this.isEditing=!1,this._dataFiles=[],this.selectedList=[],this.projectList=[],this.projectID=void 0,this.currentProject=void 0,this.showRightButtonContent=!1,this._viewControls={sortField:"createdAt",sortDirection:"desc",filteredTags:[],showFilter:!0,showCreateFolder:!1,confirmDelete:"",allExpanded:!1},this._subs.push(this.projectService.currentProject$.subscribe(t=>{this.currentProject=null,t&&setTimeout(()=>{this.currentProject=t,this._viewControls.filteredTags=this.all_possible_tags,this.allowedFormats=[...new Set([].concat.apply([],this.currentProject.packages.map(t=>t.allowedFormats)))].map(t=>t.toString()),this.taskService.loadTasks(this.currentProject.packages.map(t=>t.id)),this.dataFileTable&&this.dataFileTable.renderRows()},100)})),this.route.paramMap.subscribe(t=>{this.projectID=t.get("pid"),this.projectService.setCurrentProject(this.projectID)}),this._subs.push(this.systemService.sysInfo$.subscribe(t=>{this.sysConfig=t,t&&(this.recaptchaKey=t.reCaptchaSiteKey)})),this._subs.push(this.userService.currentUser$.subscribe(t=>this.currentUser=t)),this._subs.push(this.taskService.taskList$.subscribe(t=>{Array.isArray(t)&&(this.tasks=t)}))}getProjectList(){const t=this.projectService.searchProjectList("").subscribe(e=>{t.unsubscribe(),this.projectList=e.isError?[]:e.success})}importToProject(t,e){const i=this.projectService.importFilesToProject(t.id,this.selectedList,e).subscribe(t=>i.unsubscribe())}toggleRow(t,e){this.isEditing||(this.expandedDataFiles.has(t)?this.expandedDataFiles.delete(t):this.expandedDataFiles.add(t))}displayProjectListFn(t){return t&&t.name?t.name:""}onToggleFileImport(){this.toggleFileImport=!this.toggleFileImport,this.toggleFileImport&&this.getProjectList()}get all_possible_tags(){if(this.currentProject){const t={},e=this.currentProject.dataFiles;if(!e)return[];for(let i=0;i<e.length;i++){const n=e[i];if(!n.hidden&&!n.parent){const e=n.tags;if(e)for(let i=0;i<e.length;i++)t[e[i]]++}}return Object.keys(t)}return[]}toggleTag(t){const e=this._viewControls.filteredTags.length!==this.all_possible_tags.length,i=this._viewControls.filteredTags.indexOf(t);-1===i?this._viewControls.filteredTags.push(t):e?1===this._viewControls.filteredTags.length?this._viewControls.filteredTags=this.all_possible_tags:this._viewControls.filteredTags.splice(i,1):this._viewControls.filteredTags=[t]}get dataFiles(){if(this.currentProject&&this.currentProject.dataFiles){const t=this._viewControls.filteredTags;let e=this.currentProject.dataFiles.slice(0).filter(e=>{for(let i=0;i<t.length;i++)if(e.tags&&e.tags.indexOf(t[i])>=0)return!0;return!e.tags||0===e.tags.length});const i=this._viewControls.sortField;return"createdAt"===i?(e.sort((t,e)=>$t(t[i]).isBefore(e[i])?-1:1),"desc"===this._viewControls.sortDirection&&e.reverse()):e="owner"===i?Object(w.a)(e,[t=>t.owner&&t.owner.name?t.owner.name:""],this._viewControls.sortDirection):Object(w.a)(e,[t=>t[i]],this._viewControls.sortDirection),e.filter(t=>!t.hidden&&!t.parent)}return[]}containedFiles(t){return this.currentProject.dataFiles.filter(e=>e.parent===t)}sortColumn(t){this._viewControls.sortField===t?this._viewControls.sortDirection="desc"===this._viewControls.sortDirection?"asc":"desc":(this._viewControls.sortField=t,this._viewControls.sortDirection="asc")}onFocusedDataFile(t){this.focusedDataFile=t}deleteDataFile(t,e){t&&(t.status=2);const i=this.projectService.deleteDataFile(t).subscribe(t=>{i.unsubscribe()})}batchDeleteFiles(t){const e=[];this.dataFiles.forEach(i=>{t.indexOf(i.id)>=0&&(i.status=2,e.push(i.id))});const i=this.projectService.batchDeleteDataFile(e,this.currentProject.id).subscribe(t=>{this.selectedList=[],i.unsubscribe()})}deleteDataFileDialog(t){const e=this.dialogRef.open(x.a,{disableClose:!1});void 0!==t?(e.componentInstance.setOptions({title:`<h4 class="modal-title text-danger">Are you sure you want to delete the data file <strong>${t.name}</strong>?</h4>`,desc:`<span class="text-danger">This will delete the data file, name: <b>${t.name}</b>`+"<br>This cannot be undone. Make sure this is something you really want to do!</span><br>"}),e.afterClosed().subscribe(e=>{e&&this.deleteDataFile(t,e)})):(e.componentInstance.setOptions({title:`<h4 class="text-danger">You are going to remove ${this.selectedList.length}  data files</h4>`,desc:'<span class="text-danger">These records will be deleted and this cannot be undone. Make sure this is something you really want to do!</span><br>'}),e.afterClosed().subscribe(t=>{t&&this.batchDeleteFiles(this.selectedList)}))}gotoDataFile(t,e){this.router.navigate(["/dataFile",t.id,"info"],e?{queryParams:{edit:1}}:{})}goToFileUploadPage(){this.router.navigate(["/project",this.currentProject.id,"fileImport"])}onPageChange(t){this.pageIndex=t.pageIndex,this.pageSize=t.pageSize,this.selectedList=[]}onAllCheckBoxChange(t){this.selectedList=t.checked?this.dataFiles.slice(this.pageIndex*this.pageSize,(this.pageIndex+1)*this.pageSize).map(t=>t.id):[]}onFileCheckBoxChange(t,e){if(t.checked&&this.selectedList.indexOf(e)<0)this.selectedList.push(e);else if(!t.checked){const t=this.selectedList.indexOf(e);t>=0&&this.selectedList.splice(t,1)}}onDownloadSelected(){this.dataService.downloadFiles(this.projectID,this.selectedList)}importFileDialog(){this._viewControls.showCreateFolder=!0,this.dialogRef.open(k.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{allowedFormats:this.allowedFormats,project:this.currentProject,sysConfig:this.sysConfig,tasks:this.tasks,importType:"local",currentUser:this.currentUser,tags:[]}}).afterClosed().subscribe(()=>this._viewControls.showCreateFolder=!1)}sortData(t){let e="createdAt";switch(t.active){case"dataFileName":e="name";break;case"dataFilePrefix":e="prefix";break;case"dataFileSuffix":e="suffix";break;case"dataFileStatus":e="status";break;case"dataFileCreationTime":e="createdAt";break;case"dataFileOwner":e="owner"}t.direction?(this._viewControls.sortDirection=t.direction,this._viewControls.sortField=e):(this._viewControls.sortDirection="desc",this._viewControls.sortField="createdAt")}onTagClicked(t){console.log(t),this.toggleTag(t)}onTagChanged(t,e){this.isEditing&&(e.tags=t)}toggleExpansion(){if(this._viewControls.allExpanded)this.expandedDataFiles.clear(),this._viewControls.allExpanded=!1;else{for(let t=0;t<this.dataFiles.length;t++)this.dataFiles[t].id&&this.expandedDataFiles.add(this.dataFiles[t].id);this._viewControls.allExpanded=!0}}onSave(){if(this.isEditing){this.isEditing=!1;const t=this.projectService.updateDataFiles(this.dataFiles).subscribe(e=>{t.unsubscribe()})}else this.isEditing=!0}onCancel(){this.isEditing=!1,this.projectService.setCurrentProject(this.projectID,!0)}ngOnDestroy(){for(let t=0;t<this._subs.length;t++)this._subs[t].unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(j.Ob(y.a),j.Ob(F.c),j.Ob(F.a),j.Ob(M.b),j.Ob(S.a),j.Ob(B.a),j.Ob(J.a),j.Ob(_.a))},t.\u0275cmp=j.Ib({type:t,selectors:[["project-datafile-list"]],viewQuery:function(t,e){var i;1&t&&j.Rc(g.n,!0),2&t&&j.xc(i=j.dc())&&(e.dataFileTable=i.first)},decls:43,vars:13,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"row"],[1,"col-md-2"],[1,"col-md-9"],[2,"text-indent","36px"],[1,"my-3"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid"],[1,"col-12"],[2,"float","left"],[1,"fas","fa-filter"],[1,"badge","link","badge-success",2,"float","left",3,"click"],[1,"badge","link","badge-danger",2,"float","left",3,"click"],["class","badge link","style","float:left;",3,"badge-primary","badge-secondary","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[2,"background-color","rgba(255,255, 255, 0.7)","border","thin solid darkgray",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-hover","table-striped","table-bordered",3,"dataSource","matSortChange"],["matColumnDef","dataFileCheckbox"],["mat-header-cell","","class","align-middle text-center","style","padding: 2px;",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center","style","padding: 2px;",4,"matCellDef"],["matColumnDef","dataFilePrefix"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right px-2",4,"matCellDef"],["matColumnDef","dataFileName"],["mat-cell","","class","align-middle text-center px-2",4,"matCellDef"],["matColumnDef","dataFileSuffix"],["mat-cell","","class","align-middle text-left px-2",4,"matCellDef"],["matColumnDef","dataFileStatus"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","dataFileCreationTime"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-center",4,"matHeaderCellDef"],["matColumnDef","dataFileOwner"],["matColumnDef","dataFileTags"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left p-3",4,"matCellDef"],["matColumnDef","dataFileDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","datafile-detail-row",4,"matRowDef","matRowDefColumns"],[1,"badge","link",2,"float","left",3,"click"],[1,"fa","fa-angle-double-right","ml-4","fa-lg"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"fas","fa-download","fa-lg","fa-fw"],["mat-icon-button","","color","warn",3,"click"],[2,"width","100%"],["placeholder","select a project to import"],["projectSelect",""],[4,"ngFor","ngForOf"],["isCopying",""],[1,"text-muted","m1-3"],["mat-raised-button","",3,"disabled","click"],[3,"value",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"align-middle","text-center",2,"padding","2px"],[3,"checked","indeterminate","change"],["allCheckBox",""],["mat-cell","",1,"align-middle","text-center",2,"padding","2px"],["color","primary",3,"checked","change","click"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-right","px-2"],["class","text-muted",4,"ngIf"],["style","width: 100%;",4,"ngIf"],[1,"text-muted"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix",3,"ngModel","ngModelChange"],[2,"align-self","center"],["mat-cell","",1,"align-middle","text-center","px-2"],["class","fas fa-folder mr-2",4,"ngIf"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],[1,"fas","fa-folder","mr-2"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["mat-cell","",1,"align-middle","text-left","px-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix",3,"ngModel","ngModelChange"],["mat-cell","",1,"align-middle","text-center"],[3,"ngSwitch"],["class","fas fa-circle-notch fa-spin text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","fas fa-hourglass-half text-secondary",4,"ngSwitchCase"],["class","fas fa-trash-alt fa-fw text-warning",4,"ngSwitchCase"],["class","fas fa-times fa-fw text-danger",4,"ngSwitchCase"],[1,"fas","fa-circle-notch","fa-spin","text-primary"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"fas","fa-hourglass-half","text-secondary"],[1,"fas","fa-trash-alt","fa-fw","text-warning"],[1,"fas","fa-times","fa-fw","text-danger"],["mat-header-cell","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-left","p-3"],[3,"packages","tasks","tags","disabled","highlightTags","tagChange","tagClicked"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"datafile-details","my-3"],[1,"fas","fa-angle-right","mr-2"],[1,"table","table-sm","table-hover","table-bordered","table-striped"],[1,"fa","text-success",2,"font-size","14px",3,"ngClass"],["class","badge link",3,"badge-primary","badge-success",4,"ngFor","ngForOf"],["class","badge badge-warning",4,"ngIf"],[1,"text-center"],["colspan","3"],[1,"badge","link"],[1,"badge","badge-warning"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"datafile-detail-row"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],["class","chi-rbtn",3,"active","click",4,"ngIf"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-folder-open"],[1,"chi-rbtn-content"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["aria-hidden","true",1,"fas","fa-fw",3,"ngClass"],["aria-hidden","true",1,"far","fa-fw","fa-window-close"],[1,"fa","fa-upload","fa-fw"]],template:function(t,e){1&t&&(j.Ub(0,"ol",0),j.Ub(1,"li",1),j.Ub(2,"a",2),j.Lc(3,"Home"),j.Tb(),j.Tb(),j.Ub(4,"li",1),j.Ub(5,"a",2),j.Lc(6,"Project List"),j.Tb(),j.Tb(),j.Ub(7,"li",1),j.Jc(8,zt,3,4,"a",3),j.Tb(),j.Jc(9,Ht,5,6,"li",4),j.Jc(10,Yt,2,0,"li",4),j.Tb(),j.Ub(11,"div",5),j.Ub(12,"h3",6),j.Lc(13,"Data Files in the Project "),j.Tb(),j.Pb(14,"br"),j.Pb(15,"br"),j.Ub(16,"div",7),j.Ub(17,"div",8),j.Ub(18,"strong"),j.Lc(19,"Project name"),j.Tb(),j.Tb(),j.Ub(20,"div",9),j.Ub(21,"span",10),j.Lc(22),j.Tb(),j.Tb(),j.Tb(),j.Pb(23,"br"),j.Ub(24,"div",7),j.Ub(25,"div",8),j.Ub(26,"strong"),j.Lc(27,"Project description"),j.Tb(),j.Tb(),j.Ub(28,"div",9),j.Ub(29,"span",10),j.Lc(30),j.Tb(),j.Tb(),j.Tb(),j.Pb(31,"br"),j.Ub(32,"div",7),j.Ub(33,"div",8),j.Ub(34,"strong"),j.Lc(35,"Data file number"),j.Tb(),j.Tb(),j.Ub(36,"div",9),j.Ub(37,"span",10),j.Lc(38),j.Tb(),j.Tb(),j.Tb(),j.Pb(39,"br"),j.Pb(40,"mat-divider",11),j.Jc(41,ze,49,23,"div",12),j.Tb(),j.Jc(42,ti,22,14,"div",13)),2&t&&(j.Cb(2),j.nc("routerLink",j.qc(11,ei)),j.Cb(3),j.nc("routerLink",j.qc(12,ii)),j.Cb(3),j.nc("ngIf",e.currentProject),j.Cb(1),j.nc("ngIf",e.currentProject),j.Cb(1),j.nc("ngIf",!e.currentProject),j.Cb(12),j.Mc(null!=e.currentProject&&e.currentProject.name?null==e.currentProject?null:e.currentProject.name:"Unnamed"),j.Cb(8),j.Mc(null!=e.currentProject&&e.currentProject.desc?null==e.currentProject?null:e.currentProject.desc:"No description"),j.Cb(8),j.Oc("",null==e.currentProject?null:e.currentProject.dataFileNumber," record(s), (",null==e.currentProject?null:e.currentProject.dataFiles.length," including intermediate files)"),j.Cb(3),j.nc("ngIf",e.currentProject),j.Cb(1),j.nc("ngIf",e.currentProject))},directives:[F.f,a.n,u.a,a.m,f.a,g.n,p.a,g.c,g.i,g.b,g.k,g.m,l.b,b.a,E.b,r.a,h.a,R.k,g.h,g.a,p.b,o.a,n.b,n.e,n.i,n.l,a.p,a.q,O.a,a.l,g.j,g.l],pipes:[a.v],styles:[".badge[_ngcontent-%COMP%]{margin:2px}.datafile-details[_ngcontent-%COMP%]{overflow:hidden;display:none}tr.datafile-detail-row[_ngcontent-%COMP%]{height:0;max-height:0}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[v.a,Object(Nt.n)("detailExpand",[Object(Nt.k)("collapsed",Object(Nt.l)({height:"0px",minHeight:"0",display:"none"})),Object(Nt.k)("expanded",Object(Nt.l)({height:"*",display:"block"})),Object(Nt.m)("expanded <=> collapsed",Object(Nt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})(),canActivate:[Rt.a]},{path:":dataId/info",component:Ot,canActivate:[Rt.a]}]),ai=[];var ci=i("Bchi");let si=(()=>{class t{}return t.\u0275mod=j.Mb({type:t}),t.\u0275inj=j.Lb({factory:function(e){return new(e||t)},providers:[ai],imports:[[n.d,a.c,o.b,l.c,r.b,s.e,b.b,c.b,u.b,d.c,g.o,h.b,f.b,p.c,C.a,T.a,ci.a,m.a,ni]]}),t})()}}]);