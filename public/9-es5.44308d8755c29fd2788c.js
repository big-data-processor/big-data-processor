!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"7Cdu":function(e,t,i){"use strict";i.d(t,"a",function(){return ei});var c=i("fXoL"),o=i("0IaG"),l=i("c3AT"),s=i("tyNb"),r=i("ofXK"),f=i("f0Cb"),u=i("jaxi"),b=i("3Pt+"),d=i("kmnG"),p=i("qFsG"),g=i("d3UM"),h=i("FKr1"),m=i("bSwM"),v=i("bTqV"),k=i("NFeN"),S=i("I7HA"),R=i("FtGj"),F=i("vSFt"),D=i("+0xr"),w=i("R0Ic"),x=[Object(w.m)("highlightRows",[Object(w.j)("active",Object(w.k)({"background-color":"yellow"})),Object(w.j)("inactive",Object(w.k)({"background-color":"transparent"})),Object(w.l)("active => inactive",[Object(w.e)("1s")]),Object(w.l)("void => inactive",[Object(w.k)({"background-color":"yellow"}),Object(w.e)("1s",Object(w.k)({"background-color":"transparent"}))])])],y=i("zXF6"),A=i("2uAV"),C=i("iB1i"),T=i("j5Dc"),I=i("Xa2L");function L(e,t){1&e&&c.Nb(0,"th",29)}function J(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",34),c.ac("click",function(){return c.zc(a),c.ec().$implicit.stop()}),c.Nb(1,"i",35),c.Rb()}}function P(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",36),c.ac("click",function(){c.zc(a);var e=c.ec().index;return c.ec(2).removeQueueElement(e)}),c.Nb(1,"i",37),c.Rb()}}function M(e,t){if(1&e&&(c.Sb(0,"td",30),c.Sb(1,"div",31),c.Jc(2,J,2,0,"button",32),c.Jc(3,P,2,0,"button",33),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngIf",a.uploading),c.Ab(1),c.lc("ngIf",!a.uploading)}}function N(e,t){1&e&&(c.Sb(0,"th",38),c.Lc(1,"Prefix"),c.Rb())}function O(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"mat-form-field",40),c.Sb(2,"input",41),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.response.success[0].prefix=e}),c.Rb(),c.Rb(),c.Pb()}if(2&e){var i=c.ec().$implicit;c.Ab(2),c.lc("ngModel",i.response.success[0].prefix)}}function j(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,O,3,1,"ng-container",39),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function $(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1,"DataFile name"),c.Rb())}function z(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"mat-form-field",40),c.Sb(2,"input",42),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.response.success[0].name=e}),c.Rb(),c.Rb(),c.Pb()}if(2&e){var i=c.ec().$implicit;c.Ab(2),c.lc("ngModel",i.response.success[0].name)}}function E(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,z,3,1,"ng-container",39),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function Q(e,t){1&e&&(c.Sb(0,"th",38),c.Lc(1,"Suffix"),c.Rb())}function _(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"mat-form-field",40),c.Sb(2,"input",43),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.response.success[0].suffix=e}),c.Rb(),c.Rb(),c.Pb()}if(2&e){var i=c.ec().$implicit;c.Ab(2),c.lc("ngModel",i.response.success[0].suffix)}}function U(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,_,3,1,"ng-container",39),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function H(e,t){1&e&&c.Nb(0,"th",29)}function V(e,t){1&e&&c.Nb(0,"td",44)}function K(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1,"Original filename"),c.Rb())}function q(e,t){if(1&e&&(c.Sb(0,"span",46),c.Lc(1),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.Mc(a)}}function G(e,t){if(1&e&&(c.Sb(0,"strong"),c.Lc(1,"*Required format: "),c.Jc(2,q,2,1,"span",45),c.Rb()),2&e){var a=c.ec(4);c.Ab(2),c.lc("ngForOf",a.uploaderOptions.allowedExtensions)}}function B(e,t){if(1&e&&(c.Sb(0,"p"),c.Jc(1,G,3,1,"strong",39),c.Rb()),2&e){var a=c.ec(3);c.Ab(1),c.lc("ngIf",a.uploaderOptions.allowedExtensions.length)}}function X(e,t){if(1&e&&(c.Sb(0,"td",30),c.Lc(1),c.Jc(2,B,2,1,"p",39),c.Rb()),2&e){var a=t.$implicit,i=c.ec(2);c.Ab(1),c.Nc(" ",null==a?null:a.originalName," "),c.Ab(1),c.lc("ngIf",i.uploaderOptions.allowedExtensions.indexOf("*")<0&&-1==i.uploaderOptions.allowedExtensions.indexOf(a.originalName.split(".").pop().toLowerCase()))}}function Y(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Size "),c.Rb())}function Z(e,t){if(1&e&&(c.Sb(0,"p"),c.Sb(1,"strong"),c.Lc(2),c.fc(3,"number"),c.Rb(),c.Rb()),2&e){var a=c.ec(3);c.Ab(2),c.Nc("*file size of less than ",c.hc(3,1,(null==a.uploaderOptions?null:a.uploaderOptions.allowedFileSize)/1024/1024,".2")," MB is required.")}}function W(e,t){if(1&e&&(c.Sb(0,"td",30),c.Lc(1),c.fc(2,"number"),c.Jc(3,Z,4,4,"p",39),c.Rb()),2&e){var a=t.$implicit,i=c.ec(2);c.Ab(1),c.Nc(" ",c.hc(2,2,(null==a?null:a.size)/1024/1024,".2")," MB "),c.Ab(2),c.lc("ngIf",a.size>i.uploaderOptions.allowedFileSize)}}function ee(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Progress "),c.Rb())}function te(e,t){if(1&e&&(c.Sb(0,"td",30),c.Sb(1,"div",31),c.Nb(2,"mat-progress-spinner",47),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("diameter",30)("value",a.progress.percent)}}function ae(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Status "),c.Rb())}function ie(e,t){1&e&&(c.Sb(0,"span",52),c.Nb(1,"i",53),c.Lc(2,"Aborted"),c.Rb())}function ne(e,t){1&e&&(c.Sb(0,"span",54),c.Nb(1,"i",55),c.Lc(2,"Uploading"),c.Rb())}function ce(e,t){1&e&&(c.Sb(0,"span",56),c.Nb(1,"i",57),c.Lc(2,"Success"),c.Rb())}function oe(e,t){1&e&&(c.Sb(0,"span",58),c.Nb(1,"i",53),c.Lc(2,"Error"),c.Rb())}function le(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,ie,3,0,"span",48),c.Jc(2,ne,3,0,"span",49),c.Jc(3,ce,3,0,"span",50),c.Jc(4,oe,3,0,"span",51),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.abort),c.Ab(1),c.lc("ngIf",a.uploading),c.Ab(1),c.lc("ngIf",a.done&&!a.error),c.Ab(1),c.lc("ngIf",a.error)}}function se(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Speed "),c.Rb())}function re(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){var a=c.ec().$implicit;c.Ab(1),c.Mc(a.progress.speedHumanized)}}function fe(e,t){if(1&e&&(c.Sb(0,"span"),c.Lc(1),c.Rb()),2&e){var a=c.ec().$implicit;c.Ab(1),c.Nc("Average: ",a.speedAverageHumanized,"")}}function ue(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,re,2,1,"span",39),c.Jc(2,fe,2,1,"span",39),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.uploading),c.Ab(1),c.lc("ngIf",a.done)}}function be(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Tags "),c.Rb())}function de(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"bdp-tag-input",59),c.ac("tagChange",function(e){c.zc(a);var t=c.ec().$implicit;return c.ec(2).onTagChanged(e,t.response.success[0])}),c.Rb(),c.Pb()}if(2&e){var i=c.ec().$implicit,n=c.ec(2);c.Ab(1),c.lc("packages",n.project.packages)("tasks",n.tasks)("tags",i.response.success[0].tags)("disabled",n.isDataFileUpdating[i.response.success[0].id])}}function pe(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,de,2,4,"ng-container",39),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function ge(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Link "),c.Rb())}var he=function(e){return["/dataFile",e,"info"]};function me(e,t){if(1&e&&(c.Sb(0,"a",61),c.Nb(1,"span",62),c.Rb()),2&e){var a=c.ec().$implicit;c.lc("routerLink",c.pc(1,he,a.response.success[0].id))}}function ve(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,me,2,3,"a",60),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function ke(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Controls "),c.Rb())}function Se(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",64),c.ac("click",function(){c.zc(a);var e=c.ec().$implicit;return c.ec(2).onDeleteDataFile(e.response.success[0].id)}),c.Nb(1,"i",65),c.Rb()}}function Re(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",64),c.ac("click",function(){c.zc(a);var e=c.ec().$implicit;return c.ec(2).onUpdateDataFile(e.response.success[0])}),c.Nb(1,"i",66),c.Rb()}}function Fe(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,Se,2,0,"button",63),c.Jc(2,Re,2,0,"button",63),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status),c.Ab(1),c.lc("ngIf",a.response&&!a.response.isError&&a.response.success&&3!==a.response.success[0].status)}}function De(e,t){1&e&&c.Nb(0,"tr",67)}function we(e,t){if(1&e){var a=c.Tb();c.Sb(0,"tr",68),c.ac("@highlightRows.done",function(e){c.zc(a);var i=t.$implicit;return c.ec(2).resetState(e,i)}),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(2);c.lc("@highlightRows",i&&i.response&&i.response.success&&i.response.success[0]&&n.highlightController[i.response.success[0].id]?"active":"inactive")}}function xe(e,t){if(1&e&&c.Nb(0,"tr",69),2&e){var a=t.$implicit,i=c.ec(2);c.lc("@highlightRows",a&&a.response&&a.response.success&&a.response.success[0]&&i.highlightController[a.response.success[0].id]?"active":"inactive")}}var ye=function(){return["deleteIcon","status","name","size","speed","link"]},Ae=function(){return["progress","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Ce(e,t){if(1&e&&(c.Sb(0,"table",8),c.Qb(1,9),c.Jc(2,L,1,0,"th",10),c.Jc(3,M,4,2,"td",11),c.Pb(),c.Qb(4,12),c.Jc(5,N,2,0,"th",13),c.Jc(6,j,2,1,"td",11),c.Pb(),c.Qb(7,14),c.Jc(8,$,2,0,"th",10),c.Jc(9,E,2,1,"td",11),c.Pb(),c.Qb(10,15),c.Jc(11,Q,2,0,"th",13),c.Jc(12,U,2,1,"td",11),c.Pb(),c.Qb(13,16),c.Jc(14,H,1,0,"th",10),c.Jc(15,V,1,0,"td",17),c.Pb(),c.Qb(16,18),c.Jc(17,K,2,0,"th",10),c.Jc(18,X,3,2,"td",11),c.Pb(),c.Qb(19,19),c.Jc(20,Y,2,0,"th",10),c.Jc(21,W,4,5,"td",11),c.Pb(),c.Qb(22,20),c.Jc(23,ee,2,0,"th",10),c.Jc(24,te,3,2,"td",11),c.Pb(),c.Qb(25,21),c.Jc(26,ae,2,0,"th",10),c.Jc(27,le,5,4,"td",11),c.Pb(),c.Qb(28,22),c.Jc(29,se,2,0,"th",10),c.Jc(30,ue,3,2,"td",11),c.Pb(),c.Qb(31,23),c.Jc(32,be,2,0,"th",10),c.Jc(33,pe,2,1,"td",11),c.Pb(),c.Qb(34,24),c.Jc(35,ge,2,0,"th",10),c.Jc(36,ve,2,1,"td",11),c.Pb(),c.Qb(37,25),c.Jc(38,ke,2,0,"th",10),c.Jc(39,Fe,3,2,"td",11),c.Pb(),c.Jc(40,De,1,0,"tr",26),c.Jc(41,we,1,1,"tr",27),c.Jc(42,xe,1,1,"tr",28),c.Rb()),2&e){var a=c.ec();c.lc("dataSource",a.uploader.queue),c.Ab(40),c.lc("matHeaderRowDef",c.oc(4,ye)),c.Ab(1),c.lc("matRowDefColumns",c.oc(5,ye)),c.Ab(1),c.lc("matRowDefColumns",c.oc(6,Ae))}}var Te,Ie=function(e){return{"nv-file-over":e}},Le=((Te=function(){function e(t,i,n){a(this,e),this.uploader=t,this.projectService=i,this.infoService=n,this.navigateDataFile=new c.o,this.deleteDataFile=new c.o,this.updateDataFile=new c.o,this.separatorKeysCodes=[R.g,R.c],this.hasBaseDropZoneOver=!1,this.filteredTags=[],this._subs=[],this.uploadEvents=new c.o,this.responses=[],this.isDataFileUpdating={},this.highlightController={},this.uploaderOptions={url:"",withCredentials:!0,filterExtensions:!0,allowedExtensions:this.allowedExtensions||[],allowedFileSize:1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:"",keepFileName:!1,tags:[],name:"",desc:"",prefix:"",suffix:""},maxUploads:2}}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.zone=new c.A({enableLongStackTrace:!0}),this.uploaderOptions={url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload",withCredentials:!0,filterExtensions:!(Array.isArray(this.allowedExtensions)&&this.allowedExtensions.indexOf("*")>=0),allowedExtensions:this.allowedExtensions||[],allowedFileSize:this.fileLimits||1073741824,autoUpload:!0,calculateSpeed:!0,previewUrl:!1,data:{folder:this.folder,keepFileName:this.keepFileName,tags:this.tags,name:this.name,desc:this.desc,prefix:this.prefix,suffix:this.suffix},maxUploads:3},this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target){if(Array.isArray(e.uploader.queue)){var a=t.data;if(!a)return;for(var i=0;i<e.uploader.queue.length;i++){var n=e.uploader.queue[i],c=void 0;if(n&&(n.response&&Array.isArray(n.response.success)&&(c=n.response.success[0]),c&&a.id===c.id)){c.prefix=a.prefix,c.name=a.name,c.suffix=a.suffix,c.desc=a.desc,c.tags=a.tags,e.highlightController[a.id]=!0;break}}}}else if("remove"===t.type&&"DataFile"===t.target&&Array.isArray(e.uploader.queue))for(var o=0;o<e.uploader.queue.length;o++){var l=e.uploader.queue[o];if(l.response&&l.response.success&&l.response.success[0]&&l.response.success[0].id===t.data.id){e.removeQueueElement(o);break}}}))}},{key:"ngOnChanges",value:function(e){for(var t in e)if("folder"===t)this.folder=e[t].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{folder:this.folder})});else if("keepFileName"===t){var a=Object.assign({},this.uploaderOptions.data,{keepFileName:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:a})}else if("tags"===t)this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{tags:e[t].currentValue})});else if("name"===t){var i=Object.assign({},this.uploaderOptions.data,{name:e[t].currentValue});this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:i})}else"desc"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{desc:e[t].currentValue})}):"prefix"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{prefix:e[t].currentValue})}):"suffix"===t?this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{suffix:e[t].currentValue})}):"project"===t?(this.project=e[t].currentValue,this.uploaderOptions=Object.assign({},this.uploaderOptions,{url:this.infoService.BASE_URL+"/project/api/"+this.project.id+"/upload"})):"fileLimits"===t&&(this.uploaderOptions=Object.assign({},this.uploaderOptions,{data:Object.assign({},this.uploaderOptions.data,{allowedFileSize:parseFloat(e[t].currentValue)})}));this.uploader.setOptions(this.uploaderOptions)}},{key:"fileOverBase",value:function(e){-1!==(e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer).types.indexOf("Files")&&(this.hasBaseDropZoneOver=!0)}},{key:"fileLeave",value:function(e){var t=this;setTimeout(function(){return t.hasBaseDropZoneOver=!1},0)}},{key:"gotoDataFile",value:function(e){window&&window.open()}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.uploader.queue.length;t++){var a=this.uploader.queue[t];if(a.response&&a.response.success&&a.response.success[0]&&a.response.success[0].id===e){this.removeQueueElement(t);break}}this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(new F.a(e))}},{key:"removeQueueElement",value:function(e){this.uploader.removeFileFromQueue(e),this.uploaderProgress.renderRows()}},{key:"handleMultipleUpload",value:function(e){var t=this,a=this.responses.findIndex(function(t){return t.id===e.id});-1===a?this.responses.push(e):this.zone.run(function(){t.responses[a]=e});var i=e.response;i&&i.isError&&e.setError(i.errors[0].details),this.uploaderProgress.renderRows()}},{key:"cssItemRowColor",value:function(e){return{"text-danger":e.error,success:e.done,warning:e.uploading,danger:e.error,active:e.abort}}},{key:"fileDropEvent",value:function(e){var t=this;console.log(this.uploader.queue),setTimeout(function(){t.hasBaseDropZoneOver=!1,t.uploaderProgress.renderRows()},0)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"startUpload",value:function(){this.uploadEvents.emit("startUpload")}},{key:"resetState",value:function(e,t){t&&t.response&&t.response.success&&t.response.success[0]&&delete this.highlightController[t.response.success[0].id]}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||Te)(c.Mb(y.a),c.Mb(l.a),c.Mb(A.a))},Te.\u0275cmp=c.Gb({type:Te,selectors:[["chi-file-uploader"]],viewQuery:function(e,t){var a;1&e&&c.Qc(D.n,!0),2&e&&c.vc(a=c.bc())&&(t.uploaderProgress=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",fileLimits:"fileLimits",tags:"tags",validTags:"validTags",name:"name",desc:"desc",tasks:"tasks",prefix:"prefix",suffix:"suffix"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},features:[c.yb],decls:14,vars:6,consts:[[1,"mt-3"],["chiFileDropper","","multiple","true",1,"my-drop-zone",3,"options","ngClass","dragover","dragleave","drop","onUpload"],[1,"text-center"],["aria-hidden","true",1,"fa","fa-5x","fa-upload"],["type","file","id","upload_file_selector","chiFileSelector","","multiple","",1,"hide-input",3,"options"],["for","upload_file_selector",1,"input-label"],[1,"box__dragndrop"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","empty"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","size"],["matColumnDef","progress"],["matColumnDef","status"],["matColumnDef","speed"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","style","border-bottom: 1px solid black;",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent","mat-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","mat-button","",3,"click"],[1,"fas","fa-ban","fa-fw","fa-lg"],["mat-icon-button","","color","primary",3,"click"],[1,"far","fa-times-circle","fa-fw","fa-lg","mr-2"],["mat-header-cell","",2,"width","80px"],[4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],["mat-cell",""],["class","label label-primary",4,"ngFor","ngForOf"],[1,"label","label-primary"],[3,"diameter","value"],["class","text-muted",4,"ngIf"],["class","text-primary",4,"ngIf"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-muted"],["aria-hidden","true",1,"fas","fa-times","fa-fw","mr-2"],[1,"text-primary"],[1,"fas","fa-spin","fa-circle-notch","fa-fw","mr-2"],[1,"text-success"],["aria-hidden","true",1,"fas","fa-check","fa-fw","mr-2"],[1,"text-danger"],[3,"packages","tasks","tags","disabled","tagChange"],["target","_blank",3,"routerLink",4,"ngIf"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""],["mat-row","",2,"border-bottom","1px solid black"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.ac("dragover",function(e){return t.fileOverBase(e)})("dragleave",function(e){return t.fileLeave(e)})("drop",function(e){return t.fileDropEvent(e)})("onUpload",function(e){return t.handleMultipleUpload(e)}),c.Sb(2,"div",2),c.Nb(3,"i",3),c.Nb(4,"br"),c.Nb(5,"input",4),c.Sb(6,"label",5),c.Sb(7,"strong"),c.Lc(8,"Choose a file"),c.Rb(),c.Sb(9,"span",6),c.Lc(10," or drag it here"),c.Rb(),c.Lc(11,". "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(12,Ce,43,7,"table",7),c.Nb(13,"br")),2&e&&(c.Ab(1),c.lc("options",t.uploaderOptions)("ngClass",c.pc(4,Ie,t.hasBaseDropZoneOver)),c.Ab(4),c.lc("options",t.uploaderOptions),c.Ab(7),c.lc("ngIf",t.uploader.queue.length>0))},directives:[C.a,r.l,T.a,r.n,D.n,D.c,D.i,D.b,D.k,D.m,D.h,D.a,v.b,d.b,p.a,b.b,b.e,b.i,b.l,r.m,I.a,S.a,s.f,D.j,D.l],pipes:[r.e],styles:[".my-drop-zone[_ngcontent-%COMP%]{font-size:1.25rem;background-color:#c8dadf;position:relative;padding:60px 20px;outline:2px dashed #92b0b3;outline-offset:-10px;transition:outline-offset .15s ease-in-out,background-color .15s linear}.nv-file-over[_ngcontent-%COMP%]{outline-offset:-20px;outline-color:#c8dadf;background-color:#fff}.hide-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;z-index:-1;position:absolute}.input-label[_ngcontent-%COMP%]{max-width:80%;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;display:inline-block;overflow:hidden}.input-label[_ngcontent-%COMP%]:hover   strong[_ngcontent-%COMP%]{color:#39bfd3}@-webkit-keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}@keyframes md-spin{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}"],data:{animation:[x]}}),Te),Je=i("YiK1");function Pe(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",6),c.ac("click",function(){return c.zc(a),c.ec(2).linkAccount()}),c.Lc(1,"Link to your google accounts"),c.Rb()}}function Me(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",7),c.ac("click",function(){return c.zc(a),c.ec(2).linkAccount()}),c.Lc(1,"Switch account"),c.Rb()}}function Ne(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",8),c.ac("click",function(){return c.zc(a),c.ec(2).showPicker()}),c.Lc(1,"Import from google drive"),c.Rb()}}function Oe(e,t){1&e&&c.Nb(0,"th",29)}function je(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",30),c.Sb(1,"div",31),c.Sb(2,"button",32),c.ac("click",function(){c.zc(a);var e=t.$implicit;return c.ec(3).removeFromList(e.id)}),c.Nb(3,"i",33),c.Rb(),c.Rb(),c.Rb()}}function $e(e,t){1&e&&(c.Sb(0,"th",34),c.Lc(1,"Prefix"),c.Rb())}function ze(e,t){if(1&e){var a=c.Tb();c.Sb(0,"mat-form-field",36),c.Sb(1,"input",37),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.dataFile.prefix=e}),c.Rb(),c.Rb()}if(2&e){var i=c.ec().$implicit;c.Ab(1),c.lc("ngModel",i.dataFile.prefix)}}function Ee(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,ze,2,1,"mat-form-field",35),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",null==a.dataFile?null:a.dataFile.id)}}function Qe(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1,"DataFile name"),c.Rb())}function _e(e,t){if(1&e){var a=c.Tb();c.Sb(0,"mat-form-field",36),c.Sb(1,"input",38),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.dataFile.name=e}),c.Rb(),c.Rb()}if(2&e){var i=c.ec().$implicit;c.Ab(1),c.lc("ngModel",i.dataFile.name)}}function Ue(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,_e,2,1,"mat-form-field",35),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.dataFile)}}function He(e,t){1&e&&(c.Sb(0,"th",34),c.Lc(1,"Suffix"),c.Rb())}function Ve(e,t){if(1&e){var a=c.Tb();c.Sb(0,"mat-form-field",36),c.Sb(1,"input",39),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().$implicit.dataFile.suffix=e}),c.Rb(),c.Rb()}if(2&e){var i=c.ec().$implicit;c.Ab(1),c.lc("ngModel",i.dataFile.suffix)}}function Ke(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,Ve,2,1,"mat-form-field",35),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.dataFile)}}function qe(e,t){1&e&&(c.Sb(0,"th",34),c.Lc(1,"Mime Type"),c.Rb())}function Ge(e,t){if(1&e&&(c.Sb(0,"td",30),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.Mc(a.mimeType)}}function Be(e,t){1&e&&c.Nb(0,"th",29)}function Xe(e,t){if(1&e&&(c.Sb(0,"td",30),c.Nb(1,"img",40),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("src",a.iconUrl,c.Cc)}}function Ye(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1,"Original Filename"),c.Rb())}function Ze(e,t){if(1&e&&(c.Sb(0,"td",30),c.Sb(1,"a",41),c.Lc(2),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("href",a.embedUrl,c.Cc),c.Ab(1),c.Mc(a.name)}}function We(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Status "),c.Rb())}function et(e,t){1&e&&(c.Sb(0,"span",47),c.Nb(1,"i",48),c.Lc(2," Pending"),c.Rb())}function tt(e,t){1&e&&(c.Sb(0,"span",49),c.Nb(1,"i",50),c.Lc(2," Processing"),c.Rb())}function at(e,t){1&e&&(c.Sb(0,"span",51),c.Nb(1,"i",52),c.Lc(2," Imported"),c.Rb())}function it(e,t){1&e&&(c.Sb(0,"span",53),c.Nb(1,"i",54),c.Lc(2," Error"),c.Rb())}function nt(e,t){1&e&&(c.Sb(0,"td",42),c.Jc(1,et,3,0,"span",43),c.Jc(2,tt,3,0,"span",44),c.Jc(3,at,3,0,"span",45),c.Jc(4,it,3,0,"span",46),c.Rb()),2&e&&(c.lc("ngSwitch",t.$implicit.status),c.Ab(1),c.lc("ngSwitchCase","pending"),c.Ab(1),c.lc("ngSwitchCase","importing"),c.Ab(1),c.lc("ngSwitchCase","success"),c.Ab(1),c.lc("ngSwitchCase","error"))}function ct(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Tags "),c.Rb())}function ot(e,t){if(1&e){var a=c.Tb();c.Sb(0,"bdp-tag-input",56),c.ac("tagChange",function(e){c.zc(a);var t=c.ec().$implicit;return c.ec(3).onTagChanged(e,t.dataFile)}),c.Rb()}if(2&e){var i=c.ec().$implicit,n=c.ec(3);c.lc("packages",n.project.packages)("tasks",n.tasks)("tags",i.dataFile.tags)}}function lt(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,ot,1,3,"bdp-tag-input",55),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.dataFile)}}function st(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Link "),c.Rb())}var rt=function(e){return["/dataFile",e,"info"]};function ft(e,t){if(1&e&&(c.Sb(0,"a",58),c.Nb(1,"span",59),c.Rb()),2&e){var a=c.ec().$implicit;c.lc("routerLink",c.pc(1,rt,a.dataFile.id))}}function ut(e,t){if(1&e&&(c.Sb(0,"td",30),c.Sb(1,"div",31),c.Jc(2,ft,2,3,"a",57),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngIf",a.dataFile)}}function bt(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Controls "),c.Rb())}function dt(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1,"Import"),c.Rb())}function pt(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1,"Importing"),c.Rb())}function gt(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1,"Imported"),c.Rb())}function ht(e,t){1&e&&(c.Sb(0,"span"),c.Lc(1,"Error"),c.Rb())}function mt(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",30),c.Sb(1,"button",60),c.ac("click",function(){c.zc(a);var e=t.$implicit;return c.ec(3).importFile(e)}),c.Nb(2,"span",61),c.Jc(3,dt,2,0,"span",62),c.Jc(4,pt,2,0,"span",62),c.Jc(5,gt,2,0,"span",62),c.Jc(6,ht,2,0,"span",62),c.Rb(),c.Rb()}if(2&e){var i=t.$implicit;c.Ab(1),c.lc("disabled","pending"!==i.status),c.Ab(2),c.lc("ngIf","pending"==i.status),c.Ab(1),c.lc("ngIf","importing"==i.status),c.Ab(1),c.lc("ngIf","success"==i.status),c.Ab(1),c.lc("ngIf","error"==i.status)}}function vt(e,t){1&e&&(c.Sb(0,"th",29),c.Lc(1," Controls "),c.Rb())}function kt(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",63),c.ac("click",function(){c.zc(a);var e=c.ec(2).$implicit;return c.ec(3).onUpdateDataFile(e.dataFile)}),c.Nb(1,"i",66),c.Rb()}}function St(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"button",63),c.ac("click",function(){c.zc(a);var e=c.ec().$implicit;return c.ec(3).onDeleteDataFile(e.dataFile.id,e.id)}),c.Nb(2,"i",64),c.Rb(),c.Jc(3,kt,2,0,"button",65),c.Pb()}if(2&e){var i=c.ec().$implicit;c.Ab(3),c.lc("ngIf",3!==i.status)}}function Rt(e,t){if(1&e&&(c.Sb(0,"td",30),c.Jc(1,St,4,1,"ng-container",62),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.dataFile&&"success"==a.status)}}function Ft(e,t){1&e&&c.Nb(0,"tr",67)}function Dt(e,t){if(1&e){var a=c.Tb();c.Sb(0,"tr",68),c.ac("@highlightRows.done",function(e){c.zc(a);var i=t.$implicit;return c.ec(3).resetState(e,i.dataFile)}),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(3);c.lc("@highlightRows",i&&i.dataFile&&n.highlightController[i.dataFile.id]?"active":"inactive")}}function wt(e,t){if(1&e&&c.Nb(0,"tr",68),2&e){var a=t.$implicit,i=c.ec(3);c.lc("@highlightRows",a&&a.dataFile&&i.highlightController[a.dataFile.id]?"active":"inactive")}}var xt=function(){return["deleteIcon","iconUrl","name","mimeType","status","importBtn"]},yt=function(){return["link","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function At(e,t){if(1&e&&(c.Sb(0,"div",9),c.Sb(1,"table",10),c.Qb(2,11),c.Jc(3,Oe,1,0,"th",12),c.Jc(4,je,4,0,"td",13),c.Pb(),c.Qb(5,14),c.Jc(6,$e,2,0,"th",15),c.Jc(7,Ee,2,1,"td",13),c.Pb(),c.Qb(8,16),c.Jc(9,Qe,2,0,"th",12),c.Jc(10,Ue,2,1,"td",13),c.Pb(),c.Qb(11,17),c.Jc(12,He,2,0,"th",15),c.Jc(13,Ke,2,1,"td",13),c.Pb(),c.Qb(14,18),c.Jc(15,qe,2,0,"th",15),c.Jc(16,Ge,3,1,"td",13),c.Pb(),c.Qb(17,19),c.Jc(18,Be,1,0,"th",12),c.Jc(19,Xe,2,1,"td",13),c.Pb(),c.Qb(20,20),c.Jc(21,Ye,2,0,"th",12),c.Jc(22,Ze,3,2,"td",13),c.Pb(),c.Qb(23,21),c.Jc(24,We,2,0,"th",12),c.Jc(25,nt,5,5,"td",22),c.Pb(),c.Qb(26,23),c.Jc(27,ct,2,0,"th",12),c.Jc(28,lt,2,1,"td",13),c.Pb(),c.Qb(29,24),c.Jc(30,st,2,0,"th",12),c.Jc(31,ut,3,1,"td",13),c.Pb(),c.Qb(32,25),c.Jc(33,bt,2,0,"th",12),c.Jc(34,mt,7,5,"td",13),c.Pb(),c.Qb(35,26),c.Jc(36,vt,2,0,"th",12),c.Jc(37,Rt,2,1,"td",13),c.Pb(),c.Jc(38,Ft,1,0,"tr",27),c.Jc(39,Dt,1,1,"tr",28),c.Jc(40,wt,1,1,"tr",28),c.Rb(),c.Rb()),2&e){var a=c.ec(2);c.Ab(1),c.lc("dataSource",a._selectedDocs),c.Ab(37),c.lc("matHeaderRowDef",c.oc(4,xt)),c.Ab(1),c.lc("matRowDefColumns",c.oc(5,xt)),c.Ab(1),c.lc("matRowDefColumns",c.oc(6,yt))}}function Ct(e,t){if(1&e&&(c.Sb(0,"div",1),c.Jc(1,Pe,2,0,"button",2),c.Jc(2,Me,2,0,"button",3),c.Jc(3,Ne,2,0,"button",4),c.Jc(4,At,41,7,"div",5),c.Rb()),2&e){var a=c.ec();c.Ab(1),c.lc("ngIf",!a.oauthToken),c.Ab(1),c.lc("ngIf",a.authApiLoaded&&a.oauthToken),c.Ab(1),c.lc("ngIf",a.pickerApiLoaded&&a.oauthToken),c.Ab(1),c.lc("ngIf",a._selectedDocs.length>0)}}var Tt,It=((Tt=function(){function e(t,i,n,o){a(this,e),this.projectService=t,this.router=i,this.systemService=n,this.infoService=o,this.navigateDataFile=new c.o,this.deleteDataFile=new c.o,this.updateDataFile=new c.o,this.pickerApiLoaded=!1,this.authApiLoaded=!1,this.oauthToken=void 0,this.clientId="",this.appId="",this.scope=["https://www.googleapis.com/auth/drive.readonly"],this._subs=[],this._gapi=gapi}return n(e,[{key:"ngOnInit",value:function(){var e=this;if(this.highlightController={},this.zone=new c.A({enableLongStackTrace:!0}),this.authToPicker={},this.authToAuthResult={},this._selectedDocs=this.projectService._googleDriveImportQueue,this._gapi.load("picker",{callback:function(){return e.zone.run(function(){return e.pickerApiLoaded=!0})}}),this._gapi.load("auth",{callback:function(){return e.zone.run(function(){return e.authApiLoaded=!0})}}),this.projectService.sysInfo.googleClientID){this.clientId=this.projectService.sysInfo.googleClientID;var t=this.clientId.split("-");this.appId=t[0]}else this._subs.push(this.systemService.sysInfo$.subscribe(function(t){t&&(e.clientId=t.googleClientID,e.appId=e.clientId.split("-")[0])}));this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("DataFile"===t.target)if("update"===t.type)for(var a=t.data,i=0;i<e._selectedDocs.length;i++){var n=e._selectedDocs[i].dataFile;if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]=!0;break}}else if("remove"===t.type)for(var c=0;c<e._selectedDocs.length;c++)if(e._selectedDocs[c].dataFile&&e._selectedDocs[c].dataFile.id===t.data.id){e._selectedDocs.splice(c,1),e.selectedDocTable&&e.selectedDocTable.renderRows();break}}))}},{key:"linkAccount",value:function(){var e=this;this._gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1,authuser:-1},function(t){e.zone.run(function(){return e.oauthToken=t.access_token}),e.authToAuthResult[e.oauthToken]=t,e.showPicker()})}},{key:"showPicker",value:function(){var e=this;this.authToPicker[this.oauthToken]?this.authToPicker[this.oauthToken].setVisible(!0):this.pickerApiLoaded&&this.oauthToken&&(this.authToPicker[this.oauthToken]=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.DOCS_IMAGES).addView(google.picker.ViewId.PRESENTATIONS).addView(google.picker.ViewId.SPREADSHEETS).setOAuthToken(this.oauthToken).setAppId(this.appId).setDeveloperKey(this.apiKey).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setMaxItems(5).setCallback(function(t){return e.pickerCallback(t)}).build(),this.authToPicker[this.oauthToken].setVisible(!0))}},{key:"pickerCallback",value:function(e){if(Object.keys(this).length>0){var t=[];e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&(t=e[google.picker.Response.DOCUMENTS],this.appendFiles(t,this.oauthToken))}}},{key:"appendFiles",value:function(e,t){var a=this;t&&(e.forEach(function(e){e.oauthToken=a.oauthToken,e.status="pending",e.dataFile=void 0}),this._selectedDocs.push.apply(this._selectedDocs,e),this.selectedDocTable&&this.selectedDocTable.renderRows())}},{key:"removeFromList",value:function(e){for(var t=0;t<this._selectedDocs.length;t++)if(this._selectedDocs[t].id===e){this._selectedDocs.splice(t,1);break}this.selectedDocTable&&this.selectedDocTable.renderRows()}},{key:"importFile",value:function(e){this.zone.run(function(){return e.status="importing"});var t=this.projectService.importData(e.id,e.name,this.desc||e.description,e.mimeType,e.oauthToken,this.project.id,this.prefix,this.suffix,this.name,this.tags||[],this.folder||"",!!this.keepFileName).subscribe(function(a){t.unsubscribe(),a.isError?e.status="error":(e.status="success",e.dataFile=a.success)})}},{key:"gotoDataFile",value:function(e){this.router.navigate(["/dataFile",e,"info"])}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onDeleteDataFile",value:function(e,t){this.removeFromList(t),this.deleteDataFile.emit(e)}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()});for(var e=Object.keys(this.authToPicker),t=0;t<e.length;t++)this.authToPicker[e[t]].dispose(),delete this.authToPicker[e[t]];e=Object.keys(this.authToAuthResult);for(var a=0;a<e.length;a++)this.authToAuthResult[this.oauthToken]["g-oauth-window"].close();this.authToPicker=void 0,delete this._gapi}},{key:"selectedDocs",get:function(){return this._selectedDocs}}]),e}()).\u0275fac=function(e){return new(e||Tt)(c.Mb(l.a),c.Mb(s.c),c.Mb(Je.a),c.Mb(A.a))},Tt.\u0275cmp=c.Gb({type:Tt,selectors:[["chi-google-picker"]],viewQuery:function(e,t){var a;1&e&&c.Qc(D.n,!0),2&e&&c.vc(a=c.bc())&&(t.selectedDocTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",tags:"tags",keepFileName:"keepFileName",folder:"folder",apiKey:"apiKey",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:1,vars:1,consts:[["class","container-fluid p-3",4,"ngIf"],[1,"container-fluid","p-3"],["mat-raised-button","","color","primary","class","mt-3",3,"click",4,"ngIf"],["class","mt-3","mat-button","",3,"click",4,"ngIf"],["class","mt-3","mat-button","","color","primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],["mat-button","",1,"mt-3",3,"click"],["mat-button","","color","primary",1,"mt-3",3,"click"],[1,"row"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","mimeType"],["matColumnDef","iconUrl"],["matColumnDef","name"],["matColumnDef","status"],["mat-cell","","class","px-2",3,"ngSwitch",4,"matCellDef"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","importBtn"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],["style","width: 100%;",4,"ngIf"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[3,"src"],["target","_blank",3,"href"],["mat-cell","",1,"px-2",3,"ngSwitch"],["class","text-info",4,"ngSwitchCase"],["class","text-warning",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-danger",4,"ngSwitchCase"],[1,"text-info"],[1,"fa","fa-hourglass-half"],[1,"text-warning"],[1,"fas","fa-circle-notch","fa-spin","fa-fw"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"text-danger"],[1,"fas","fa-times","fa-fw"],[3,"packages","tasks","tags","tagChange",4,"ngIf"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-raised-button","",3,"disabled","click"],[1,"fas","fa-cloud-upload-alt","fa-fw","fa-lg","mr-4"],[4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&c.Jc(0,Ct,5,4,"div",0),2&e&&c.lc("ngIf",t.clientId)},directives:[r.n,v.b,D.n,D.c,D.i,D.b,D.k,D.m,D.h,D.a,d.b,p.a,b.b,b.e,b.i,b.l,r.p,r.q,S.a,v.a,s.f,D.j,D.l],encapsulation:2,data:{animation:[x]}}),Tt);function Lt(e,t){1&e&&c.Nb(0,"th",23)}function Jt(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",24),c.Sb(1,"div",25),c.Sb(2,"button",26),c.ac("click",function(){c.zc(a);var e=t.$implicit;return c.ec(2).removeFromList(e.dataFile.id)}),c.Nb(3,"i",27),c.Rb(),c.Rb(),c.Rb()}}function Pt(e,t){1&e&&(c.Sb(0,"th",28),c.Lc(1,"Prefix"),c.Rb())}function Mt(e,t){if(1&e&&(c.Sb(0,"td",24),c.Sb(1,"mat-form-field",1),c.Sb(2,"input",29),c.ac("ngModelChange",function(e){return t.$implicit.dataFile.prefix=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.dataFile.prefix)}}function Nt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1,"DataFile name"),c.Rb())}function Ot(e,t){if(1&e&&(c.Sb(0,"td",24),c.Sb(1,"mat-form-field",1),c.Sb(2,"input",30),c.ac("ngModelChange",function(e){return t.$implicit.dataFile.name=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.dataFile.name)}}function jt(e,t){1&e&&(c.Sb(0,"th",28),c.Lc(1,"Suffix"),c.Rb())}function $t(e,t){if(1&e&&(c.Sb(0,"td",24),c.Sb(1,"mat-form-field",1),c.Sb(2,"input",31),c.ac("ngModelChange",function(e){return t.$implicit.dataFile.suffix=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.dataFile.suffix)}}function zt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1," Status "),c.Rb())}function Et(e,t){1&e&&(c.Sb(0,"span"),c.Nb(1,"span",33),c.Lc(2,"Importing"),c.Rb())}function Qt(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",34),c.Lc(2,"Success"),c.Rb(),c.Rb())}function _t(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",35),c.Lc(2,"Deleting"),c.Rb(),c.Rb())}function Ut(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",36),c.Lc(2,"Error"),c.Rb(),c.Rb())}function Ht(e,t){if(1&e&&(c.Sb(0,"td",24),c.Jc(1,Et,3,0,"span",32),c.Jc(2,Qt,3,0,"span",32),c.Jc(3,_t,3,0,"span",32),c.Jc(4,Ut,3,0,"span",32),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",0===a.dataFile.status),c.Ab(1),c.lc("ngIf",1===a.dataFile.status),c.Ab(1),c.lc("ngIf",3===a.dataFile.status),c.Ab(1),c.lc("ngIf",4===a.dataFile.status)}}function Vt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1," Tags "),c.Rb())}function Kt(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",24),c.Sb(1,"bdp-tag-input",37),c.ac("tagChange",function(e){c.zc(a);var i=t.$implicit;return c.ec(2).onTagChanged(e,i.dataFile)}),c.Rb(),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(2);c.Ab(1),c.lc("packages",n.project.packages)("tasks",n.tasks)("tags",i.dataFile.tags)}}function qt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1,"Original Path"),c.Rb())}function Gt(e,t){if(1&e&&(c.Sb(0,"td",24),c.Sb(1,"span"),c.Lc(2),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.Mc(a.originalPath)}}function Bt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1," Link "),c.Rb())}function Xt(e,t){1&e&&c.Nb(0,"td",24)}function Yt(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1," Controls "),c.Rb())}var Zt=function(e){return["/dataFile",e,"info"]};function Wt(e,t){if(1&e&&(c.Sb(0,"a",42),c.Nb(1,"i",43),c.Rb()),2&e){var a=c.ec().$implicit;c.lc("routerLink",c.pc(1,Zt,a.dataFile.id))}}function ea(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",39),c.ac("click",function(){c.zc(a);var e=c.ec().$implicit;return c.ec(2).onUpdateDataFile(e.dataFile)}),c.Nb(1,"i",44),c.Rb()}}function ta(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",24),c.Jc(1,Wt,2,3,"a",38),c.Sb(2,"button",39),c.ac("click",function(){c.zc(a);var e=t.$implicit;return c.ec(2).onDeleteDataFile(e.dataFile.id)}),c.Nb(3,"i",40),c.Rb(),c.Jc(4,ea,2,0,"button",41),c.Rb()}if(2&e){var i=t.$implicit;c.Ab(1),c.lc("ngIf",i),c.Ab(3),c.lc("ngIf",3!==i.status)}}function aa(e,t){1&e&&c.Nb(0,"tr",45)}function ia(e,t){if(1&e){var a=c.Tb();c.Sb(0,"tr",46),c.ac("@highlightRows.done",function(e){c.zc(a);var i=t.$implicit;return c.ec(2).resetState(e,i.dataFile)}),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(2);c.lc("@highlightRows",i&&i.dataFile&&n.highlightController[i.dataFile.id]?"active":"inactive")}}var na=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","OriginalPath","tags","controls"]};function ca(e,t){if(1&e&&(c.Sb(0,"table",8),c.Qb(1,9),c.Jc(2,Lt,1,0,"th",10),c.Jc(3,Jt,4,0,"td",11),c.Pb(),c.Qb(4,12),c.Jc(5,Pt,2,0,"th",13),c.Jc(6,Mt,3,1,"td",11),c.Pb(),c.Qb(7,14),c.Jc(8,Nt,2,0,"th",10),c.Jc(9,Ot,3,1,"td",11),c.Pb(),c.Qb(10,15),c.Jc(11,jt,2,0,"th",13),c.Jc(12,$t,3,1,"td",11),c.Pb(),c.Qb(13,16),c.Jc(14,zt,2,0,"th",10),c.Jc(15,Ht,5,4,"td",11),c.Pb(),c.Qb(16,17),c.Jc(17,Vt,2,0,"th",10),c.Jc(18,Kt,2,3,"td",11),c.Pb(),c.Qb(19,18),c.Jc(20,qt,2,0,"th",10),c.Jc(21,Gt,3,1,"td",11),c.Pb(),c.Qb(22,19),c.Jc(23,Bt,2,0,"th",10),c.Jc(24,Xt,1,0,"td",11),c.Pb(),c.Qb(25,20),c.Jc(26,Yt,2,0,"th",10),c.Jc(27,ta,5,2,"td",11),c.Pb(),c.Jc(28,aa,1,0,"tr",21),c.Jc(29,ia,1,1,"tr",22),c.Rb()),2&e){var a=c.ec();c.lc("dataSource",a.importedRecords),c.Ab(28),c.lc("matHeaderRowDef",c.oc(3,na)),c.Ab(1),c.lc("matRowDefColumns",c.oc(4,na))}}var oa,la=((oa=function(){function e(t,i,n){a(this,e),this.infoService=t,this.projectService=i,this.router=n,this.navigateDataFile=new c.o,this.deleteDataFile=new c.o,this.updateDataFile=new c.o,this._subs=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.highlightController={},this.directLink=!1,this.importedRecords=[],this.newPath="",this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target)for(var a=t.data,i=0;i<e.importedRecords.length;i++){var n=e.importedRecords[i].dataFile;if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]||(e.highlightController[a.id]=!0);break}}else"remove"===t.type&&"DataFile"===t.target&&e.removeFromList(t.data.id)}))}},{key:"importFromFolder",value:function(){var e=this;if(this.newPath){var t=this.newPath;this.newPath="";var a=this.projectService.importFromPath(t,this.project.id,this.directLink,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder||"",this.keepFileName).subscribe(function(i){a.unsubscribe(),i.success&&(e.importedRecords.push({originalPath:t,dataFile:i.success}),e.importedTable&&e.importedTable.renderRows())})}}},{key:"removeFromList",value:function(e){for(var t=0;t<this.importedRecords.length;t++)if(this.importedRecords[t].dataFile&&this.importedRecords[t].dataFile.id&&this.importedRecords[t].dataFile.id===e){this.importedRecords.splice(t,1);break}this.importedTable&&this.importedTable.renderRows()}},{key:"resetState",value:function(e,t){t&&t.id&&this.highlightController[t.id]&&delete this.highlightController[t.id]}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){this.removeFromList(e),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){this._subs.forEach(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||oa)(c.Mb(A.a),c.Mb(l.a),c.Mb(s.c))},oa.\u0275cmp=c.Gb({type:oa,selectors:[["chi-path-importer"]],viewQuery:function(e,t){var a;1&e&&c.Qc(D.n,!0),2&e&&c.vc(a=c.bc())&&(t.importedTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:14,vars:4,consts:[[1,"mt-3"],[2,"width","100%"],["matInput","","type","text","placeholder","The path on the server to import",3,"ngModel","ngModelChange"],["align","end"],[3,"ngModel","ngModelChange"],[1,"text-muted"],["mat-raised-button","","color","primary",1,"my-5",3,"disabled","click"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","OriginalPath"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times"],["mat-header-cell","",2,"width","80px"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"fas","fa-spin","fa-circle-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","text-success"],["aria-hidden","true",1,"far","fa-trash-alt","text-success"],["aria-hidden","true",1,"fas","fa-times","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(c.Sb(0,"h4",0),c.Lc(1,"Importing from the server path"),c.Rb(),c.Sb(2,"mat-form-field",1),c.Sb(3,"input",2),c.ac("ngModelChange",function(e){return t.newPath=e}),c.Rb(),c.Sb(4,"mat-hint",3),c.Lc(5,"Please specify the folder path that already on the server."),c.Rb(),c.Rb(),c.Sb(6,"mat-checkbox",4),c.ac("ngModelChange",function(e){return t.directLink=e}),c.Lc(7," Creating soft links directly\n"),c.Rb(),c.Sb(8,"div"),c.Sb(9,"small",5),c.Lc(10,"*Creating soft links directly is fast but you may encounter `file not found` errors in some situations."),c.Rb(),c.Rb(),c.Sb(11,"button",6),c.ac("click",function(){return t.importFromFolder()}),c.Lc(12,"Import"),c.Rb(),c.Jc(13,ca,30,5,"table",7)),2&e&&(c.Ab(3),c.lc("ngModel",t.newPath),c.Ab(3),c.lc("ngModel",t.directLink),c.Ab(5),c.lc("disabled",!t.newPath),c.Ab(2),c.lc("ngIf",t.importedRecords.length>0))},directives:[d.b,p.a,b.b,b.i,b.l,d.e,m.a,v.b,r.n,D.n,D.c,D.i,D.b,D.k,D.m,D.h,D.a,b.e,S.a,v.a,s.f,D.j,D.l],encapsulation:2,data:{animation:[x]}}),oa);function sa(e,t){1&e&&c.Nb(0,"th",18)}function ra(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",19),c.Sb(1,"div",20),c.Sb(2,"button",21),c.ac("click",function(){c.zc(a);var e=t.index;return c.ec(2).removeRecords(e)}),c.Nb(3,"i",22),c.Rb(),c.Rb(),c.Rb()}}function fa(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1,"Prefix"),c.Rb())}function ua(e,t){if(1&e&&(c.Sb(0,"td",19),c.Sb(1,"mat-form-field",24),c.Sb(2,"input",25),c.ac("ngModelChange",function(e){return t.$implicit.prefix=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.prefix)}}function ba(e,t){1&e&&(c.Sb(0,"th",18),c.Lc(1,"DataFile name"),c.Rb())}function da(e,t){if(1&e&&(c.Sb(0,"td",19),c.Sb(1,"mat-form-field",24),c.Sb(2,"input",26),c.ac("ngModelChange",function(e){return t.$implicit.name=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.name)}}function pa(e,t){1&e&&(c.Sb(0,"th",23),c.Lc(1,"Suffix"),c.Rb())}function ga(e,t){if(1&e&&(c.Sb(0,"td",19),c.Sb(1,"mat-form-field",24),c.Sb(2,"input",27),c.ac("ngModelChange",function(e){return t.$implicit.suffix=e}),c.Rb(),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.Ab(2),c.lc("ngModel",a.suffix)}}function ha(e,t){1&e&&(c.Sb(0,"th",18),c.Lc(1," Status "),c.Rb())}function ma(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",29),c.Lc(2,"Aborted"),c.Rb(),c.Rb())}function va(e,t){1&e&&(c.Sb(0,"span"),c.Nb(1,"span",30),c.Lc(2,"Uploading"),c.Rb())}function ka(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",31),c.Lc(2,"Success"),c.Rb(),c.Rb())}function Sa(e,t){1&e&&(c.Sb(0,"span"),c.Sb(1,"span",32),c.Lc(2,"Error"),c.Rb(),c.Rb())}function Ra(e,t){if(1&e&&(c.Sb(0,"td",19),c.Jc(1,ma,3,0,"span",28),c.Jc(2,va,3,0,"span",28),c.Jc(3,ka,3,0,"span",28),c.Jc(4,Sa,3,0,"span",28),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a.abort),c.Ab(1),c.lc("ngIf",a.uploading),c.Ab(1),c.lc("ngIf",a.done&&!a.error),c.Ab(1),c.lc("ngIf",a.error)}}function Fa(e,t){1&e&&(c.Sb(0,"th",18),c.Lc(1," Tags "),c.Rb())}function Da(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",19),c.Sb(1,"bdp-tag-input",33),c.ac("tagChange",function(e){c.zc(a);var i=t.$implicit;return c.ec(2).onTagChanged(e,i)}),c.Rb(),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(2);c.Ab(1),c.lc("packages",n.project.packages)("tasks",n.tasks)("tags",i.tags)}}function wa(e,t){1&e&&(c.Sb(0,"th",18),c.Lc(1," Link "),c.Rb())}var xa=function(e){return["/dataFile",e,"info"]};function ya(e,t){if(1&e&&(c.Sb(0,"a",35),c.Nb(1,"span",36),c.Rb()),2&e){var a=c.ec().$implicit;c.lc("routerLink",c.pc(1,xa,a.id))}}function Aa(e,t){if(1&e&&(c.Sb(0,"td",19),c.Jc(1,ya,2,3,"a",34),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.lc("ngIf",a)}}function Ca(e,t){1&e&&(c.Sb(0,"th",18),c.Lc(1," Controls "),c.Rb())}function Ta(e,t){if(1&e&&(c.Sb(0,"a",35),c.Nb(1,"span",36),c.Rb()),2&e){var a=c.ec().$implicit;c.lc("routerLink",c.pc(1,xa,a.id))}}function Ia(e,t){if(1&e){var a=c.Tb();c.Sb(0,"button",40),c.ac("click",function(){c.zc(a);var e=c.ec().$implicit;return c.ec(2).onUpdateDataFile(e)}),c.Nb(1,"i",41),c.Rb()}if(2&e){var i=c.ec().$implicit,n=c.ec(2);c.lc("disabled",n.updatingIndicator[i.id])}}function La(e,t){if(1&e){var a=c.Tb();c.Sb(0,"td",19),c.Jc(1,Ta,2,3,"a",34),c.Sb(2,"button",37),c.ac("click",function(){c.zc(a);var e=t.$implicit;return c.ec(2).onDeleteDataFile(e.id)}),c.Nb(3,"i",38),c.Rb(),c.Jc(4,Ia,2,1,"button",39),c.Rb()}if(2&e){var i=t.$implicit;c.Ab(1),c.lc("ngIf",i),c.Ab(3),c.lc("ngIf",3!==i.status)}}function Ja(e,t){1&e&&c.Nb(0,"tr",42)}function Pa(e,t){if(1&e){var a=c.Tb();c.Sb(0,"tr",43),c.ac("@highlightRows.done",function(e){c.zc(a);var i=t.$implicit;return c.ec(2).resetState(e,i)}),c.Rb()}if(2&e){var i=t.$implicit,n=c.ec(2);c.lc("@highlightRows",i&&n.highlightController[i.id]?"active":"inactive")}}var Ma=function(){return["deleteIcon","DataFilePrefix","DataFileName","DataFileSuffix","tags","controls"]};function Na(e,t){if(1&e&&(c.Sb(0,"table",4),c.Qb(1,5),c.Jc(2,sa,1,0,"th",6),c.Jc(3,ra,4,0,"td",7),c.Pb(),c.Qb(4,8),c.Jc(5,fa,2,0,"th",9),c.Jc(6,ua,3,1,"td",7),c.Pb(),c.Qb(7,10),c.Jc(8,ba,2,0,"th",6),c.Jc(9,da,3,1,"td",7),c.Pb(),c.Qb(10,11),c.Jc(11,pa,2,0,"th",9),c.Jc(12,ga,3,1,"td",7),c.Pb(),c.Qb(13,12),c.Jc(14,ha,2,0,"th",6),c.Jc(15,Ra,5,4,"td",7),c.Pb(),c.Qb(16,13),c.Jc(17,Fa,2,0,"th",6),c.Jc(18,Da,2,3,"td",7),c.Pb(),c.Qb(19,14),c.Jc(20,wa,2,0,"th",6),c.Jc(21,Aa,2,1,"td",7),c.Pb(),c.Qb(22,15),c.Jc(23,Ca,2,0,"th",6),c.Jc(24,La,5,2,"td",7),c.Pb(),c.Jc(25,Ja,1,0,"tr",16),c.Jc(26,Pa,1,1,"tr",17),c.Rb()),2&e){var a=c.ec();c.lc("dataSource",a.addedFolders),c.Ab(25),c.lc("matHeaderRowDef",c.oc(3,Ma)),c.Ab(1),c.lc("matRowDefColumns",c.oc(4,Ma))}}var Oa,ja=((Oa=function(){function e(t,i){a(this,e),this.projectService=t,this.infoService=i,this.navigateDataFile=new c.o,this.deleteDataFile=new c.o,this.updateDataFile=new c.o,this._subs=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.highlightController={},this.updatingIndicator={},this.addedFolders=[],this._subs.push(this.infoService.incomingDataChange$.subscribe(function(t){if("update"===t.type&&"DataFile"===t.target)for(var a=t.data,i=0;i<e.addedFolders.length;i++){var n=e.addedFolders[i];if(n&&a.id===n.id){n.prefix=a.prefix,n.name=a.name,n.suffix=a.suffix,n.desc=a.desc,n.tags=a.tags,e.highlightController[a.id]=!0;break}}else if("remove"===t.type&&"DataFile"===t.target)for(var c=0;c<e.addedFolders.length;c++){var o=e.addedFolders[c];if(o&&o.id===t.data.id){e.removeRecords(c);break}}}))}},{key:"createFolder",value:function(){var e=this;this.projectService.createFolder(this.project.id,this.name,this.desc,this.prefix,this.suffix,this.tags,this.folder,this.keepFileName).subscribe(function(t){t.isError||(e.addedFolders.push(t.success),e.addedFolderTable&&e.addedFolderTable.renderRows())})}},{key:"removeRecords",value:function(e){this.addedFolders.splice(e,1),this.addedFolderTable.renderRows()}},{key:"resetState",value:function(e,t){var a=this;t.id&&(delete this.highlightController[t.id],setTimeout(function(){delete a.updatingIndicator[t.id]},1e3))}},{key:"onTagChanged",value:function(e,t){t.tags=e}},{key:"onUpdateDataFile",value:function(e){this.updatingIndicator[e.id]=!0,this.updateDataFile.emit(e)}},{key:"onDeleteDataFile",value:function(e){for(var t=0;t<this.addedFolders.length;t++)if(this.addedFolders[t].id===e){this.addedFolders.splice(t,1);break}this.addedFolderTable.renderRows(),this.deleteDataFile.emit(e)}},{key:"ngOnDestroy",value:function(){this._subs.map(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||Oa)(c.Mb(l.a),c.Mb(A.a))},Oa.\u0275cmp=c.Gb({type:Oa,selectors:[["chi-add-folder"]],viewQuery:function(e,t){var a;1&e&&c.Qc(D.n,!0),2&e&&c.vc(a=c.bc())&&(t.addedFolderTable=a.first)},inputs:{project:"project",allowedExtensions:"allowedExtensions",folder:"folder",keepFileName:"keepFileName",tags:"tags",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",tasks:"tasks"},outputs:{navigateDataFile:"navigateDataFile",deleteDataFile:"deleteDataFile",updateDataFile:"updateDataFile"},decls:5,vars:1,consts:[[1,"p-3"],["mat-raised-button","","color","primary",1,"mt-3",3,"click"],[1,"fas","fa-folder-plus","mr-3","fa-fw","fa-lg"],["mat-table","","style","width: 100%;","multiTemplateDataRows","",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",2,"width","100%",3,"dataSource"],["matColumnDef","deleteIcon"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","DataFilePrefix"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["matColumnDef","DataFileName"],["matColumnDef","DataFileSuffix"],["matColumnDef","status"],["matColumnDef","tags"],["matColumnDef","link"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],[1,"d-flex","justify-content-center","align-items-center"],["mat-icon-button","","color","accent",3,"click"],[1,"fas","fa-times","fa-fw","fa-lg"],["mat-header-cell","",2,"width","80px"],[2,"width","100%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file",3,"ngModel","ngModelChange"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-muted"],[1,"fas","fa-spin","fa-circle-o-notch","fa-fw"],["aria-hidden","true",1,"fas","fa-check","fa-fw","text-success"],["aria-hidden","true",1,"fas","fa-times","fa-fw","text-danger"],[3,"packages","tasks","tags","tagChange"],["mat-icon-button","","target","_blank",3,"routerLink",4,"ngIf"],["mat-icon-button","","target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"click"],[1,"far","fa-trash-alt","fa-fw","fa-lg"],["mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],["mat-icon-button","","type","button",3,"disabled","click"],[1,"fas","fa-save","fa-fw","fa-lg"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"button",1),c.ac("click",function(){return t.createFolder()}),c.Nb(2,"span",2),c.Lc(3,"Add an empty folder "),c.Rb(),c.Jc(4,Na,27,5,"table",3),c.Rb()),2&e&&(c.Ab(4),c.lc("ngIf",t.addedFolders.length>0))},directives:[v.b,r.n,D.n,D.c,D.i,D.b,D.k,D.m,D.h,D.a,d.b,p.a,b.b,b.e,b.i,b.l,S.a,v.a,s.f,D.j,D.l],encapsulation:2,data:{animation:[x]}}),Oa);function $a(e,t){if(1&e&&(c.Sb(0,"div",37),c.Nb(1,"h1",38),c.Sb(2,"button",39),c.Sb(3,"mat-icon"),c.Lc(4,"close"),c.Rb(),c.Rb(),c.Rb()),2&e){var a=c.ec(2);c.Ab(1),c.lc("innerHTML",a.title,c.Ac)}}function za(e,t){1&e&&(c.Sb(0,"mat-button-toggle",6),c.Nb(1,"i",40),c.Lc(2," Google Drive "),c.Rb()),2&e&&c.lc("value","google")}function Ea(e,t){if(1&e){var a=c.Tb();c.Sb(0,"div",4),c.Sb(1,"bdp-tag-input",41),c.ac("tagChange",function(e){return c.zc(a),c.ec(2).onTagChanged(e)}),c.Rb(),c.Rb()}if(2&e){var i=c.ec(2);c.Ab(1),c.lc("packages",i.project.packages)("tasks",i.tasks)("tags",i.tags)}}function Qa(e,t){if(1&e&&(c.Sb(0,"mat-option",6),c.Sb(1,"u",12),c.Lc(2),c.Rb(),c.Lc(3),c.Sb(4,"u",12),c.Lc(5),c.Rb(),c.Rb()),2&e){var a=t.$implicit;c.lc("value",a.id),c.Ab(2),c.Mc(a.prefix),c.Ab(1),c.Mc(a.name),c.Ab(2),c.Mc(a.suffix)}}function _a(e,t){1&e&&(c.Qb(0),c.Sb(1,"span",42),c.Lc(2,"All extensions"),c.Rb(),c.Pb())}function Ua(e,t){if(1&e&&(c.Sb(0,"span",44),c.Lc(1),c.Rb()),2&e){var a=t.$implicit;c.Ab(1),c.Mc(a)}}function Ha(e,t){if(1&e&&c.Jc(0,Ua,2,1,"span",43),2&e){var a=c.ec(2);c.lc("ngForOf",a.allowedFormats)}}function Va(e,t){1&e&&(c.Sb(0,"div",32),c.Sb(1,"div",45),c.Sb(2,"span",46),c.Lc(3,"No valid file extensions!"),c.Nb(4,"br"),c.Lc(5,"You might want to check if you have specify packages for this project."),c.Rb(),c.Rb(),c.Rb())}function Ka(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"chi-file-uploader",47),c.ac("updateDataFile",function(e){return c.zc(a),c.ec(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return c.zc(a),c.ec(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return c.zc(a),c.ec(2).onDeleteDataFile(e)}),c.Rb(),c.Pb()}if(2&e){var i=c.ec(2);c.Ab(1),c.lc("project",i.project)("allowedExtensions",i.allowedFormats)("fileLimits",i.sysConfig.fileLimits)("tasks",i.tasks)("tags",i.tags)("folder",i.parentDataFileID)("keepFileName",i.keepFileName)("name",i.name)("desc",i.desc)("prefix",i.prefix)("suffix",i.suffix)}}function qa(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"chi-google-picker",48),c.ac("updateDataFile",function(e){return c.zc(a),c.ec(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return c.zc(a),c.ec(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return c.zc(a),c.ec(2).onDeleteDataFile(e)}),c.Rb(),c.Pb()}if(2&e){var i=c.ec(2);c.Ab(1),c.lc("project",i.project)("allowedExtensions",i.allowedFormats)("apiKey",i.sysConfig.googlePickerAPIKey)("tasks",i.tasks)("tags",i.tags)("folder",i.parentDataFileID)("keepFileName",i.keepFileName)("name",i.name)("desc",i.desc)("prefix",i.prefix)("suffix",i.suffix)}}function Ga(e,t){if(1&e){var a=c.Tb();c.Sb(0,"chi-path-importer",50),c.ac("updateDataFile",function(e){return c.zc(a),c.ec(3).onUpdateDataFile(e)})("navigateDataFile",function(e){return c.zc(a),c.ec(3).onNavigateDataFile(e)})("deleteDataFile",function(e){return c.zc(a),c.ec(3).onDeleteDataFile(e)}),c.Rb()}if(2&e){var i=c.ec(3);c.lc("project",i.project)("allowedExtensions",i.allowedFormats)("tasks",i.tasks)("tags",i.tags)("folder",i.parentDataFileID)("keepFileName",i.keepFileName)("name",i.name)("desc",i.desc)("prefix",i.prefix)("suffix",i.suffix)}}function Ba(e,t){if(1&e&&(c.Qb(0),c.Jc(1,Ga,1,10,"chi-path-importer",49),c.Pb()),2&e){var a=c.ec(2);c.Ab(1),c.lc("ngIf",a.currentUser&&a.currentUser.auths&&a.currentUser.auths.bdp&&a.currentUser.auths.bdp>=3)}}function Xa(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Sb(1,"chi-add-folder",50),c.ac("updateDataFile",function(e){return c.zc(a),c.ec(2).onUpdateDataFile(e)})("navigateDataFile",function(e){return c.zc(a),c.ec(2).onNavigateDataFile(e)})("deleteDataFile",function(e){return c.zc(a),c.ec(2).onDeleteDataFile(e)}),c.Rb(),c.Pb()}if(2&e){var i=c.ec(2);c.Ab(1),c.lc("project",i.project)("allowedExtensions",i.allowedFormats)("tasks",i.tasks)("tags",i.tags)("folder",i.parentDataFileID)("keepFileName",i.keepFileName)("name",i.name)("desc",i.desc)("prefix",i.prefix)("suffix",i.suffix)}}function Ya(e,t){if(1&e){var a=c.Tb();c.Qb(0),c.Jc(1,$a,5,1,"div",1),c.Sb(2,"div",2),c.Sb(3,"div",3),c.Sb(4,"h3"),c.Lc(5,"1. Specify the file source"),c.Rb(),c.Rb(),c.Sb(6,"div",4),c.Sb(7,"mat-button-toggle-group",5),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().onImportTypeChanged(e)}),c.Sb(8,"mat-button-toggle",6),c.Nb(9,"i",7),c.Lc(10," Your Computer "),c.Rb(),c.Sb(11,"mat-button-toggle",6),c.Nb(12,"i",8),c.Lc(13," Add a folder "),c.Rb(),c.Jc(14,za,3,1,"mat-button-toggle",9),c.Sb(15,"mat-button-toggle",6),c.Nb(16,"i",10),c.Lc(17," Server Path "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(18,"div",2),c.Sb(19,"div",11),c.Sb(20,"h3"),c.Lc(21,"2. Specify file information (optional)"),c.Rb(),c.Nb(22,"br"),c.Sb(23,"small",12),c.Lc(24,"*You may specify the basic information latter."),c.Rb(),c.Nb(25,"br"),c.Sb(26,"small",12),c.Lc(27,"*All files will be uploaded with the information"),c.Rb(),c.Rb(),c.Sb(28,"div",4),c.Sb(29,"mat-form-field",13),c.Sb(30,"input",14),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().prefix=e}),c.Rb(),c.Sb(31,"span",15),c.Lc(32,"Prefix: "),c.Rb(),c.Rb(),c.Sb(33,"mat-form-field",13),c.Sb(34,"input",16),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().suffix=e}),c.Rb(),c.Sb(35,"span",15),c.Lc(36,"Suffix: "),c.Rb(),c.Rb(),c.Sb(37,"mat-form-field",17),c.Sb(38,"input",18),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().name=e}),c.Rb(),c.Sb(39,"b",19),c.Lc(40,"Name: "),c.Rb(),c.Sb(41,"span",20),c.Nb(42,"u",21),c.Rb(),c.Sb(43,"span",22),c.Nb(44,"u",21),c.Rb(),c.Sb(45,"mat-hint",23),c.Lc(46,"Leave it blank if using the original file name(s)."),c.Rb(),c.Sb(47,"mat-hint",24),c.Lc(48,"Max 80 characters"),c.Rb(),c.Rb(),c.Sb(49,"mat-form-field",17),c.Sb(50,"textarea",25),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().desc=e}),c.Lc(51),c.Rb(),c.Sb(52,"mat-hint",23),c.Lc(53,"You may specify the description latter."),c.Rb(),c.Sb(54,"mat-hint",24),c.Lc(55,"Max 300 characters"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(56,"div",2),c.Sb(57,"div",11),c.Sb(58,"h3"),c.Lc(59,"3. Define tags for your files (optional)"),c.Rb(),c.Nb(60,"br"),c.Sb(61,"small",12),c.Lc(62,"*You may also specify tags for your files."),c.Rb(),c.Rb(),c.Jc(63,Ea,2,3,"div",26),c.Rb(),c.Sb(64,"div",2),c.Sb(65,"div",11),c.Sb(66,"h3"),c.Lc(67,"4. Set a folder to upload (optional)"),c.Rb(),c.Nb(68,"br"),c.Sb(69,"small",12),c.Lc(70,"*Only needed when your expect your files in a folder."),c.Rb(),c.Rb(),c.Sb(71,"div",4),c.Sb(72,"mat-form-field",17),c.Sb(73,"mat-select",27),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().parentDataFileID=e}),c.Sb(74,"mat-option"),c.Lc(75,"--- No folder ---"),c.Rb(),c.Jc(76,Qa,6,4,"mat-option",28),c.Rb(),c.Rb(),c.Sb(77,"mat-checkbox",29),c.ac("ngModelChange",function(e){return c.zc(a),c.ec().keepFileName=e}),c.Lc(78,"Keep the underlying filename in the folder"),c.Rb(),c.Nb(79,"br"),c.Sb(80,"small",12),c.Lc(81,"*Note: The uploading will fail if the filename already exists in the folder"),c.Rb(),c.Rb(),c.Rb(),c.Sb(82,"div",2),c.Sb(83,"div",11),c.Sb(84,"h3"),c.Lc(85,"5. Create DataFile records"),c.Rb(),c.Rb(),c.Sb(86,"div",4),c.Lc(87," The Valid file extensions: "),c.Jc(88,_a,3,0,"ng-container",30),c.Jc(89,Ha,1,1,"ng-template",null,31,c.Kc),c.Rb(),c.Sb(91,"div",32),c.Sb(92,"small",12),c.Lc(93,"*You may change the created DataFile records right after file imported, but remember to click the save "),c.Nb(94,"i",33),c.Lc(95," button after changing DataFile info."),c.Rb(),c.Rb(),c.Jc(96,Va,6,0,"div",34),c.Sb(97,"div",35),c.Jc(98,Ka,2,11,"ng-container",36),c.Jc(99,qa,2,11,"ng-container",36),c.Jc(100,Ba,2,1,"ng-container",36),c.Jc(101,Xa,2,10,"ng-container",36),c.Rb(),c.Rb(),c.Pb()}if(2&e){var i=c.wc(90),n=c.ec();c.Ab(1),c.lc("ngIf",n.dialogRef),c.Ab(6),c.lc("ngModel",n.importType),c.Ab(1),c.lc("value","local"),c.Ab(3),c.lc("value","folder"),c.Ab(3),c.lc("ngIf",n.sysConfig.googlePickerAPIKey),c.Ab(1),c.lc("value","server"),c.Ab(15),c.lc("ngModel",n.prefix),c.Ab(4),c.lc("ngModel",n.suffix),c.Ab(4),c.lc("ngModel",n.name),c.Ab(4),c.lc("innerHTML",n.prefix,c.Ac),c.Ab(2),c.lc("innerHTML",n.suffix,c.Ac),c.Ab(6),c.lc("ngModel",n.desc),c.Ab(1),c.Mc(n.desc),c.Ab(12),c.lc("ngIf",n.project&&n.project.packages.length>0),c.Ab(10),c.lc("ngModel",n.parentDataFileID),c.Ab(3),c.lc("ngForOf",n.folders),c.Ab(1),c.lc("ngModel",n.keepFileName)("disabled",!n.parentDataFileID),c.Ab(11),c.lc("ngIf",n.allowedFormats.indexOf("*")>=0)("ngIfElse",i),c.Ab(8),c.lc("ngIf",0==n.allowedFormats.length),c.Ab(1),c.lc("ngSwitch",n.importType),c.Ab(1),c.lc("ngSwitchCase","local"),c.Ab(1),c.lc("ngSwitchCase","google"),c.Ab(1),c.lc("ngSwitchCase","server"),c.Ab(1),c.lc("ngSwitchCase","folder")}}function Za(e,t){1&e&&(c.Sb(0,"mat-dialog-actions"),c.Sb(1,"button",51),c.Sb(2,"mat-icon"),c.Lc(3,"close"),c.Rb(),c.Lc(4," Close"),c.Rb(),c.Rb())}var Wa,ei=((Wa=function(){function e(t,i,n,o){a(this,e),this.projectService=t,this.router=i,this.dialogRef=n,this.data=o,this.importTypeChanged=new c.o,this.keepFileName=!0,this.tags=[],o?(this.project=o.project,this.allowedFormats=o.allowedFormats.indexOf("*")>=0?["*"]:o.allowedFormats,this.sysConfig=o.sysConfig,this.importType=o.importType||"local",this.tasks=o.tasks,this.parentDataFileID=o.parentDataFileID||"",this.currentUser=o.currentUser,this.name=o.name||"",this.desc=o.desc||"",this.prefix=o.prefix||"",this.suffix=o.suffix||"",this.title=o.title||"Import data files "+(o.project&&o.project.name?"to the project: ".concat(o.project.name,"."):""),this.tags=Array.isArray(o.tags)?o.tags:[]):(this.allowedFormats=[],this.tasks=[],this.prefix="",this.suffix="",this.desc="",this.name="",this.parentDataFileID="",this.importType="local",this.tags=[],this.title="")}return n(e,[{key:"onImportTypeChanged",value:function(e){this.importType=e,this.importTypeChanged.emit(e)}},{key:"onTagChanged",value:function(e){console.log(e),this.tags=e}},{key:"onUpdateDataFile",value:function(e){var t=this.projectService.updateDataFileInfo(e).subscribe(function(){return t.unsubscribe()})}},{key:"onDeleteDataFile",value:function(e){var t=this.projectService.deleteDataFileById(e).subscribe(function(){return t.unsubscribe()})}},{key:"onNavigateDataFile",value:function(e){this.dialogRef&&this.dialogRef.close(),this.router.navigate(["/dataFile",e,"info"])}},{key:"folders",get:function(){return this.project&&this.project.dataFiles?this.project.dataFiles.filter(function(e){return"Folder"===e.format}):[]}}]),e}()).\u0275fac=function(e){return new(e||Wa)(c.Mb(l.a),c.Mb(s.c),c.Mb(o.g,8),c.Mb(o.a,8))},Wa.\u0275cmp=c.Gb({type:Wa,selectors:[["bdp-file-importer"]],inputs:{allowedFormats:"allowedFormats",project:"project",sysConfig:"sysConfig",importType:"importType",tasks:"tasks",currentUser:"currentUser",name:"name",desc:"desc",prefix:"prefix",suffix:"suffix",keepFileName:"keepFileName",title:"title",tags:"tags",parentDataFileID:"parentDataFileID"},outputs:{importTypeChanged:"importTypeChanged"},decls:3,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-row justify-content-between",4,"ngIf"],[1,"row","my-5"],[1,"col-lg-2","col-xl-3","my-1"],[1,"col-lg-10","col-xl-9"],["name","fileSource","aria-label","File Source",1,"ml-3",3,"ngModel","ngModelChange"],[3,"value"],[1,"far","fa-hdd","fa-fw","mr-2"],[1,"fas","fa-folder-plus","fa-fw","mr-2"],[3,"value",4,"ngIf"],[1,"fas","fa-server","fa-fw","mr-2"],[1,"col-lg-2","col-xl-3"],[1,"text-muted"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matInput","","type","text","maxlength","80","size","80","placeholder","The name for the data file(s)",3,"ngModel","ngModelChange"],["matPrefix","",1,"mr-2","text-primary"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["align","start"],["align","end"],["matInput","","placeholder","The description for the data file(s). (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],["class","col-lg-10 col-xl-9",4,"ngIf"],["placeholder","select a folder to import",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange"],[4,"ngIf","ngIfElse"],["extBlock",""],[1,"col-12"],[1,"fas","fa-save","fa-fw"],["class","col-12",4,"ngIf"],[1,"col-12",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-flex","flex-row","justify-content-between"],["mat-dialog-title","",2,"font-weight","800",3,"innerHTML"],["mat-icon-button","","mat-dialog-close",""],[1,"fab","fa-google-drive","fa-fw","mr-2"],[3,"packages","tasks","tags","tagChange"],[1,"badge","badge-success","mx-1"],["class","badge badge-primary mx-1",4,"ngFor","ngForOf"],[1,"badge","badge-primary","mx-1"],[1,"ml-3"],[1,"text-danger"],[3,"project","allowedExtensions","fileLimits","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","apiKey","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile",4,"ngIf"],[3,"project","allowedExtensions","tasks","tags","folder","keepFileName","name","desc","prefix","suffix","updateDataFile","navigateDataFile","deleteDataFile"],["mat-stroked-button","","mat-dialog-close",""]],template:function(e,t){1&e&&(c.Jc(0,Ya,102,26,"ng-container",0),c.Nb(1,"mat-divider"),c.Jc(2,Za,5,0,"mat-dialog-actions",0)),2&e&&(c.lc("ngIf",t.project&&t.currentUser),c.Ab(2),c.lc("ngIf",t.dialogRef))},directives:[r.n,f.a,u.b,b.i,b.l,u.a,d.b,p.a,b.b,b.e,d.f,d.g,d.e,g.a,h.j,r.m,m.a,r.p,r.q,o.h,v.b,o.d,k.a,S.a,Le,It,la,ja,o.c],encapsulation:2}),Wa)},I7HA:function(t,i,c){"use strict";c.d(i,"a",function(){return B});var o=c("fXoL"),l=c("+mqT"),s=c("FtGj"),r=c("0IaG"),f=c("ofXK"),u=c("f0Cb"),b=c("kmnG"),d=c("d3UM"),p=c("3Pt+"),g=c("bTqV"),h=c("A5z7"),m=c("NFeN"),v=c("FKr1");function k(e,t){1&e&&(o.Sb(0,"mat-icon",27),o.Lc(1,"cancel"),o.Rb())}function S(e,t){if(1&e){var a=o.Tb();o.Sb(0,"mat-chip",25),o.ac("removed",function(){o.zc(a);var e=t.$implicit;return o.ec(2).toggleTag(e)}),o.Lc(1),o.Jc(2,k,2,0,"mat-icon",26),o.Rb()}if(2&e){var i=t.$implicit,n=o.ec(2);o.lc("removable",!0)("selectable",!1),o.Ab(1),o.Nc(" ",i," "),o.Ab(1),o.lc("ngIf",n.tags.indexOf(i)>=0&&"Folder"!==i)}}function R(e,t){if(1&e&&(o.Sb(0,"div",21),o.Sb(1,"h3"),o.Lc(2,"Current selected tags: "),o.Rb(),o.Sb(3,"mat-chip-list",22,23),o.Jc(5,S,3,4,"mat-chip",24),o.Rb(),o.Rb()),2&e){var a=o.ec();o.Ab(3),o.lc("selectable",!1),o.Ab(2),o.lc("ngForOf",a.tags)}}function F(e,t){if(1&e&&(o.Sb(0,"mat-option",28),o.Sb(1,"b"),o.Lc(2),o.Rb(),o.Rb()),2&e){var a=t.$implicit;o.lc("value",a),o.Ab(2),o.Mc(null==a?null:a.name)}}function D(e,t){if(1&e&&(o.Sb(0,"div"),o.Lc(1," Package name: "),o.Sb(2,"b"),o.Lc(3),o.Rb(),o.Nb(4,"br"),o.Lc(5," Package description: "),o.Nb(6,"div",29),o.Rb()),2&e){var a=o.ec();o.Ab(3),o.Mc(a.selectedPackage.name),o.Ab(3),o.lc("innerHTML",a.selectedPackage.desc,o.Ac)}}function w(e,t){1&e&&o.Nb(0,"i",37)}function x(e,t){1&e&&o.Nb(0,"i",38)}function y(e,t){1&e&&o.Nb(0,"i",39)}function A(e,t){1&e&&o.Nb(0,"i",40)}function C(e,t){if(1&e&&(o.Sb(0,"mat-option",31),o.Jc(1,w,1,0,"i",32),o.Jc(2,x,1,0,"i",33),o.Jc(3,y,1,0,"i",34),o.Jc(4,A,1,0,"i",35),o.Sb(5,"b",36),o.Lc(6),o.Rb(),o.Rb()),2&e){var a=t.$implicit;o.lc("value",a),o.Ab(1),o.lc("ngIf","workflow"==a.type),o.Ab(1),o.lc("ngIf","standard"==a.type),o.Ab(1),o.lc("ngIf","child"==a.type),o.Ab(1),o.lc("ngIf","system"==a.type),o.Ab(2),o.Mc(null==a?null:a.name)}}function T(e,t){if(1&e&&(o.Qb(0),o.Jc(1,C,7,6,"mat-option",30),o.Pb()),2&e){var a=o.ec();o.Ab(1),o.lc("ngForOf",a.taskPkgDict[a.selectedPackage.id])}}function I(e,t){if(1&e&&(o.Sb(0,"div"),o.Lc(1," Task name: "),o.Sb(2,"b"),o.Lc(3),o.Rb(),o.Nb(4,"br"),o.Lc(5," Task description: "),o.Nb(6,"div",29),o.Nb(7,"br"),o.Rb()),2&e){var a=o.ec();o.Ab(3),o.Mc(a.selectedTask.name),o.Ab(3),o.lc("innerHTML",a.selectedTask.desc,o.Ac)}}function L(e,t){if(1&e&&(o.Sb(0,"mat-option",42),o.Nb(1,"i",43),o.Sb(2,"b"),o.Lc(3),o.Rb(),o.Rb()),2&e){var a=o.ec().$implicit,i=o.ec();o.Gc("background-color","outFile"===a.type?"#28a745":"#047AFB"),o.lc("value",a),o.Ab(1),o.lc("ngClass",i.cssArgTypeToIcon(a)),o.Ab(2),o.Mc(a.name+" "+("inFile"===a.type?"(input)":"(output)"))}}function J(e,t){if(1&e&&(o.Qb(0),o.Jc(1,L,4,5,"mat-option",41),o.Pb()),2&e){var a=t.$implicit;o.Ab(1),o.lc("ngIf","inFile"===a.type||"outFile"===a.type)}}function P(e,t){if(1&e&&(o.Sb(0,"div"),o.Lc(1," Argument name: "),o.Sb(2,"b"),o.Lc(3),o.Rb(),o.Nb(4,"br"),o.Lc(5," Argument description: "),o.Nb(6,"div",29),o.Nb(7,"br"),o.Rb()),2&e){o.ec();var a=o.wc(27);o.Ab(3),o.Mc(null==a||null==a.selected?null:a.selected.value.name),o.Ab(3),o.lc("innerHTML",null==a||null==a.selected?null:a.selected.value.desc,o.Ac)}}function M(e,t){1&e&&(o.Sb(0,"mat-icon",27),o.Lc(1,"add_circle"),o.Rb())}function N(e,t){1&e&&(o.Sb(0,"mat-icon",27),o.Nb(1,"i",46),o.Rb())}function O(e,t){if(1&e){var a=o.Tb();o.Qb(0),o.Sb(1,"mat-chip",45),o.ac("removed",function(){o.zc(a);var e=t.$implicit;return o.ec(2).toggleTag(e)}),o.Lc(2),o.Jc(3,M,2,0,"mat-icon",26),o.Jc(4,N,2,0,"mat-icon",26),o.Rb(),o.Pb()}if(2&e){var i=t.$implicit,n=o.ec(2);o.Ab(1),o.lc("selectable",!1),o.Ab(1),o.Nc(" ",i," "),o.Ab(1),o.lc("ngIf",n.tags.indexOf(i)<0&&"Folder"!==i),o.Ab(1),o.lc("ngIf",n.tags.indexOf(i)>=0&&"Folder"!==i)}}function j(e,t){if(1&e&&(o.Sb(0,"div",44),o.Sb(1,"h2"),o.Lc(2,"Suggested tags:"),o.Rb(),o.Sb(3,"mat-chip-list"),o.Jc(4,O,5,4,"ng-container",15),o.Rb(),o.Rb()),2&e){o.ec();var a=o.wc(27);o.Ab(4),o.lc("ngForOf",null==a||null==a.selected?null:a.selected.value.tags)}}function $(e,t){if(1&e){var a=o.Tb();o.Sb(0,"button",47),o.ac("click",function(){o.zc(a);var e=o.ec(),t=o.wc(27);return e.addAllTags(null==t||null==t.selected?null:t.selected.value.tags)}),o.Lc(1," Add all suggested tags "),o.Rb()}}function z(e,t){if(1&e){var a=o.Tb();o.Sb(0,"button",48),o.ac("click",function(){o.zc(a);var e=o.ec(),t=o.wc(27);return e.removeAllTags(null==t||null==t.selected?null:t.selected.value.tags)}),o.Lc(1," Remove all suggested tags "),o.Rb()}}var E,Q=((E=function(){function e(t,i){a(this,e),this.dialogRef=t,this.data=i,this.tagToggleEvent=new o.o,i?(this.packages=i.packages||[],this.taskPkgDict=i.taskPkgDict||{},this.tags=i.tags||[]):(this.packages=[],this.taskPkgDict={},this.tags=[])}return n(e,[{key:"ngOnInit",value:function(){this.packages[0]&&(this.selectedPackage=this.packages[0],this.selectedTask=Array.isArray(this.taskPkgDict[this.selectedPackage.id])?this.taskPkgDict[this.selectedPackage.id][0]:void 0)}},{key:"onPackageSelctChange",value:function(e){var t=this;this.selectedPackage=e,setTimeout(function(){return t.selectedTask=Array.isArray(t.taskPkgDict[e.id])?t.taskPkgDict[e.id][0]:void 0})}},{key:"toggleTag",value:function(e){"Folder"!==e&&this.tagToggleEvent.emit(e)}},{key:"addAllTags",value:function(e){var t=this;e.filter(function(e){return t.tags.indexOf(e)<0}).forEach(function(e){return t.toggleTag(e)})}},{key:"removeAllTags",value:function(e){var t=this;e.filter(function(e){return t.tags.indexOf(e)>=0}).forEach(function(e){return t.toggleTag(e)})}},{key:"cssArgTypeToIcon",value:function(e){if(e&&e.type)return{"fa-file-import":"inFile"===e.type,"fa-file-export":"outFile"===e.type}}}]),e}()).\u0275fac=function(e){return new(e||E)(o.Mb(r.g),o.Mb(r.a))},E.\u0275cmp=o.Gb({type:E,selectors:[["bdp-tag-helper-dialog"]],inputs:{packages:"packages",taskPkgDict:"taskPkgDict",tags:"tags"},outputs:{tagToggleEvent:"tagToggleEvent"},decls:37,vars:12,consts:[["mat-dialog-title",""],[1,"container-fluid"],[1,"row"],["class","col-12",4,"ngIf"],[1,"my-2"],[1,"row","mt-3"],[1,"col-lg-4"],[2,"width","100%"],["placeholder","Please select the package",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Please select the desired task",3,"ngModel","ngModelChange"],["taskSelect",""],["placeholder","Please select the input"],["inputFileSelect",""],[4,"ngFor","ngForOf"],["class","col-12 my-3","style","border-left: 1px solid black",4,"ngIf"],["mat-dialog-actions","",1,"my-3"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"col-12"],[3,"selectable"],["tagList",""],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],[3,"removable","selectable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],["class","text-black","style","background-color: #ffc107",3,"value",4,"ngFor","ngForOf"],[1,"text-black",2,"background-color","#ffc107",3,"value"],["class","fas fa-cogs fa-fw mr-1",4,"ngIf"],["class","fas fa-cog fa-fw mr-1",4,"ngIf"],["class","fas fa-puzzle-piece fa-fw mr-1",4,"ngIf"],["class","fas fa-server fa-fw mr-1",4,"ngIf"],[1,"ml-3"],[1,"fas","fa-cogs","fa-fw","mr-1"],[1,"fas","fa-cog","fa-fw","mr-1"],[1,"fas","fa-puzzle-piece","fa-fw","mr-1"],[1,"fas","fa-server","fa-fw","mr-1"],["class","text-white",3,"value","background-color",4,"ngIf"],[1,"text-white",3,"value"],[1,"fas",3,"ngClass"],[1,"col-12","my-3",2,"border-left","1px solid black"],[3,"selectable","removed"],[1,"far","fa-check-circle","fa-fw","text-success"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,t){if(1&e&&(o.Sb(0,"h1",0),o.Lc(1,"DataFile Tag helper"),o.Rb(),o.Sb(2,"div",1),o.Sb(3,"div",2),o.Jc(4,R,6,2,"div",3),o.Rb(),o.Nb(5,"mat-divider",4),o.Sb(6,"div",5),o.Sb(7,"div",6),o.Sb(8,"h3"),o.Lc(9,"1. Whcih package do you plan to use for this file?"),o.Rb(),o.Sb(10,"mat-form-field",7),o.Sb(11,"mat-select",8),o.ac("ngModelChange",function(e){return t.onPackageSelctChange(e)}),o.Jc(12,F,3,2,"mat-option",9),o.Rb(),o.Rb(),o.Jc(13,D,7,2,"div",10),o.Rb(),o.Sb(14,"div",6),o.Sb(15,"h3"),o.Lc(16,"2. Which task do you like to execute for this file?"),o.Rb(),o.Sb(17,"mat-form-field",7),o.Sb(18,"mat-select",11,12),o.ac("ngModelChange",function(e){return t.selectedTask=e}),o.Jc(20,T,2,1,"ng-container",10),o.Rb(),o.Rb(),o.Jc(21,I,8,2,"div",10),o.Rb(),o.Sb(22,"div",6),o.Sb(23,"h3"),o.Lc(24,"3. Which input would this file be used as?"),o.Rb(),o.Sb(25,"mat-form-field",7),o.Sb(26,"mat-select",13,14),o.Jc(28,J,2,1,"ng-container",15),o.Rb(),o.Rb(),o.Jc(29,P,8,2,"div",10),o.Rb(),o.Jc(30,j,5,1,"div",16),o.Rb(),o.Nb(31,"mat-divider"),o.Sb(32,"div",17),o.Sb(33,"button",18),o.Lc(34,"Close"),o.Rb(),o.Jc(35,$,2,0,"button",19),o.Jc(36,z,2,0,"button",20),o.Rb(),o.Rb()),2&e){var a=o.wc(19),i=o.wc(27);o.Ab(4),o.lc("ngIf",t.tags.length>0),o.Ab(7),o.lc("ngModel",t.selectedPackage),o.Ab(1),o.lc("ngForOf",t.packages),o.Ab(1),o.lc("ngIf",t.selectedPackage),o.Ab(5),o.lc("ngModel",t.selectedTask),o.Ab(2),o.lc("ngIf",t.selectedPackage),o.Ab(1),o.lc("ngIf",t.selectedTask),o.Ab(7),o.lc("ngForOf",null==a||null==a.selected?null:a.selected.value.arguments),o.Ab(1),o.lc("ngIf",null==i||null==i.selected?null:i.selected.value),o.Ab(1),o.lc("ngIf",null==i||null==i.selected?null:i.selected.value),o.Ab(5),o.lc("ngIf",null==i||null==i.selected?null:i.selected.value.tags),o.Ab(1),o.lc("ngIf",null==i||null==i.selected?null:i.selected.value.tags)}},directives:[r.h,f.n,u.a,b.b,d.a,p.i,p.l,f.m,r.c,g.b,r.d,h.c,h.a,m.a,h.d,v.j,f.l],encapsulation:2}),E),_=c("/1cH");function U(e,t){if(1&e){var a=o.Tb();o.Sb(0,"mat-icon",13),o.ac("click",function(){o.zc(a);var e=o.ec().$implicit;return o.ec().removeFromTags(e)}),o.Lc(1,"cancel"),o.Rb()}}function H(e,t){if(1&e){var a=o.Tb();o.Sb(0,"mat-chip",11),o.ac("click",function(e){o.zc(a);var i=t.$implicit;return o.ec().onTagClick(e,i)}),o.Lc(1),o.Jc(2,U,2,0,"mat-icon",12),o.Rb()}if(2&e){var i=t.$implicit,n=o.ec();o.lc("color",n.highlightTags.indexOf(i)>=0?"primary":"default")("removable",!0)("selected",!0),o.Ab(1),o.Nc(" ",i," "),o.Ab(1),o.lc("ngIf",!n.disabled&&"Folder"!==i)}}function V(e,t){1&e&&(o.Sb(0,"mat-hint",14),o.Lc(1,"Valid characters: a-z, dash (-), and underline (_)."),o.Rb())}function K(e,t){if(1&e&&(o.Sb(0,"mat-option",15),o.Lc(1),o.Rb()),2&e){var a=t.$implicit;o.lc("value",a),o.Ab(1),o.Nc(" ",a," ")}}function q(e,t){if(1&e){var a=o.Tb();o.Sb(0,"button",16),o.ac("click",function(){return o.zc(a),o.ec().openTagHelperDialog()}),o.Sb(1,"mat-icon"),o.Nb(2,"i",17),o.Rb(),o.Rb()}}var G,B=((G=function(){function t(e){a(this,t),this.dialogRef=e,this.tagChange=new o.o,this.tagClicked=new o.o,this.separatorKeysCodes=[s.g,s.c],this.highlightTags=[],this.filteredTags=[],this.tags=[],this.tasks=[],this.taskPkgDict={},this.validTags=[]}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t=this;for(var a in e)"packages"===a?this.packages=e[a].currentValue:"tasks"===a?(this.tasks=e[a].currentValue,this.updatePkgTaskDict()):"tags"===a?Array.isArray(e[a].currentValue)&&(this.tags=[],e[a].currentValue.forEach(function(e){return t.addTag(e,!0)})):"disabled"===a&&(this.disabled=e[a].currentValue)}},{key:"updatePkgTaskDict",value:function(){var e=this;if(this.taskPkgDict={},Array.isArray(this.tasks)){for(var t=0;t<this.tasks.length;t++){var a=this.tasks[t],i=a.package?a.package:null;i&&(Array.isArray(this.taskPkgDict[i])||(this.taskPkgDict[i]=[]),this.taskPkgDict[i].push(a))}Object.keys(this.taskPkgDict).forEach(function(t){return e.taskPkgDict[t]=Object(l.a)(e.taskPkgDict[t],[function(e){return e.name}],["asc"])}),this.validTags=this.getValidTags(this.tasks)}}},{key:"getValidTags",value:function(t){var a={};return t.forEach(function(t){return e(new Set([].concat.apply([],t.arguments.filter(function(e){return"inFile"===e.type||"outFile"===e.type}).map(function(e){return e.tags})))).forEach(function(e){return a[e.toString()]=1})}),Object(l.a)(Object.keys(a),"asc")}},{key:"onTagInputChange",value:function(e,t){var a=this,i=t.value;i=i.replace(/[^a-z0-9\-]/g,""),this.filteredTags=this.validTags.filter(function(e){return e.indexOf(i)>=0&&a.tags.indexOf(e)<0&&"Folder"!==e}),t.value=i}},{key:"addTag",value:function(e,t){if("Folder"!==e){if(""===(e=(e=e.toLowerCase().replace(/[^a-z0-9\.\-\_]/g,"")).trim()))return;for(var a=0;a<this.tags.length;a++)if(e===this.tags[a])return}this.tags.push(e),this.tags=this.tags.slice(),t||this.tagChange.emit(this.tags)}},{key:"addToTags",value:function(e){var t=e.input;this.addTag(e.value),t&&setTimeout(function(){return t.value=""})}},{key:"onTagSelect",value:function(e,t){this.removeFromTags(t.value,!0),t.value="",this.addTag(e.option.value)}},{key:"removeFromTags",value:function(e,t){for(var a=0;a<this.tags.length;a++)if(e===this.tags[a]){this.tags.splice(a,1);break}this.tags=this.tags.slice(),t||(console.log(this.tags),this.tagChange.emit(this.tags))}},{key:"onTagClick",value:function(e,t){e.stopPropagation(),this.tagClicked.emit(t)}},{key:"openTagHelperDialog",value:function(){var e=this,t=this.dialogRef.open(Q,{width:"90vw",height:"90vh",data:{packages:this.packages,taskPkgDict:this.taskPkgDict,tags:this.tags}});t.componentInstance.tagToggleEvent.subscribe(function(a){if("Folder"!==a){var i=e.tags.indexOf(a);i>=0?e.tags.splice(i,1):e.tags.push(a),t.componentInstance.tags=e.tags,e.tagChange.emit(e.tags)}}),t.afterClosed().subscribe(function(){})}}]),t}()).\u0275fac=function(e){return new(e||G)(o.Mb(r.b))},G.\u0275cmp=o.Gb({type:G,selectors:[["bdp-tag-input"]],inputs:{packages:"packages",tasks:"tasks",tags:"tags",disabled:"disabled",highlightTags:"highlightTags"},outputs:{tagChange:"tagChange",tagClicked:"tagClicked"},features:[o.yb],decls:11,vars:11,consts:[[2,"width","100%"],[3,"selectable"],["tagList",""],[3,"color","removable","selected","click",4,"ngFor","ngForOf"],["matInput","",2,"width","100%",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matAutocomplete","disabled","matChipInputTokenEnd","keyup"],["tagInput",""],["align","end",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matPrefix","","class","mr-3",3,"click",4,"ngIf"],[3,"color","removable","selected","click"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],["align","end"],[3,"value"],["mat-icon-button","","matPrefix","",1,"mr-3",3,"click"],[1,"fas","fa-search-plus","fa-fw","fa-lg"]],template:function(e,t){if(1&e){var a=o.Tb();o.Sb(0,"mat-form-field",0),o.Sb(1,"mat-chip-list",1,2),o.Jc(3,H,3,5,"mat-chip",3),o.Sb(4,"input",4,5),o.ac("matChipInputTokenEnd",function(e){return t.addToTags(e)})("keyup",function(e){o.zc(a);var i=o.wc(5);return t.onTagInputChange(e,i)}),o.Rb(),o.Rb(),o.Jc(6,V,2,0,"mat-hint",6),o.Sb(7,"mat-autocomplete",7,8),o.ac("optionSelected",function(e){o.zc(a);var i=o.wc(5);return t.onTagSelect(e,i)}),o.Jc(9,K,2,2,"mat-option",9),o.Rb(),o.Jc(10,q,3,0,"button",10),o.Rb()}if(2&e){var i=o.wc(2),n=o.wc(8);o.Ab(1),o.lc("selectable",!0),o.Ab(2),o.lc("ngForOf",t.tags),o.Ab(1),o.lc("placeholder",t.disabled?"":"Add new tags here...")("matChipInputFor",i)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",!1)("matAutocomplete",n)("disabled",t.disabled),o.Ab(2),o.lc("ngIf",!t.disabled),o.Ab(3),o.lc("ngForOf",t.filteredTags),o.Ab(1),o.lc("ngIf",!t.disabled)}},directives:[b.b,h.c,f.m,h.b,_.c,f.n,_.a,h.a,m.a,h.d,b.e,v.j,g.b,b.f],encapsulation:2}),G)},nNey:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i("tyNb"),c=i("ofXK"),o=i("3Pt+"),l=i("bTqV"),s=i("Wp6s"),r=i("A5z7"),f=i("fXoL"),u=function(){var e=function e(){a(this,e)};return e.\u0275mod=f.Kb({type:e}),e.\u0275inj=f.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[c.c,o.d,n.g,l.c,s.h,r.e]]}),e}()},pkYj:function(e,t,i){"use strict";i.d(t,"a",function(){return A});var n,c,o=i("ofXK"),l=i("3Pt+"),s=i("bTqV"),r=i("qFsG"),f=i("bSwM"),u=i("+0xr"),b=i("A5z7"),d=i("NFeN"),p=i("/1cH"),g=i("kmnG"),h=i("Xa2L"),m=i("4wla"),v=i("tyNb"),k=i("wkOn"),S=i("fXoL"),R=((n=function e(){a(this,e)}).\u0275mod=S.Kb({type:n}),n.\u0275inj=S.Jb({factory:function(e){return new(e||n)},providers:[],imports:[[o.c,l.d,r.b,s.c,f.b,u.o,b.e,d.b,p.b,g.d,h.b,k.a,v.g,m.a]]}),n),F=i("wZkO"),D=i("0IaG"),w=i("d3UM"),x=i("jaxi"),y=i("f0Cb"),A=((c=function e(){a(this,e)}).\u0275mod=S.Kb({type:c}),c.\u0275inj=S.Jb({factory:function(e){return new(e||c)},providers:[],imports:[[o.c,l.d,F.g,D.f,w.b,d.b,r.b,g.d,x.c,s.c,f.b,y.b,R,k.a]]}),c)},wkOn:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var n=i("ofXK"),c=i("3Pt+"),o=i("7EHt"),l=i("kmnG"),s=i("d3UM"),r=i("A5z7"),f=i("NFeN"),u=i("0IaG"),b=i("bTqV"),d=i("f0Cb"),p=i("/1cH"),g=i("fXoL"),h=function(){var e=function e(){a(this,e)};return e.\u0275mod=g.Kb({type:e}),e.\u0275inj=g.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,c.d,o.b,l.d,s.b,r.e,f.b,p.b,u.f,b.c,d.b]]}),e}()}}])}();