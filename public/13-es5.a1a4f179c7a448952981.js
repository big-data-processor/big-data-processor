function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{GfiD:function(e,t,i){"use strict";i.r(t),i.d(t,"DataFileModule",(function(){return si}));var a=i("3Pt+"),n=i("ofXK"),c=i("/1cH"),r=i("A5z7"),o=i("qFsG"),l=i("d3UM"),s=i("bTqV"),b=i("NFeN"),d=i("8yBR"),f=i("+0xr"),u=i("M9IT"),g=i("bSwM"),h=i("f0Cb"),p=i("Dh3D"),v=i("nNey"),m=i("wkOn"),C=i("pkYj"),T=i("tyNb"),F=i("RMCY"),k=i("FvrZ"),U=i("+mqT"),w=i("7Cdu"),y=i("xsm5"),x=i("FtGj"),P=i("eIep"),L=i("2Vo4"),I=i("LRne"),D=i("fXoL"),j=i("flj8"),S=i("c3AT"),_=i("EnSQ"),M=i("0IaG"),B=i("YiK1"),J=i("i6c7"),E=i("kmnG"),O=i("I7HA"),R=i("FKr1"),N=["tagInput"];function A(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",12),D.cc("click",(function(e){return D.Bc(i),D.gc().gotoProject(e)})),D.Lc(1,"Project"),D.Tb()}}function V(e,t){if(1&e&&(D.Ub(0,"span"),D.Lc(1),D.Tb()),2&e){var i=D.gc(2);D.Cb(1),D.Nc(": ",i.currentProject.name,"")}}var $=function(e){return["/project",e]};function z(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",13),D.cc("click",(function(e){return D.Bc(i),D.gc().gotoProject(e)})),D.Lc(1,"Project "),D.Jc(2,V,2,1,"span",9),D.Tb()}if(2&e){var a=D.gc();D.nc("routerLink",D.rc(2,$,a.dataFile.project)),D.Cb(2),D.nc("ngIf",a.currentProject)}}var q=function(e){return["/project",e,"dataFile","list"]};function H(e,t){if(1&e&&(D.Ub(0,"li",1),D.Ub(1,"a",2),D.Lc(2,"DataFile List "),D.Tb(),D.Tb()),2&e){var i=D.gc();D.Cb(1),D.nc("routerLink",D.rc(1,q,i.dataFile.project))}}var Y=function(e){return["/dataFile",e,"info"]};function K(e,t){if(1&e&&(D.Ub(0,"li",14),D.Ub(1,"a",2),D.Lc(2,"File"),D.Tb(),D.Ub(3,"a",15),D.Pb(4,"i",16),D.Tb(),D.Tb()),2&e){var i=D.gc();D.Cb(1),D.nc("routerLink",D.rc(2,Y,i.dataFile.id)),D.Cb(2),D.nc("routerLink",D.rc(4,Y,i.dataFile.id))}}function G(e,t){1&e&&(D.Ub(0,"li",14),D.Lc(1,"File"),D.Tb())}function W(e,t){1&e&&(D.Ub(0,"div"),D.Lc(1," Loading... "),D.Tb())}function Q(e,t){if(1&e){var i=D.Vb();D.Ub(0,"p"),D.Ub(1,"u",37),D.Lc(2),D.Tb(),D.Lc(3),D.Ub(4,"u",37),D.Lc(5),D.Tb(),D.Ub(6,"span",25),D.cc("click",(function(){return D.Bc(i),D.gc(3).isEditing=!0})),D.Tb(),D.Tb()}if(2&e){var a=D.gc(3);D.Cb(2),D.Mc(null==a.dataFile?null:a.dataFile.prefix),D.Cb(1),D.Nc(" ",null==a.dataFile?null:a.dataFile.name," "),D.Cb(2),D.Mc(null==a.dataFile?null:a.dataFile.suffix)}}function X(e,t){if(1&e){var i=D.Vb();D.Sb(0),D.Ub(1,"mat-form-field",38),D.Ub(2,"input",39),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3).dataFile.prefix=e})),D.Tb(),D.Tb(),D.Ub(3,"mat-form-field",38),D.Ub(4,"input",40),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3).dataFile.suffix=e})),D.Tb(),D.Tb(),D.Ub(5,"mat-form-field",41),D.Ub(6,"i",42),D.cc("click",(function(){return D.Bc(i),D.gc(3).onSave()})),D.Tb(),D.Ub(7,"input",43),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3).dataFile.name=e})),D.Tb(),D.Ub(8,"span",44),D.Pb(9,"u",45),D.Tb(),D.Ub(10,"span",46),D.Pb(11,"u",45),D.Tb(),D.Tb(),D.Rb()}if(2&e){var a=D.gc(3);D.Cb(2),D.nc("ngModel",a.dataFile.prefix),D.Cb(2),D.nc("ngModel",a.dataFile.suffix),D.Cb(3),D.nc("ngModel",a.dataFile.name),D.Cb(2),D.nc("innerHTML",null==a.dataFile?null:a.dataFile.prefix,D.Cc),D.Cb(2),D.nc("innerHTML",null==a.dataFile?null:a.dataFile.suffix,D.Cc)}}function Z(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-form-field",41),D.Ub(1,"i",42),D.cc("click",(function(){return D.Bc(i),D.gc(3).onSave()})),D.Tb(),D.Ub(2,"textarea",47),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3).dataFile.desc=e})),D.Lc(3),D.Tb(),D.Tb()}if(2&e){var a=D.gc(3);D.Cb(2),D.nc("ngModel",a.dataFile.desc),D.Cb(1),D.Mc(a.dataFile.desc)}}function ee(e,t){if(1&e&&(D.Ub(0,"span",48),D.Lc(1),D.Tb()),2&e){var i=D.gc(3);D.Fb("badge-secondary","Folder"!==(null==i.dataFile?null:i.dataFile.format))("badge-success","Folder"===(null==i.dataFile?null:i.dataFile.format)),D.Cb(1),D.Nc("",null==i.dataFile?null:i.dataFile.format," ")}}function te(e,t){if(1&e){var i=D.Vb();D.Ub(0,"i",25),D.cc("click",(function(){return D.Bc(i),D.gc(3).isEditing=!0})),D.Tb()}}function ie(e,t){if(1&e){var i=D.Vb();D.Ub(0,"i",42),D.cc("click",(function(){return D.Bc(i),D.gc(4).onSave()})),D.Tb()}}function ae(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-form-field"),D.Jc(1,ie,1,0,"i",49),D.Ub(2,"input",50),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3).dataFile.format=e})),D.Tb(),D.Tb()}if(2&e){var a=D.gc(3);D.Cb(1),D.nc("ngIf",a.isEditing),D.Cb(1),D.nc("ngModel",a.dataFile.format)}}function ne(e,t){if(1&e){var i=D.Vb();D.Ub(0,"bdp-tag-input",51),D.cc("tagChange",(function(e){return D.Bc(i),D.gc(3).onTagChanged(e)})),D.Tb()}if(2&e){var a=D.gc(3);D.nc("packages",a.currentProject.packages)("tasks",a.tasks)("tags",a.dataFile.tags)("disabled",!a.isEditing)}}function ce(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",30),D.Ub(1,"div",20),D.Ub(2,"b"),D.Lc(3,"Folder"),D.Tb(),D.Tb(),D.Ub(4,"div",22),D.Ub(5,"a",2),D.Lc(6),D.Tb(),D.Ub(7,"span",52),D.cc("click",(function(){D.Bc(i);var e=D.gc(3);return e._viewControls.moveToDataFileID="",e.moveDataFileToFolder()})),D.Lc(8,"(X)"),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=D.gc(3);D.Cb(5),D.nc("routerLink",D.rc(2,Y,a.currentFolder.id)),D.Cb(1),D.Mc(a.currentFolder.name)}}function re(e,t){if(1&e&&(D.Ub(0,"mat-option",57),D.Lc(1),D.Tb()),2&e){var i=D.gc(4);D.nc("value",""),D.Cb(1),D.Nc(" Move out of the folder, ",i.currentFolder.name," ")}}function oe(e,t){if(1&e&&(D.Ub(0,"mat-option",57),D.Lc(1),D.Tb()),2&e){var i=D.gc().$implicit;D.nc("value",i.id),D.Cb(1),D.Mc(i.name)}}function le(e,t){if(1&e&&D.Jc(0,oe,2,2,"mat-option",54),2&e){var i=t.$implicit,a=D.gc(4);D.nc("ngIf",a.dataFile.parent!==i.id)}}function se(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",30),D.Pb(1,"br"),D.Ub(2,"div",20),D.Ub(3,"b"),D.Lc(4,"Folder"),D.Tb(),D.Tb(),D.Ub(5,"div",22),D.Lc(6," Move to folder: "),D.Ub(7,"mat-form-field"),D.Ub(8,"mat-select",53),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc(3)._viewControls.moveToDataFileID=e})),D.Jc(9,re,2,2,"mat-option",54),D.Jc(10,le,1,1,"ng-template",55),D.Tb(),D.Ub(11,"button",56),D.cc("click",(function(){return D.Bc(i),D.gc(3).moveDataFileToFolder()})),D.Lc(12,"Confirm"),D.Tb(),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=D.gc(3);D.Cb(8),D.nc("ngModel",a._viewControls.moveToDataFileID),D.Cb(1),D.nc("ngIf",a.dataFile.parent),D.Cb(1),D.nc("ngForOf",a.folders)}}function be(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div"),D.Ub(1,"div",58),D.Ub(2,"b"),D.Lc(3,"Export"),D.Tb(),D.Tb(),D.Ub(4,"div",22),D.Ub(5,"mat-form-field",59),D.Pb(6,"input",60,61),D.Ub(8,"mat-hint"),D.Lc(9,"(if you would also like to share this file to someone)"),D.Tb(),D.Tb(),D.Pb(10,"br"),D.Pb(11,"br"),D.Ub(12,"button",62),D.cc("click",(function(){D.Bc(i);var e=D.yc(7),t=D.gc(4);return t.dataExport(t.dataFile,"gdrive",e.value)})),D.Pb(13,"i",63),D.Lc(14,"Google Drive "),D.Tb(),D.Tb(),D.Tb()}}function de(e,t){1&e&&(D.Ub(0,"span"),D.Lc(1,"Loading the data ... "),D.Pb(2,"i",64),D.Tb())}function fe(e,t){if(1&e&&(D.Ub(0,"div"),D.Pb(1,"img",65),D.Tb()),2&e){var i=D.gc(4);D.Cb(1),D.nc("src","./data/api/dataFile/"+i.dataFile.id+"/view",D.Ec)}}function ue(e,t){if(1&e&&(D.Ub(0,"div",19),D.Pb(1,"br"),D.Jc(2,be,15,0,"div",9),D.Pb(3,"br"),D.Jc(4,de,3,0,"span",9),D.Pb(5,"hr"),D.Jc(6,fe,2,1,"div",9),D.Tb()),2&e){var i=D.gc(3);D.Cb(2),D.nc("ngIf","csv"==i.dataFile.format&&i._viewControls.showExportAndShare),D.Cb(2),D.nc("ngIf",i._viewControls.isDataLoading),D.Cb(2),D.nc("ngIf",i.isImage)}}function ge(e,t){if(1&e&&(D.Ub(0,"span",83),D.Lc(1),D.Tb()),2&e){var i=t.$implicit;D.Cb(1),D.Mc(i)}}function he(e,t){if(1&e){var i=D.Vb();D.Ub(0,"tr"),D.Ub(1,"td"),D.Ub(2,"a",2),D.Lc(3),D.Tb(),D.Tb(),D.Ub(4,"td"),D.Ub(5,"span",77),D.Lc(6),D.Tb(),D.Tb(),D.Ub(7,"td"),D.Jc(8,ge,2,1,"span",78),D.Tb(),D.Ub(9,"td"),D.Ub(10,"button",79),D.cc("click",(function(){D.Bc(i);var e=t.$implicit;return D.gc(5).onUnTrackFile(e)})),D.Ub(11,"span",80),D.Pb(12,"i",81),D.Pb(13,"i",82),D.Tb(),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=t.$implicit;D.Cb(2),D.nc("routerLink",D.rc(4,Y,a.id)),D.Cb(1),D.Mc(a.name),D.Cb(3),D.Mc(a.format),D.Cb(2),D.nc("ngForOf",a.tags)}}function pe(e,t){if(1&e&&(D.Ub(0,"span"),D.Ub(1,"div",74),D.Ub(2,"table",75),D.Ub(3,"thead"),D.Ub(4,"tr"),D.Ub(5,"th"),D.Lc(6,"Name"),D.Tb(),D.Ub(7,"th"),D.Lc(8,"Format"),D.Tb(),D.Ub(9,"th"),D.Lc(10,"Tags"),D.Tb(),D.Pb(11,"th"),D.Tb(),D.Tb(),D.Ub(12,"tbody"),D.Jc(13,he,14,6,"ng-template",76),D.Tb(),D.Tb(),D.Tb(),D.Tb()),2&e){var i=D.gc(4);D.Cb(13),D.nc("ngForOf",i.trackingFiles)("ngForTrackBy",i.trackByDataFile)}}function ve(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-tree-node",84),D.Ub(1,"li",85),D.Pb(2,"button",86),D.Ub(3,"mat-checkbox",87),D.cc("change",(function(){D.Bc(i);var e=t.$implicit;return D.gc(4).onTrackFileChange(e)})),D.Pb(4,"i",88),D.Ub(5,"span",89),D.Lc(6),D.Tb(),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=t.$implicit;D.Cb(3),D.nc("checked",a.state.selected),D.Cb(2),D.Ic("font-weight",a.state.highlighted?800:400),D.Cb(1),D.Mc(a.text)}}function me(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-nested-tree-node"),D.Ub(1,"li"),D.Ub(2,"div",85),D.Ub(3,"button",90),D.cc("click",(function(){D.Bc(i);var e=t.$implicit;return D.gc(4).toggleFiles(e)})),D.Ub(4,"mat-icon",91),D.Lc(5),D.Tb(),D.Tb(),D.Ub(6,"mat-checkbox",92),D.cc("change",(function(){D.Bc(i);var e=t.$implicit;return D.gc(4).onTrackFileChange(e)})),D.Pb(7,"i",93),D.Ub(8,"span",94),D.Lc(9),D.Tb(),D.Tb(),D.Tb(),D.Ub(10,"ul"),D.Qb(11,95),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=t.$implicit,n=D.gc(4);D.Cb(3),D.Db("aria-label","toggle "+a.text),D.Cb(2),D.Nc(" ",n.nestedTreeControl.isExpanded(a)?"expand_more":"chevron_right"," "),D.Cb(1),D.nc("checked",a.state.selected)("indeterminate",!a.state.selected&&a.state.highlighted),D.Cb(2),D.Ic("font-weight",a.state.highlighted?800:400),D.Cb(1),D.Mc(a.text),D.Cb(1),D.Fb("example-tree-invisible",!n.nestedTreeControl.isExpanded(a))}}var Ce=function(){return["/page"]},Te=function(e){return{datafile:e,static:"true"}},Fe=function(e){return["/data","api","dataFile",e,"static"]};function ke(e,t){if(1&e&&(D.Ub(0,"div",19),D.Ub(1,"div",66),D.Ub(2,"h4"),D.Lc(3,"Tracked file(s)"),D.Tb(),D.Jc(4,pe,14,2,"span",9),D.Tb(),D.Ub(5,"div",67),D.Ub(6,"h4"),D.Ub(7,"a",68),D.Lc(8,"Contained files"),D.Tb(),D.Ub(9,"a",69),D.Pb(10,"i",70),D.Tb(),D.Tb(),D.Ub(11,"mat-tree",71),D.Jc(12,ve,7,4,"mat-tree-node",72),D.Jc(13,me,12,9,"mat-nested-tree-node",73),D.Tb(),D.Tb(),D.Tb()),2&e){var i=D.gc(3);D.Cb(4),D.nc("ngIf",i.currentProject&&i.dataFile),D.Cb(3),D.nc("routerLink",D.qc(7,Ce))("queryParams",D.rc(8,Te,i.dataFile.id)),D.Cb(2),D.nc("routerLink",D.rc(10,Fe,i.dataFile.id)),D.Cb(2),D.nc("dataSource",i.nestedDataSource)("treeControl",i.nestedTreeControl),D.Cb(2),D.nc("matTreeNodeDefWhen",i.hasChildrenNodes)}}function Ue(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div"),D.Ub(1,"div",19),D.Ub(2,"div",20),D.Ub(3,"strong"),D.Lc(4,"Name"),D.Tb(),D.Tb(),D.Ub(5,"div",21),D.cc("dblclick",(function(){return D.Bc(i),D.gc(2).isEditing=!0})),D.Jc(6,Q,7,3,"p",9),D.Jc(7,X,12,5,"ng-container",9),D.Tb(),D.Tb(),D.Ub(8,"div",19),D.Ub(9,"div",20),D.Ub(10,"strong"),D.Lc(11,"Description"),D.Tb(),D.Tb(),D.Ub(12,"div",22),D.Ub(13,"div",23),D.Ub(14,"p",24),D.Lc(15),D.Ub(16,"i",25),D.cc("click",(function(){return D.Bc(i),D.gc(2).isEditing=!0})),D.Tb(),D.Tb(),D.Tb(),D.Jc(17,Z,4,2,"mat-form-field",26),D.Tb(),D.Tb(),D.Ub(18,"div",27),D.Ub(19,"div",20),D.Ub(20,"strong"),D.Lc(21,"Owner"),D.Tb(),D.Tb(),D.Ub(22,"div",22),D.Ub(23,"span"),D.Lc(24),D.Tb(),D.Tb(),D.Tb(),D.Ub(25,"div",19),D.Ub(26,"div",20),D.Ub(27,"strong"),D.Lc(28,"Creation"),D.Tb(),D.Tb(),D.Ub(29,"div",22),D.Ub(30,"p"),D.Lc(31),D.Tb(),D.Tb(),D.Tb(),D.Ub(32,"div",19),D.Ub(33,"div",20),D.Ub(34,"strong"),D.Lc(35,"Format"),D.Tb(),D.Tb(),D.Ub(36,"div",22),D.Jc(37,ee,2,5,"span",28),D.Jc(38,te,1,0,"i",29),D.Jc(39,ae,3,2,"mat-form-field",9),D.Tb(),D.Tb(),D.Ub(40,"div",30),D.Ub(41,"div",20),D.Ub(42,"strong"),D.Lc(43,"Tags"),D.Tb(),D.Tb(),D.Ub(44,"div",22),D.Jc(45,ne,1,4,"bdp-tag-input",31),D.Tb(),D.Tb(),D.Ub(46,"div",30),D.Ub(47,"div",20),D.Ub(48,"strong"),D.Lc(49,"Server path"),D.Tb(),D.Tb(),D.Ub(50,"div",22),D.Ub(51,"button",32),D.cc("click",(function(){return D.Bc(i),D.gc(2).copyFilePath()})),D.Pb(52,"i",33),D.Tb(),D.Ub(53,"small",34),D.Lc(54),D.Tb(),D.Tb(),D.Tb(),D.Jc(55,ce,9,4,"div",35),D.Jc(56,se,13,3,"div",35),D.Jc(57,ue,7,3,"div",36),D.Pb(58,"br"),D.Pb(59,"hr"),D.Jc(60,ke,14,12,"div",36),D.Tb()}if(2&e){var a=D.gc(2);D.Cb(6),D.nc("ngIf",!a.isEditing),D.Cb(1),D.nc("ngIf",a.isEditing),D.Cb(6),D.nc("hidden",a.isEditing),D.Cb(2),D.Nc("",(null==a.dataFile?null:a.dataFile.desc)||"None."," "),D.Cb(2),D.nc("ngIf",a.isEditing),D.Cb(7),D.Mc(a.dataFile.owner?a.dataFile.owner.name:"Unknown"),D.Cb(7),D.Mc(null==a.dataFile||null==a.dataFile.createdAt?null:a.dataFile.createdAt.calendar()),D.Cb(6),D.nc("ngIf",!a.isEditing||a.currentUser.auths.bdp<2||"Folder"===a.dataFile.format),D.Cb(1),D.nc("ngIf",!a.isEditing&&a.currentUser.auths.bdp>=2&&"Folder"!==a.dataFile.format),D.Cb(1),D.nc("ngIf",a.isEditing&&a.currentUser.auths.bdp>=2&&"Folder"!==a.dataFile.format),D.Cb(6),D.nc("ngIf",a.dataFile&&a.currentProject),D.Cb(9),D.Mc(a.dataFile.realPath||a.dataFile.path),D.Cb(1),D.nc("ngIf",a.dataFile.parent&&a.currentFolder),D.Cb(1),D.nc("ngIf",!a.dataFile.parent&&"Folder"!==a.dataFile.format&&a._viewControls.showMoveToFolder),D.Cb(1),D.nc("ngIf","Folder"!==a.dataFile.format),D.Cb(3),D.nc("ngIf","Folder"==a.dataFile.format)}}function we(e,t){1&e&&D.Pb(0,"div",96)}function ye(e,t){if(1&e&&(D.Ub(0,"div",17),D.Jc(1,Ue,61,16,"div",9),D.Jc(2,we,1,0,"div",18),D.Tb()),2&e){var i=D.gc();D.Cb(1),D.nc("ngIf",!i.isLoading),D.Cb(1),D.nc("ngIf",i.isDeleting)}}function xe(e,t){1&e&&D.Pb(0,"i",109)}function Pe(e,t){1&e&&D.Pb(0,"i",110)}var Le=function(e,t){return{"fa-edit":e,"fa-save":t}};function Ie(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",98),D.cc("click",(function(){return D.Bc(i),D.gc(2).onSave()})),D.Pb(1,"i",111),D.Ub(2,"span",105),D.Lc(3),D.Tb(),D.Ub(4,"span",102),D.Lc(5,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Fb("active",a.isEditing),D.Cb(1),D.nc("ngClass",D.sc(6,Le,!a.isEditing,a.isEditing)),D.Cb(1),D.Fb("active",a.showRightButtonContent||a.isEditing),D.Cb(1),D.Mc(a.isEditing?"Save":"Edit")}}function De(e,t){if(1&e){var i=D.Vb();D.Sb(0),D.Ub(1,"a",98),D.cc("click",(function(){return D.Bc(i),D.gc(2).importFileDialog()})),D.Pb(2,"i",112),D.Ub(3,"span",105),D.Lc(4,"Import files"),D.Tb(),D.Ub(5,"span",102),D.Lc(6,"\u276f"),D.Tb(),D.Tb(),D.Pb(7,"br"),D.Rb()}if(2&e){var a=D.gc(2);D.Cb(1),D.Fb("active",!!a._viewControls.showCreateFolder),D.Cb(2),D.Fb("active",a.showRightButtonContent||a._viewControls.showCreateFolder)}}function je(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",98),D.cc("click",(function(){D.Bc(i);var e=D.gc(2);return e.deleteDataFileDialog(e.dataFile)})),D.Pb(1,"i",113),D.Ub(2,"span",105),D.Lc(3,"Delete"),D.Tb(),D.Ub(4,"span",102),D.Lc(5,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Cb(2),D.Fb("active",a.showRightButtonContent)}}function Se(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",98),D.cc("click",(function(){D.Bc(i);var e=D.gc(2);return e._viewControls.showMoveToFolder=!e._viewControls.showMoveToFolder})),D.Ub(1,"span",114),D.Pb(2,"i",115),D.Pb(3,"i",116),D.Tb(),D.Ub(4,"span",105),D.Lc(5,"Move to Folder"),D.Tb(),D.Ub(6,"span",102),D.Lc(7,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Fb("active",a._viewControls.showMoveToFolder),D.Cb(4),D.Fb("active",a.showRightButtonContent||a._viewControls.showMoveToFolder)}}function _e(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",98),D.cc("click",(function(){D.Bc(i);var e=D.gc(2);return e._viewControls.showExportAndShare=!e._viewControls.showExportAndShare})),D.Pb(1,"i",117),D.Ub(2,"span",105),D.Lc(3,"Export"),D.Tb(),D.Ub(4,"span",102),D.Lc(5,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Fb("active",a._viewControls.showExportAndShare),D.Cb(2),D.Fb("active",a.showRightButtonContent||a._viewControls.showExportAndShare)}}var Me=function(e){return{datafile:e}};function Be(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",97),D.Ub(1,"a",98),D.cc("click",(function(){D.Bc(i);var e=D.gc();return e.showRightButtonContent=!e.showRightButtonContent})),D.Jc(2,xe,1,0,"i",99),D.Jc(3,Pe,1,0,"i",100),D.Ub(4,"span",101),D.Lc(5,"MENU"),D.Tb(),D.Ub(6,"span",102),D.Lc(7,"\u276f"),D.Tb(),D.Tb(),D.Pb(8,"br"),D.Jc(9,Ie,6,9,"a",103),D.Pb(10,"br"),D.Jc(11,De,8,4,"ng-container",9),D.Ub(12,"a",98),D.cc("click",(function(){return D.Bc(i),D.gc().onDownloadBtn()})),D.Pb(13,"i",104),D.Ub(14,"span",105),D.Lc(15,"Download"),D.Tb(),D.Ub(16,"span",102),D.Lc(17,"\u276f"),D.Tb(),D.Tb(),D.Pb(18,"br"),D.Jc(19,je,6,2,"a",106),D.Pb(20,"br"),D.Ub(21,"a",107),D.Pb(22,"i",108),D.Ub(23,"span",105),D.Lc(24,"File Page"),D.Tb(),D.Ub(25,"span",102),D.Lc(26,"\u276f"),D.Tb(),D.Tb(),D.Pb(27,"br"),D.Jc(28,Se,8,4,"a",103),D.Pb(29,"br"),D.Jc(30,_e,6,4,"a",103),D.Pb(31,"br"),D.Tb()}if(2&e){var a=D.gc();D.nc("@rightButtonState",a.showRightButtonContent?"active":"inactive"),D.Cb(2),D.nc("ngIf",a.showRightButtonContent),D.Cb(1),D.nc("ngIf",!a.showRightButtonContent),D.Cb(1),D.Fb("active",a.showRightButtonContent),D.Cb(5),D.nc("ngIf",!a.dataFile.readOnly),D.Cb(2),D.nc("ngIf",a.currentProject.privilege.canAddFile&&"Folder"===a.dataFile.format),D.Cb(3),D.Fb("active",a.showRightButtonContent),D.Cb(5),D.nc("ngIf",!a.dataFile.readOnly),D.Cb(2),D.nc("routerLink",D.qc(16,Ce))("queryParams",D.rc(17,Me,a.dataFile.id)),D.Cb(2),D.Fb("active",a.showRightButtonContent),D.Cb(5),D.nc("ngIf","Folder"!==a.dataFile.format&&!a.dataFile.parent),D.Cb(2),D.nc("ngIf","csv"==a.dataFile.format)}}var Je,Ee=function(){return["/home"]},Oe=function(){return["/project/list"]},Re=((Je=function(){function e(t,i,a,n,c,r,o,l){_classCallCheck(this,e),this.router=t,this.route=i,this.accountService=a,this.projectService=n,this.dataService=c,this.dialogRef=r,this.systemService=o,this.taskService=l,this.separatorKeysCodes=[x.g,x.c]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this.textToBeTag="",this.validTags=[],this.tagInputValue="",this.filteredTags=[],this.pathToName={},this.childrenNodes=new L.a([]),this.isLoading=!0,this.isEditing=!1,this.isDeleting=!1,this.showRightButtonContent=!1,this.features=[],this._subs=[],this.tasks=[],this.hintTags=[],this.currentProject=void 0,this._viewControls={isDataLoading:!1,viewMode:"",showMoveToFolder:!1,showExportAndShare:!1,moveToDataFileID:"",fileTreeOption:{},confirmDelete:""},this._subs.push(this.taskService.taskList$.subscribe((function(t){t&&(e.tasks=Object(U.a)(t,[function(e){return e.name}],["asc"]),e.validTags=e.getValidTags(t))}))),this._subs.push(this.accountService.currentUser$.subscribe((function(t){return e.currentUser=t}))),this._subs.push(this.dataService.incomingData$.subscribe((function(t){return e.resultData=t.data}))),this._subs.push(this.projectService.currentProject$.subscribe((function(t){t&&(t&&!e.currentProject||t.id===e.currentProject.id)&&(e.currentProject=t,e.allowedFormats=_toConsumableArray(new Set([].concat.apply([],e.currentProject.packages.map((function(e){return e.allowedFormats}))))).map((function(e){return e.toString()})),e.updateChildrenNodes(),t.packages&&e.taskService.loadTasks(t.packages.map((function(e){return e.id}))))}))),this.route.queryParamMap.subscribe((function(t){e.isEditing="1"===t.get("edit")})),this.route.paramMap.pipe(Object(P.a)((function(t){var i=t.get("dataId");return e.isLoading=!0,e.resultData=void 0,e.dataFile=void 0,e._viewControls.viewMode="",i?e.projectService.loadDataFileInfo(i):Object(I.a)({errors:[],success:null})}))).subscribe((function(t){e.dataFile=t.success,e._viewControls.showMoveToFolder=!1,e.isLoading=!1,e.resultData=void 0,e.dataFile&&"Folder"===e.dataFile.format&&e.listFiles()})),this._subs.push(this.systemService.sysInfo$.subscribe((function(t){e.sysConfig=t,t&&(e.recaptchaKey=t.reCaptchaSiteKey)}))),this.nestedTreeControl=new k.k((function(e){return e.children})),this.nestedDataSource=new d.d,this.childrenNodes.subscribe((function(t){return e.nestedDataSource.data=t}))}},{key:"getValidTags",value:function(e){var t={};return e.forEach((function(e){var i=e.arguments.filter((function(e){return"inFile"===e.type||"outFile"===e.type})).map((function(e){return e.tags}));[].concat.apply([],i).forEach((function(e){t[e]=1}))})),Object.keys(t)}},{key:"loadData",value:function(){var e;"csv"===this.dataFile.format?e="table":"json"===this.dataFile.format&&(e="json"),this.dataService.getData(this.dataFile.id,e,!1)}},{key:"getNameByPath",value:function(e){if(this.currentProject&&this.dataFile){if(this.dataFile.path===e)return this.dataFile.name+"."+this.dataFile.format;for(var t=this.trackingFiles,i=0;i<t.length;i++)if(t[i].path===e||t[i].realPath===e)return t[i].name+"."+t[i].format;return""}return""}},{key:"isTracked",value:function(e){if(this.currentProject&&this.dataFile){if(this.dataFile.path===e)return 1;for(var t=this.trackingFiles,i=0;i<t.length;i++){if(t[i].path===e||t[i].realPath===e)return 1;if(0===t[i].path.indexOf(e))return 2}return 0}return 0}},{key:"setViewMode",value:function(e){this._viewControls.viewMode=e}},{key:"trackByDataFile",value:function(e,t){return t.id}},{key:"onSave",value:function(){var e=this;this.isEditing?(this.isEditing=!1,this._subs.push(this.projectService.updateDataFileInfo(this.dataFile).subscribe((function(t){e.dataFile=t.success})))):this.isEditing=!0}},{key:"onDownloadBtn",value:function(){this.dataService.downloadData(this.dataFile.id)}},{key:"gotoProject",value:function(e){var t=this.dataFile.project;t&&this.router.navigate(["/project/"+t+"/info"])}},{key:"gotoResult",value:function(){var e=this.dataFile.result;e&&this.router.navigate(["/result/"+e+"/info"])}},{key:"deleteDataFileDialog",value:function(e){var t=this,i=this.dialogRef.open(y.a,{disableClose:!1});i.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">You are going to delete the data file:\'<strong>'+e.name+"</strong>'?</h4>",desc:'<span class="text-danger">This will delete the data file, name: <b>'+e.name+"</b><br>This cannot be undone. Make sure this is something you really want to do!</span><br>"}),i.afterClosed().subscribe((function(i){i&&t.deleteDataFile(e,i)}))}},{key:"deleteDataFile",value:function(e,t){var i=this;this.isDeleting=!0,e.status=3,this._subs.push(this.projectService.deleteDataFile(e).subscribe((function(e){i.router.navigate(["/project",i.dataFile.project,"dataFile","list"])})))}},{key:"dataExport",value:function(e,t,i){this.projectService.exportDataFile(e,t,i),this._viewControls.showExportAndShare=!1}},{key:"moveDataFileToFolder",value:function(){var e=this;(this.dataFile.parent||""!==this._viewControls.moveToDataFileID)&&this.dataFile.parent!==this._viewControls.moveToDataFileID&&this._subs.push(this.projectService.moveDataFileToFolder(this.dataFile,this._viewControls.moveToDataFileID).subscribe((function(t){e._viewControls.showMoveToFolder=!1,e._viewControls.moveToDataFileID="",t.isError||(e.dataFile=t.success)})))}},{key:"onTrackFileChange",value:function(e){var t=this;if("Folder"===this.dataFile.format){var i=e.value.path;if(e.state.selected){e.state.selected=!1;var a=this.trackingFiles.filter((function(e){return e.path===i||e.realPath===i}))[0];!a||a.parent!==this.dataFile.id&&this.dataFile.parent!=this.dataFile.parent||this.projectService.untrackDataFile(a).subscribe((function(i){if(i.isError)e.state.selected=!0;else{var a=t.isTracked(e.value.path);e.state.highlighted=a>0}}))}else e.state.highlighted=!0,this.projectService.trackDataFile(i,this.dataFile).subscribe((function(t){t.isError||(e.state.highlighted=!0,e.state.selected=!0)}))}}},{key:"toggleFiles",value:function(e){var t=this;console.log(e.children),e.state.opened||"directory"!==e.value.type?(e.state.opened=!e.state.opened,e.state.opened?this.nestedTreeControl.expand(e):this.nestedTreeControl.collapse(e)):(e.state.loading=!0,this.projectService.listFilesInDataFolder(this.dataFile,e.value.path).subscribe((function(i){var a=i.success.map((function(e){return t._convertTreeData(e)}));e.children.next(a),e.state.loading=!1,e.state.opened=!e.state.opened,t.nestedTreeControl.expand(e)})))}},{key:"_convertTreeData",value:function(e){var t=this,i=this.isTracked(e.path);if(e.state){var a=this.getNameByPath(e.value.path);return a&&console.log(a),e.state.selected=!!a,e.state.highlighted=!!a,e.text=a||e.text,e.children&&e.children.length>0&&(e.children=new L.a(e.children.map((function(e){return t._convertTreeData(e)})))),e}return{text:e.name,value:e,children:new L.a("directory"===e.type?e.children.map((function(e){return t._convertTreeData(e)})):[]),icon:e.children?void 0:"tree-file",state:{opened:!1,selected:1===i,disabled:!1,loading:!1,highlighted:i>0,openable:"directory"===e.type,dropAllowed:!1}}}},{key:"hasChildrenNodes",value:function(e,t){return"directory"===t.value.type}},{key:"listFiles",value:function(){var e=this;this.projectService.listFilesInDataFolder(this.dataFile).subscribe((function(t){t.isError||e.childrenNodes.next(t.success.map((function(t){return e._convertTreeData(t)})))}))}},{key:"updateChildrenNodes",value:function(){var e=this;this.childrenNodes&&this.childrenNodes.next(this.childrenNodes.value.map((function(t){return e._convertTreeData(t)})))}},{key:"onTrackFile",value:function(e,t){var i=this;e.preventDefault(),e.stopPropagation(),"Folder"===this.dataFile.format&&this._subs.push(this.projectService.trackDataFile(t.data.path,this.dataFile).subscribe((function(e){e.isError||i.listFiles()})))}},{key:"onUnTrackFile",value:function(e){var t=this;e.parent===this.dataFile.id&&this.projectService.untrackDataFile(e).subscribe((function(e){e.isError||t.updateChildrenNodes()}))}},{key:"onTagChanged",value:function(e){this.dataFile&&(this.dataFile.tags=e)}},{key:"importFileDialog",value:function(){var e=this;this.dataFile&&"Folder"===this.dataFile.format&&(this._viewControls.showCreateFolder=!0,this.dialogRef.open(w.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{allowedFormats:this.allowedFormats,project:this.currentProject,sysConfig:this.sysConfig,parentDataFileID:this.dataFile.id,tasks:this.tasks,importType:"local",currentUser:this.currentUser,tags:[]}}).afterClosed().subscribe((function(){e._viewControls.showCreateFolder=!1})))}},{key:"copyFilePath",value:function(){if(this.dataFile){var e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=this.dataFile.path||this.dataFile.realPath,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},{key:"ngOnDestroy",value:function(){for(var e=0;e<this._subs.length;e++)this._subs[e].unsubscribe()}},{key:"isImage",get:function(){return!!this.dataFile&&!!this.dataFile.format.toLowerCase().match(/jpg|jpeg|gif|png/)}},{key:"folders",get:function(){return this.currentProject&&this.currentProject.dataFiles?this.currentProject.dataFiles.filter((function(e){return"Folder"===e.format&&!e.hidden})):[]}},{key:"trackingFiles",get:function(){var e=[];if(this.currentProject&&this.dataFile)for(var t=this.currentProject.dataFiles,i=0;i<t.length;i++)t[i].id!==this.dataFile.id&&(this.dataFile.id===t[i].parent||this.dataFile.parent&&this.dataFile.parent===t[i].parent)&&(e.push(t[i]),this.pathToName[t[i].path]=t[i].name);return e}},{key:"currentFolder",get:function(){var e=this;return this.currentProject&&this.currentProject.dataFiles?this.currentProject.dataFiles.filter((function(t){return"Folder"===t.format&&e.dataFile.parent===t.id}))[0]:void 0}}]),e}()).\u0275fac=function(e){return new(e||Je)(D.Ob(T.c),D.Ob(T.a),D.Ob(j.a),D.Ob(S.a),D.Ob(_.a),D.Ob(M.b),D.Ob(B.a),D.Ob(J.a))},Je.\u0275cmp=D.Ib({type:Je,selectors:[["datafile-info"]],viewQuery:function(e,t){var i;1&e&&D.Rc(N,!0),2&e&&D.xc(i=D.dc())&&(t.tagInput=i.first)},decls:21,vars:12,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["class","link",3,"click",4,"ngIf"],[3,"routerLink","click",4,"ngIf"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[4,"ngIf"],["class","container-fluid","style","height: 100%",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[1,"link",3,"click"],[3,"routerLink","click"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid",2,"height","100%"],["class","overlay",4,"ngIf"],[1,"row"],[1,"col-md-2"],[1,"col-md-10",3,"dblclick"],[1,"col-md-10"],[3,"hidden"],[2,"word-break","break-all"],[1,"ml-1","link","fa","fa-edit","fa-lg",3,"click"],["style","width: 100%;",4,"ngIf"],[1,"row","mb-3"],["class","badge m-1",3,"badge-secondary","badge-success",4,"ngIf"],["class","ml-1 link fa fa-edit fa-lg",3,"click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[3,"packages","tasks","tags","disabled","tagChange",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"fas","fa-link","fa-fw","fa-lg","mr-2"],[1,"text-muted"],["class","row","style","margin-top: 10px;",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-muted",2,"white-space","pre"],[2,"width","50%"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix for the data file(s)",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix for the data file(s)",3,"ngModel","ngModelChange"],[2,"width","100%"],["matPrefix","",1,"link","fa","fa-save","fa-lg","mr-1",3,"click"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["matPrefix",""],[1,"text-muted",2,"white-space","pre",3,"innerHTML"],["matSuffix",""],["matInput","","placeholder","Say something about this DataFile. (max length: 300 characters)","maxlength","300","rows","4",3,"ngModel","ngModelChange"],[1,"badge","m-1"],["matPrefix","","class","link fa fa-save fa-lg mr-1",3,"click",4,"ngIf"],["matInput","","type","text","maxlength","16","size","16","placeholder","The data file format",3,"ngModel","ngModelChange"],[3,"packages","tasks","tags","disabled","tagChange"],[1,"link",2,"text-decoration","underline",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngIf"],["ngFor","",3,"ngForOf"],["mat-raised-button","","type","button","color","primary",3,"click"],[3,"value"],[1,"col-md-2",2,"line-height","1.42857143"],[2,"width","350px"],["matInput","","type","text","placeholder","[Optional] Put the email to share"],["shareEmail",""],["mat-raised-button","","type","button",1,"btn","btn-danger","btn-xs",3,"click"],[1,"fab","fa-google-drive","mr-2"],[1,"fas","fa-circle-o-notch","fa-spin","fa-fw"],[1,"img-responsive",3,"src"],[1,"col-md-6",2,"border-right","1px solid black","min-height","350px"],[1,"col-md-6"],[3,"routerLink","queryParams"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"link","fas","fa-external-link-alt","fa-fx"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"container-fluid",2,"overflow","auto"],[1,"table","table-condensed"],["ngFor","",3,"ngForOf","ngForTrackBy"],[1,"badge","badge-secondary"],["class","badge badge-primary",4,"ngFor","ngForOf"],["mat-icon-button","","color","accent",3,"click"],[1,"fa-stack"],[1,"fas","fa-thumbtack","fa-stack-1x"],[1,"fas","fa-slash","fa-stack-1x","text-danger"],[1,"badge","badge-primary"],["matTreeNodeToggle",""],[1,"mat-tree-node"],["mat-icon-button","","disabled",""],[3,"checked","change"],[1,"far","fa-file-alt","fa-lg","fa-fw","mr-2"],[2,"font-size","1rem"],["mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"],[1,"fas","fa-folder-open","fa-lg","fa-fw","mr-2"],[2,"font-size","1.2rem"],["matTreeNodeOutlet",""],[1,"overlay"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],["class","chi-rbtn",3,"active","click",4,"ngIf"],[1,"fas","fa-file-download","fa-fw"],[1,"chi-rbtn-content"],["class","chi-rbtn",3,"click",4,"ngIf"],[1,"chi-rbtn",3,"routerLink","queryParams"],["aria-hidden","true",1,"fas","fa-scroll","fa-fw"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["aria-hidden","true",1,"fas","fa-fw",3,"ngClass"],[1,"fa","fa-upload","fa-fw"],["aria-hidden","true",1,"fas","fa-trash","fa-fw"],[1,"fa-stack","fa-2x","fa-fw",2,"font-size","9px"],[1,"far","fa-folder","fa-stack-2x","fa-fw"],[1,"fas","fa-arrow-right","fa-stack-1x","fa-fw"],[1,"fas","fa-cloud-upload-alt"]],template:function(e,t){1&e&&(D.Ub(0,"ol",0),D.Ub(1,"li",1),D.Ub(2,"a",2),D.Lc(3,"Home"),D.Tb(),D.Tb(),D.Ub(4,"li",1),D.Ub(5,"a",2),D.Lc(6,"Project List"),D.Tb(),D.Tb(),D.Ub(7,"li",1),D.Jc(8,A,2,0,"a",3),D.Jc(9,z,3,4,"a",4),D.Tb(),D.Jc(10,H,3,3,"li",5),D.Jc(11,K,5,6,"li",6),D.Jc(12,G,2,0,"li",6),D.Tb(),D.Ub(13,"div",7),D.Ub(14,"h4",8),D.Lc(15,"Data information"),D.Tb(),D.Jc(16,W,2,0,"div",9),D.Pb(17,"br"),D.Pb(18,"br"),D.Jc(19,ye,3,2,"div",10),D.Tb(),D.Jc(20,Be,32,19,"div",11)),2&e&&(D.Cb(2),D.nc("routerLink",D.qc(10,Ee)),D.Cb(3),D.nc("routerLink",D.qc(11,Oe)),D.Cb(3),D.nc("ngIf",!t.dataFile),D.Cb(1),D.nc("ngIf",null==t.dataFile?null:t.dataFile.project),D.Cb(1),D.nc("ngIf",t.dataFile),D.Cb(1),D.nc("ngIf",t.dataFile),D.Cb(1),D.nc("ngIf",!t.dataFile),D.Cb(4),D.nc("ngIf",t.isLoading),D.Cb(3),D.nc("ngIf",t.dataFile),D.Cb(1),D.nc("ngIf",t.dataFile))},directives:[T.f,n.n,s.b,E.b,o.a,a.b,a.e,a.i,a.l,E.f,E.g,O.a,l.a,n.m,R.k,E.e,d.b,d.f,d.e,d.i,g.a,d.a,b.a,d.g,n.l],styles:[".mat-option.mat-active[_ngcontent-%COMP%]{background:rgba(0,123,255,.4)}.mat-option[_ngcontent-%COMP%]:hover{background:rgba(0,123,255,.2)}.example-tree[_ngcontent-%COMP%]{background-color:transparent;transform-origin:0 0}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.mat-tree-node[_ngcontent-%COMP%]{min-height:unset}.example-tree-invisible[_ngcontent-%COMP%]{display:none}"],data:{animation:[F.a]}}),Je),Ne=i("MKys"),Ae=i("R0Ic"),Ve=i("wd/R");function $e(e,t){if(1&e&&(D.Ub(0,"span"),D.Lc(1),D.Tb()),2&e){var i=D.gc(2);D.Cb(1),D.Nc(": ",i.currentProject.name,"")}}var ze=function(e){return["/project",e,"info"]};function qe(e,t){if(1&e&&(D.Ub(0,"a",2),D.Lc(1,"Project "),D.Jc(2,$e,2,1,"span",14),D.Tb()),2&e){var i=D.gc();D.nc("routerLink",D.rc(2,ze,i.currentProject.id)),D.Cb(2),D.nc("ngIf",i.currentProject)}}var He=function(e){return["/project",e,"dataFile","list"]};function Ye(e,t){if(1&e&&(D.Ub(0,"li",15),D.Ub(1,"a",2),D.Lc(2,"DataFile List"),D.Tb(),D.Ub(3,"a",16),D.Pb(4,"i",17),D.Tb(),D.Tb()),2&e){var i=D.gc();D.Cb(1),D.nc("routerLink",D.rc(2,He,i.currentProject.id)),D.Cb(2),D.nc("routerLink",D.rc(4,He,i.currentProject.id))}}function Ke(e,t){1&e&&(D.Ub(0,"li",15),D.Lc(1,"DataFile List"),D.Tb())}function Ge(e,t){if(1&e){var i=D.Vb();D.Ub(0,"span",52),D.cc("click",(function(){D.Bc(i);var e=t.$implicit;return D.gc(2).toggleTag(e)})),D.Lc(1),D.Tb()}if(2&e){var a=t.$implicit,n=D.gc(2);D.Fb("badge-primary",n._viewControls.filteredTags.indexOf(a)>=0)("badge-secondary",-1===n._viewControls.filteredTags.indexOf(a)),D.Cb(1),D.Mc(a)}}function We(e,t){1&e&&(D.Sb(0),D.Lc(1,"s"),D.Rb())}function Qe(e,t){if(1&e){var i=D.Vb();D.Ub(0,"button",54),D.cc("click",(function(){return D.Bc(i),D.gc(3).onDownloadSelected()})),D.Pb(1,"i",58),D.Tb()}}function Xe(e,t){if(1&e){var i=D.Vb();D.Ub(0,"button",59),D.cc("click",(function(){return D.Bc(i),D.gc(3).deleteDataFileDialog()})),D.Ub(1,"mat-icon"),D.Lc(2,"delete"),D.Tb(),D.Tb()}}function Ze(e,t){if(1&e&&(D.Ub(0,"mat-option",68),D.Lc(1),D.Tb()),2&e){var i=D.gc().$implicit;D.nc("value",i),D.Cb(1),D.Nc(" ",i.name+" (owner: "+i.owner+")"," ")}}function et(e,t){if(1&e&&(D.Sb(0),D.Jc(1,Ze,2,2,"mat-option",67),D.Rb()),2&e){var i=t.$implicit,a=D.gc(4);D.Cb(1),D.nc("ngIf",i.id!==a.currentProject.id&&i.privilege.canAddFile)}}function tt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",19),D.Ub(1,"mat-form-field",60),D.Ub(2,"mat-select",61,62),D.Jc(4,et,2,1,"ng-container",63),D.Tb(),D.Tb(),D.Ub(5,"mat-checkbox",null,64),D.Lc(7,"Make a full copy"),D.Tb(),D.Ub(8,"small",65),D.Lc(9,"*If checked, the file/folder content will be copied."),D.Tb(),D.Pb(10,"br"),D.Ub(11,"button",66),D.cc("click",(function(){D.Bc(i);var e=D.yc(3),t=D.yc(6);return D.gc(3).importToProject(e.value,t.checked),e.value=void 0})),D.Lc(12,"Export files to selected project"),D.Tb(),D.Tb()}if(2&e){var a=D.yc(3),n=D.gc(3);D.Cb(4),D.nc("ngForOf",n.projectList),D.Cb(7),D.nc("disabled",!a.value)}}function it(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",7),D.Ub(1,"div",19),D.Ub(2,"span"),D.Lc(3),D.Jc(4,We,2,0,"ng-container",14),D.Tb(),D.Pb(5,"i",53),D.Ub(6,"button",54),D.cc("click",(function(){return D.Bc(i),D.gc(2).onToggleFileImport()})),D.Ub(7,"mat-icon"),D.Lc(8,"move_to_inbox"),D.Tb(),D.Tb(),D.Jc(9,Qe,2,0,"button",55),D.Jc(10,Xe,3,0,"button",56),D.Tb(),D.Jc(11,tt,13,2,"div",57),D.Tb()}if(2&e){var a=D.gc(2);D.Cb(3),D.Nc("Selected ",a.selectedList.length," data file"),D.Cb(1),D.nc("ngIf",a.selectedList.length>1),D.Cb(5),D.nc("ngIf",a.currentProject.privilege.canView),D.Cb(1),D.nc("ngIf",a.currentProject.privilege.canDeleteFile),D.Cb(1),D.nc("ngIf",a.toggleFileImport)}}function at(e,t){if(1&e){var i=D.Vb();D.Ub(0,"th",69),D.Ub(1,"mat-checkbox",70,71),D.cc("change",(function(e){return D.Bc(i),D.gc(2).onAllCheckBoxChange(e)})),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Cb(1),D.nc("checked",a.selectedList.length===a.pageSize||a.selectedList.length===a.dataFiles.length)("indeterminate",a.selectedList.length>0&&a.selectedList.length<a.pageSize&&a.selectedList.length<a.dataFiles.length)}}function nt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"td",72),D.Ub(1,"mat-checkbox",73),D.cc("change",(function(e){D.Bc(i);var a=t.$implicit;return D.gc(2).onFileCheckBoxChange(e,a.id)}))("click",(function(e){return D.Bc(i),e.stopPropagation()})),D.Tb(),D.Tb()}if(2&e){var a=t.$implicit,n=D.gc(2);D.Db("rowspan",n.expandedDataFiles.has(a.id)||n.isEditing?2:1),D.Cb(1),D.nc("checked",n.selectedList.indexOf(a.id)>=0)}}function ct(e,t){1&e&&(D.Ub(0,"th",74),D.Lc(1,"Prefix"),D.Tb())}function rt(e,t){if(1&e&&(D.Ub(0,"u",78),D.Lc(1),D.Tb()),2&e){var i=D.gc().$implicit;D.Cb(1),D.Mc(i.prefix)}}function ot(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-form-field",60),D.Ub(1,"input",79),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc().$implicit.prefix=e})),D.Tb(),D.Tb()}if(2&e){var a=D.gc().$implicit;D.Cb(1),D.nc("ngModel",a.prefix)}}function lt(e,t){if(1&e&&(D.Ub(0,"td",75),D.Jc(1,rt,2,1,"u",76),D.Jc(2,ot,2,1,"mat-form-field",77),D.Tb()),2&e){var i=D.gc(2);D.Cb(1),D.nc("ngIf",!i.isEditing),D.Cb(1),D.nc("ngIf",i.isEditing)}}function st(e,t){1&e&&(D.Ub(0,"th",74),D.Ub(1,"span",80),D.Lc(2,"Name"),D.Tb(),D.Tb())}function bt(e,t){1&e&&D.Pb(0,"i",85)}var dt=function(e){return["/dataFile",e,"info"]};function ft(e,t){if(1&e&&(D.Sb(0),D.Ub(1,"a",2),D.Jc(2,bt,1,0,"i",82),D.Lc(3),D.Tb(),D.Ub(4,"a",83),D.Pb(5,"span",84),D.Tb(),D.Rb()),2&e){var i=D.gc().$implicit;D.Cb(1),D.nc("routerLink",D.rc(4,dt,i.id)),D.Cb(1),D.nc("ngIf","Folder"===i.format),D.Cb(1),D.Nc(" ",null==i?null:i.name," "),D.Cb(1),D.nc("routerLink",D.rc(6,dt,i.id))}}function ut(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-form-field",60),D.Ub(1,"input",86),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc().$implicit.name=e})),D.Tb(),D.Tb()}if(2&e){var a=D.gc().$implicit;D.Cb(1),D.nc("ngModel",a.name)}}function gt(e,t){if(1&e&&(D.Ub(0,"td",81),D.Jc(1,ft,6,8,"ng-container",14),D.Jc(2,ut,2,1,"mat-form-field",77),D.Tb()),2&e){var i=D.gc(2);D.Cb(1),D.nc("ngIf",!i.isEditing),D.Cb(1),D.nc("ngIf",i.isEditing)}}function ht(e,t){1&e&&(D.Ub(0,"th",74),D.Lc(1,"Suffix"),D.Tb())}function pt(e,t){if(1&e&&(D.Ub(0,"u",78),D.Lc(1),D.Tb()),2&e){var i=D.gc().$implicit;D.Cb(1),D.Mc(i.suffix)}}function vt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"mat-form-field",60),D.Ub(1,"input",88),D.cc("ngModelChange",(function(e){return D.Bc(i),D.gc().$implicit.suffix=e})),D.Tb(),D.Tb()}if(2&e){var a=D.gc().$implicit;D.Cb(1),D.nc("ngModel",a.suffix)}}function mt(e,t){if(1&e&&(D.Ub(0,"td",87),D.Jc(1,pt,2,1,"u",76),D.Jc(2,vt,2,1,"mat-form-field",77),D.Tb()),2&e){var i=D.gc(2);D.Cb(1),D.nc("ngIf",!i.isEditing),D.Cb(1),D.nc("ngIf",i.isEditing)}}function Ct(e,t){1&e&&(D.Ub(0,"th",74),D.Lc(1,"Status"),D.Tb())}function Tt(e,t){1&e&&D.Pb(0,"i",96)}function Ft(e,t){1&e&&(D.Ub(0,"p",97),D.Pb(1,"i",98),D.Tb())}function kt(e,t){1&e&&D.Pb(0,"i",99)}function Ut(e,t){1&e&&D.Pb(0,"i",100)}function wt(e,t){1&e&&D.Pb(0,"i",101)}function yt(e,t){if(1&e&&(D.Ub(0,"td",89),D.Ub(1,"div",90),D.Jc(2,Tt,1,0,"i",91),D.Jc(3,Ft,2,0,"p",92),D.Jc(4,kt,1,0,"i",93),D.Jc(5,Ut,1,0,"i",94),D.Jc(6,wt,1,0,"i",95),D.Tb(),D.Tb()),2&e){var i=t.$implicit;D.Cb(1),D.nc("ngSwitch",null==i?null:i.status),D.Cb(1),D.nc("ngSwitchCase",0),D.Cb(1),D.nc("ngSwitchCase",1),D.Cb(1),D.nc("ngSwitchCase",2),D.Cb(1),D.nc("ngSwitchCase",3),D.Cb(1),D.nc("ngSwitchCase",4)}}function xt(e,t){1&e&&(D.Ub(0,"th",74),D.Lc(1,"Creation time"),D.Tb())}function Pt(e,t){if(1&e&&(D.Ub(0,"td",89),D.Lc(1),D.Tb()),2&e){var i=t.$implicit;D.Cb(1),D.Mc(null==i||null==i.createdAt?null:i.createdAt.format("YYYY/MM/DD HH:mm:ss"))}}function Lt(e,t){1&e&&(D.Ub(0,"th",74),D.Lc(1,"Owner"),D.Tb())}function It(e,t){if(1&e&&(D.Ub(0,"td",89),D.Ub(1,"span"),D.Lc(2),D.Tb(),D.Tb()),2&e){var i=t.$implicit;D.Cb(2),D.Mc(null==i||null==i.owner?null:i.owner.name)}}function Dt(e,t){1&e&&(D.Ub(0,"th",102),D.Lc(1,"Tags"),D.Tb())}function jt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"td",103),D.Ub(1,"bdp-tag-input",104),D.cc("tagChange",(function(e){D.Bc(i);var a=t.$implicit;return D.gc(2).onTagChanged(e,a)}))("tagClicked",(function(e){return D.Bc(i),D.gc(2).onTagClicked(e)})),D.Tb(),D.Tb()}if(2&e){var a=t.$implicit,n=D.gc(2);D.Cb(1),D.nc("packages",n.currentProject.packages)("tasks",n.tasks)("tags",a.tags)("disabled",!n.isEditing)("highlightTags",n._viewControls.filteredTags)}}function St(e,t){if(1&e&&(D.Ub(0,"span",114),D.Lc(1),D.Tb()),2&e){var i=t.$implicit;D.Fb("badge-primary","Folder"!==i)("badge-success","Folder"===i),D.Cb(1),D.Mc(i)}}function _t(e,t){1&e&&(D.Ub(0,"span",115),D.Lc(1,"No Tags"),D.Tb())}var Mt=function(e){return{"fa-folder":e}};function Bt(e,t){if(1&e&&(D.Sb(0),D.Ub(1,"tr"),D.Ub(2,"td"),D.Ub(3,"a",2),D.Pb(4,"i",109),D.Ub(5,"b"),D.Lc(6),D.Tb(),D.Tb(),D.Tb(),D.Ub(7,"td"),D.Jc(8,St,2,5,"span",110),D.Jc(9,_t,2,0,"span",111),D.Tb(),D.Ub(10,"td",112),D.Lc(11),D.Tb(),D.Tb(),D.Ub(12,"tr"),D.Ub(13,"td",113),D.Pb(14,"span",107),D.Lc(15),D.Tb(),D.Tb(),D.Rb()),2&e){var i=t.$implicit;D.Cb(3),D.nc("routerLink",D.rc(9,dt,i.id)),D.Cb(1),D.nc("ngClass",D.rc(11,Mt,"Folder"===i.format)),D.Cb(1),D.Fb("text-success","Folder"===i.format),D.Cb(1),D.Mc(i.name),D.Cb(2),D.nc("ngForOf",i.tags),D.Cb(1),D.nc("ngIf",!i.tags||0===i.tags.length),D.Cb(2),D.Mc(null==i||null==i.createdAt?null:i.createdAt.format("YYYY/MM/DD HH:mm:ss")),D.Cb(4),D.Nc("Description: ",i.desc||"no descriptions","")}}function Jt(e,t){if(1&e&&(D.Ub(0,"div"),D.Ub(1,"strong"),D.Pb(2,"i",107),D.Lc(3,"Contained tracked files"),D.Tb(),D.Lc(4,": "),D.Ub(5,"div",27),D.Ub(6,"table",108),D.Jc(7,Bt,16,13,"ng-container",63),D.Tb(),D.Tb(),D.Tb()),2&e){var i=D.gc(2).$implicit,a=D.gc(2);D.Cb(7),D.nc("ngForOf",a.containedFiles(i.id))}}function Et(e,t){if(1&e&&(D.Ub(0,"div"),D.Ub(1,"strong"),D.Pb(2,"i",107),D.Lc(3,"Description"),D.Tb(),D.Lc(4,": "),D.Ub(5,"p"),D.Lc(6),D.Tb(),D.Jc(7,Jt,8,1,"div",14),D.Tb()),2&e){var i=D.gc().$implicit;D.Cb(6),D.Mc(i.desc?i.desc:"No description"),D.Cb(1),D.nc("ngIf",i.tags.indexOf("Folder")>=0)}}function Ot(e,t){if(1&e&&(D.Ub(0,"td",105),D.Ub(1,"div",106),D.Jc(2,Et,8,2,"div",14),D.Tb(),D.Tb()),2&e){var i=t.$implicit,a=D.gc(2);D.Db("colspan",a.expandedDataFiles.has(i.id)||a.isEditing?7:8),D.Cb(1),D.nc("@detailExpand",a.expandedDataFiles.has(i.id)||a.isEditing?"expanded":"collapsed"),D.Cb(1),D.nc("ngIf",a.expandedDataFiles.has(i.id)||a.isEditing)}}function Rt(e,t){1&e&&D.Pb(0,"tr",116)}function Nt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"tr",117),D.cc("click",(function(){D.Bc(i);var e=t.$implicit,a=t.dataIndex;return D.gc(2).toggleRow(e.id,a)})),D.Tb()}if(2&e){var a=t.$implicit,n=D.gc(2);D.Fb("table-primary",n.expandedDataFiles.has(a.id))}}function At(e,t){1&e&&D.Pb(0,"tr",118)}var Vt=function(){return[5,10,30,50,100,300,500]},$t=function(){return["dataFileCheckbox","dataFilePrefix","dataFileName","dataFileSuffix","dataFileTags","dataFileStatus","dataFileCreationTime","dataFileOwner"]},zt=function(){return["dataFileDetail"]};function qt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",18),D.Ub(1,"div",7),D.Ub(2,"div",19),D.Ub(3,"span",20),D.Pb(4,"span",21),D.Lc(5,"Tags filter "),D.Tb(),D.Ub(6,"span",22),D.cc("click",(function(){D.Bc(i);var e=D.gc();return e._viewControls.filteredTags=e.all_possible_tags})),D.Lc(7,"All"),D.Tb(),D.Ub(8,"span",23),D.cc("click",(function(){return D.Bc(i),D.gc()._viewControls.filteredTags=[]})),D.Lc(9,"None"),D.Tb(),D.Jc(10,Ge,2,5,"span",24),D.Tb(),D.Tb(),D.Jc(11,it,12,5,"div",25),D.Pb(12,"br"),D.Ub(13,"div",7),D.Ub(14,"div",19),D.Ub(15,"mat-paginator",26),D.cc("page",(function(e){return D.Bc(i),D.gc().onPageChange(e)})),D.Tb(),D.Ub(16,"div",27),D.Ub(17,"table",28),D.cc("matSortChange",(function(e){return D.Bc(i),D.gc().sortData(e)})),D.hc(18,"slice"),D.Sb(19,29),D.Jc(20,at,3,2,"th",30),D.Jc(21,nt,2,2,"td",31),D.Rb(),D.Sb(22,32),D.Jc(23,ct,2,0,"th",33),D.Jc(24,lt,3,2,"td",34),D.Rb(),D.Sb(25,35),D.Jc(26,st,3,0,"th",33),D.Jc(27,gt,3,2,"td",36),D.Rb(),D.Sb(28,37),D.Jc(29,ht,2,0,"th",33),D.Jc(30,mt,3,2,"td",38),D.Rb(),D.Sb(31,39),D.Jc(32,Ct,2,0,"th",33),D.Jc(33,yt,7,6,"td",40),D.Rb(),D.Sb(34,41),D.Jc(35,xt,2,0,"th",42),D.Jc(36,Pt,2,1,"td",40),D.Rb(),D.Sb(37,43),D.Jc(38,Lt,2,0,"th",42),D.Jc(39,It,3,1,"td",40),D.Rb(),D.Sb(40,44),D.Jc(41,Dt,2,0,"th",45),D.Jc(42,jt,2,5,"td",46),D.Rb(),D.Sb(43,47),D.Jc(44,Ot,3,3,"td",48),D.Rb(),D.Jc(45,Rt,1,0,"tr",49),D.Jc(46,Nt,1,2,"tr",50),D.Jc(47,At,1,0,"tr",51),D.Tb(),D.Tb(),D.Ub(48,"mat-paginator",26),D.cc("page",(function(e){return D.Bc(i),D.gc().onPageChange(e)})),D.Tb(),D.Tb(),D.Tb(),D.Tb()}if(2&e){var a=D.gc();D.Cb(10),D.nc("ngForOf",a.all_possible_tags),D.Cb(1),D.nc("ngIf",a.selectedList.length>0),D.Cb(4),D.nc("length",a.dataFiles.length)("pageSize",a.pageSize)("pageIndex",a.pageIndex)("pageSizeOptions",D.qc(18,Vt)),D.Cb(2),D.nc("dataSource",D.kc(18,14,a.dataFiles,a.pageIndex*a.pageSize,(a.pageIndex+1)*a.pageSize)),D.Cb(28),D.nc("matHeaderRowDef",D.qc(19,$t)),D.Cb(1),D.nc("matRowDefColumns",D.qc(20,$t)),D.Cb(1),D.nc("matRowDefColumns",D.qc(21,zt)),D.Cb(1),D.nc("length",a.dataFiles.length)("pageSize",a.pageSize)("pageIndex",a.pageIndex)("pageSizeOptions",D.qc(22,Vt))}}function Ht(e,t){1&e&&D.Pb(0,"i",129)}function Yt(e,t){1&e&&D.Pb(0,"i",130)}var Kt=function(e,t){return{"fa-edit":e,"fa-save":t}};function Gt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",120),D.cc("click",(function(){return D.Bc(i),D.gc(2).onSave()})),D.Pb(1,"i",131),D.Ub(2,"span",128),D.Lc(3),D.Tb(),D.Ub(4,"span",124),D.Lc(5,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Fb("active",a.isEditing),D.Cb(1),D.nc("ngClass",D.sc(6,Kt,!a.isEditing,a.isEditing)),D.Cb(1),D.Fb("active",a.showRightButtonContent||a.isEditing),D.Cb(1),D.Mc(a.isEditing?"Save":"Modify file info")}}function Wt(e,t){if(1&e){var i=D.Vb();D.Sb(0),D.Ub(1,"a",120),D.cc("click",(function(){return D.Bc(i),D.gc(2).onCancel()})),D.Pb(2,"i",132),D.Ub(3,"span",128),D.Lc(4,"Cancel"),D.Tb(),D.Ub(5,"span",124),D.Lc(6,"\u276f"),D.Tb(),D.Tb(),D.Pb(7,"br"),D.Rb()}if(2&e){var a=D.gc(2);D.Cb(1),D.Fb("active",a.isEditing),D.Cb(2),D.Fb("active",a.showRightButtonContent||a.isEditing)}}var Qt=function(e,t){return{"fa-arrows-alt-v":e,"fa-angle-double-up":t}};function Xt(e,t){if(1&e){var i=D.Vb();D.Ub(0,"a",120),D.cc("click",(function(){return D.Bc(i),D.gc(2).toggleExpansion()})),D.Pb(1,"i",131),D.Ub(2,"span",128),D.Lc(3),D.Tb(),D.Ub(4,"span",124),D.Lc(5,"\u276f"),D.Tb(),D.Tb()}if(2&e){var a=D.gc(2);D.Fb("active",a._viewControls.allExpanded),D.Cb(1),D.nc("ngClass",D.sc(6,Qt,!a._viewControls.allExpanded,a._viewControls.allExpanded)),D.Cb(1),D.Fb("active",a.showRightButtonContent),D.Cb(1),D.Mc(a._viewControls.allExpanded?"Collapse info":"Expand info")}}function Zt(e,t){if(1&e){var i=D.Vb();D.Sb(0),D.Ub(1,"a",120),D.cc("click",(function(){return D.Bc(i),D.gc(2).importFileDialog()})),D.Pb(2,"i",133),D.Ub(3,"span",128),D.Lc(4,"Import files"),D.Tb(),D.Ub(5,"span",124),D.Lc(6,"\u276f"),D.Tb(),D.Tb(),D.Pb(7,"br"),D.Rb()}if(2&e){var a=D.gc(2);D.Cb(1),D.Fb("active",!!a._viewControls.showCreateFolder),D.Cb(2),D.Fb("active",a.showRightButtonContent||a._viewControls.showCreateFolder)}}var ei=function(e){return["/project",e,"result","list"]};function ti(e,t){if(1&e){var i=D.Vb();D.Ub(0,"div",119),D.Ub(1,"a",120),D.cc("click",(function(){D.Bc(i);var e=D.gc();return e.showRightButtonContent=!e.showRightButtonContent})),D.Jc(2,Ht,1,0,"i",121),D.Jc(3,Yt,1,0,"i",122),D.Ub(4,"span",123),D.Lc(5,"MENU"),D.Tb(),D.Ub(6,"span",124),D.Lc(7,"\u276f"),D.Tb(),D.Tb(),D.Pb(8,"br"),D.Jc(9,Gt,6,9,"a",125),D.Pb(10,"br"),D.Jc(11,Wt,8,4,"ng-container",14),D.Jc(12,Xt,6,9,"a",125),D.Pb(13,"br"),D.Jc(14,Zt,8,4,"ng-container",14),D.Ub(15,"a",126),D.Pb(16,"i",127),D.Ub(17,"span",128),D.Lc(18,"Results"),D.Tb(),D.Ub(19,"span",124),D.Lc(20,"\u276f"),D.Tb(),D.Tb(),D.Pb(21,"br"),D.Tb()}if(2&e){var a=D.gc();D.nc("@rightButtonState",a.showRightButtonContent?"active":"inactive"),D.Cb(2),D.nc("ngIf",a.showRightButtonContent),D.Cb(1),D.nc("ngIf",!a.showRightButtonContent),D.Cb(1),D.Fb("active",a.showRightButtonContent),D.Cb(5),D.nc("ngIf",a.currentProject.privilege.canEditFile),D.Cb(2),D.nc("ngIf",a.currentProject.privilege.canEditFile&&a.isEditing),D.Cb(1),D.nc("ngIf",a.currentProject.privilege.canEditFile),D.Cb(2),D.nc("ngIf",a.currentProject.privilege.canAddFile),D.Cb(1),D.nc("routerLink",D.rc(12,ei,a.currentProject.id)),D.Cb(2),D.Fb("active",a.showRightButtonContent)}}var ii,ai,ni=function(){return["/home"]},ci=function(){return["/project/list"]},ri=T.g.forChild([{path:"list",component:(ii=function(){function e(t,i,a,n,c,r,o,l){_classCallCheck(this,e),this.projectService=t,this.router=i,this.route=a,this.dialogRef=n,this.userService=c,this.systemService=r,this.taskService=o,this.dataService=l,this.pageIndex=0,this.pageSize=30,this.totalLength=0,this.tasks=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.expandedDataFiles=new Set,this.systemService.toggleNavbar(!0),this.systemService.toggleSidebar(!0),this.systemService.maintainRightSidebarStatus(),this._subs=[],this.isEditing=!1,this._dataFiles=[],this.selectedList=[],this.projectList=[],this.projectID=void 0,this.currentProject=void 0,this.showRightButtonContent=!1,this._viewControls={sortField:"createdAt",sortDirection:"desc",filteredTags:[],showFilter:!0,showCreateFolder:!1,confirmDelete:"",allExpanded:!1},this._subs.push(this.projectService.currentProject$.subscribe((function(t){e.currentProject=null,t&&setTimeout((function(){e.currentProject=t,e._viewControls.filteredTags=e.all_possible_tags,e.allowedFormats=_toConsumableArray(new Set([].concat.apply([],e.currentProject.packages.map((function(e){return e.allowedFormats}))))).map((function(e){return e.toString()})),e.taskService.loadTasks(e.currentProject.packages.map((function(e){return e.id}))),e.dataFileTable&&e.dataFileTable.renderRows()}),100)}))),this.route.paramMap.subscribe((function(t){e.projectID=t.get("pid"),e.projectService.setCurrentProject(e.projectID)})),this._subs.push(this.systemService.sysInfo$.subscribe((function(t){e.sysConfig=t,t&&(e.recaptchaKey=t.reCaptchaSiteKey)}))),this._subs.push(this.userService.currentUser$.subscribe((function(t){return e.currentUser=t}))),this._subs.push(this.taskService.taskList$.subscribe((function(t){Array.isArray(t)&&(e.tasks=t)})))}},{key:"getProjectList",value:function(){var e=this,t=this.projectService.searchProjectList("").subscribe((function(i){t.unsubscribe(),e.projectList=i.isError?[]:i.success}))}},{key:"importToProject",value:function(e,t){var i=this.projectService.importFilesToProject(e.id,this.selectedList,t).subscribe((function(e){return i.unsubscribe()}))}},{key:"toggleRow",value:function(e,t){this.isEditing||(this.expandedDataFiles.has(e)?this.expandedDataFiles.delete(e):this.expandedDataFiles.add(e))}},{key:"displayProjectListFn",value:function(e){return e&&e.name?e.name:""}},{key:"onToggleFileImport",value:function(){this.toggleFileImport=!this.toggleFileImport,this.toggleFileImport&&this.getProjectList()}},{key:"toggleTag",value:function(e){var t=this._viewControls.filteredTags.length!==this.all_possible_tags.length,i=this._viewControls.filteredTags.indexOf(e);-1===i?this._viewControls.filteredTags.push(e):t?1===this._viewControls.filteredTags.length?this._viewControls.filteredTags=this.all_possible_tags:this._viewControls.filteredTags.splice(i,1):this._viewControls.filteredTags=[e]}},{key:"containedFiles",value:function(e){return this.currentProject.dataFiles.filter((function(t){return t.parent===e}))}},{key:"sortColumn",value:function(e){this._viewControls.sortField===e?this._viewControls.sortDirection="desc"===this._viewControls.sortDirection?"asc":"desc":(this._viewControls.sortField=e,this._viewControls.sortDirection="asc")}},{key:"onFocusedDataFile",value:function(e){this.focusedDataFile=e}},{key:"deleteDataFile",value:function(e,t){e&&(e.status=2);var i=this.projectService.deleteDataFile(e).subscribe((function(e){i.unsubscribe()}))}},{key:"batchDeleteFiles",value:function(e){var t=this,i=[];this.dataFiles.forEach((function(t){e.indexOf(t.id)>=0&&(t.status=2,i.push(t.id))}));var a=this.projectService.batchDeleteDataFile(i,this.currentProject.id).subscribe((function(e){t.selectedList=[],a.unsubscribe()}))}},{key:"deleteDataFileDialog",value:function(e){var t=this,i=this.dialogRef.open(y.a,{disableClose:!1});void 0!==e?(i.componentInstance.setOptions({title:'<h4 class="modal-title text-danger">Are you sure you want to delete the data file <strong>'.concat(e.name,"</strong>?</h4>"),desc:'<span class="text-danger">This will delete the data file, name: <b>'.concat(e.name,"</b>")+"<br>This cannot be undone. Make sure this is something you really want to do!</span><br>"}),i.afterClosed().subscribe((function(i){i&&t.deleteDataFile(e,i)}))):(i.componentInstance.setOptions({title:'<h4 class="text-danger">You are going to remove '.concat(this.selectedList.length,"  data files</h4>"),desc:'<span class="text-danger">These records will be deleted and this cannot be undone. Make sure this is something you really want to do!</span><br>'}),i.afterClosed().subscribe((function(e){e&&t.batchDeleteFiles(t.selectedList)})))}},{key:"gotoDataFile",value:function(e,t){this.router.navigate(["/dataFile",e.id,"info"],t?{queryParams:{edit:1}}:{})}},{key:"goToFileUploadPage",value:function(){this.router.navigate(["/project",this.currentProject.id,"fileImport"])}},{key:"onPageChange",value:function(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.selectedList=[]}},{key:"onAllCheckBoxChange",value:function(e){this.selectedList=e.checked?this.dataFiles.slice(this.pageIndex*this.pageSize,(this.pageIndex+1)*this.pageSize).map((function(e){return e.id})):[]}},{key:"onFileCheckBoxChange",value:function(e,t){if(e.checked&&this.selectedList.indexOf(t)<0)this.selectedList.push(t);else if(!e.checked){var i=this.selectedList.indexOf(t);i>=0&&this.selectedList.splice(i,1)}}},{key:"onDownloadSelected",value:function(){this.dataService.downloadFiles(this.projectID,this.selectedList)}},{key:"importFileDialog",value:function(){var e=this;this._viewControls.showCreateFolder=!0,this.dialogRef.open(w.a,{width:"99%",height:"95%",maxWidth:"95vw",maxHeight:"95vh",data:{allowedFormats:this.allowedFormats,project:this.currentProject,sysConfig:this.sysConfig,tasks:this.tasks,importType:"local",currentUser:this.currentUser,tags:[]}}).afterClosed().subscribe((function(){return e._viewControls.showCreateFolder=!1}))}},{key:"sortData",value:function(e){var t="createdAt";switch(e.active){case"dataFileName":t="name";break;case"dataFilePrefix":t="prefix";break;case"dataFileSuffix":t="suffix";break;case"dataFileStatus":t="status";break;case"dataFileCreationTime":t="createdAt";break;case"dataFileOwner":t="owner"}e.direction?(this._viewControls.sortDirection=e.direction,this._viewControls.sortField=t):(this._viewControls.sortDirection="desc",this._viewControls.sortField="createdAt")}},{key:"onTagClicked",value:function(e){console.log(e),this.toggleTag(e)}},{key:"onTagChanged",value:function(e,t){this.isEditing&&(t.tags=e)}},{key:"toggleExpansion",value:function(){if(this._viewControls.allExpanded)this.expandedDataFiles.clear(),this._viewControls.allExpanded=!1;else{for(var e=0;e<this.dataFiles.length;e++)this.dataFiles[e].id&&this.expandedDataFiles.add(this.dataFiles[e].id);this._viewControls.allExpanded=!0}}},{key:"onSave",value:function(){if(this.isEditing){this.isEditing=!1;var e=this.projectService.updateDataFiles(this.dataFiles).subscribe((function(t){e.unsubscribe()}))}else this.isEditing=!0}},{key:"onCancel",value:function(){this.isEditing=!1,this.projectService.setCurrentProject(this.projectID,!0)}},{key:"ngOnDestroy",value:function(){for(var e=0;e<this._subs.length;e++)this._subs[e].unsubscribe()}},{key:"all_possible_tags",get:function(){if(this.currentProject){var e={},t=this.currentProject.dataFiles;if(!t)return[];for(var i=0;i<t.length;i++){var a=t[i];if(!a.hidden&&!a.parent){var n=a.tags;if(n)for(var c=0;c<n.length;c++)e[n[c]]++}}return Object.keys(e)}return[]}},{key:"dataFiles",get:function(){if(this.currentProject&&this.currentProject.dataFiles){var e=this._viewControls.filteredTags,t=this.currentProject.dataFiles.slice(0).filter((function(t){for(var i=0;i<e.length;i++)if(t.tags&&t.tags.indexOf(e[i])>=0)return!0;return!t.tags||0===t.tags.length})),i=this._viewControls.sortField;return"createdAt"===i?(t.sort((function(e,t){return Ve(e[i]).isBefore(t[i])?-1:1})),"desc"===this._viewControls.sortDirection&&t.reverse()):t="owner"===i?Object(U.a)(t,[function(e){return e.owner&&e.owner.name?e.owner.name:""}],this._viewControls.sortDirection):Object(U.a)(t,[function(e){return e[i]}],this._viewControls.sortDirection),t.filter((function(e){return!e.hidden&&!e.parent}))}return[]}}]),e}(),ii.\u0275fac=function(e){return new(e||ii)(D.Ob(S.a),D.Ob(T.c),D.Ob(T.a),D.Ob(M.b),D.Ob(j.a),D.Ob(B.a),D.Ob(J.a),D.Ob(_.a))},ii.\u0275cmp=D.Ib({type:ii,selectors:[["project-datafile-list"]],viewQuery:function(e,t){var i;1&e&&D.Rc(f.n,!0),2&e&&D.xc(i=D.dc())&&(t.dataFileTable=i.first)},decls:43,vars:13,consts:[[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"bdp-main-container"],[1,"chi-header"],[1,"row"],[1,"col-md-2"],[1,"col-md-9"],[2,"text-indent","36px"],[1,"my-3"],["class","container-fluid",4,"ngIf"],["class","chi-right-menu",4,"ngIf"],[4,"ngIf"],[1,"breadcrumb-item","active"],["target","_blank",3,"routerLink"],[1,"fas","fa-external-link-alt","ml-3"],[1,"container-fluid"],[1,"col-12"],[2,"float","left"],[1,"fas","fa-filter"],[1,"badge","link","badge-success",2,"float","left",3,"click"],[1,"badge","link","badge-danger",2,"float","left",3,"click"],["class","badge link","style","float:left;",3,"badge-primary","badge-secondary","click",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[2,"background-color","rgba(255,255, 255, 0.7)","border","thin solid darkgray",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","","matSort","",1,"table","table-hover","table-striped","table-bordered",3,"dataSource","matSortChange"],["matColumnDef","dataFileCheckbox"],["mat-header-cell","","class","align-middle text-center","style","padding: 2px;",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-center","style","padding: 2px;",4,"matCellDef"],["matColumnDef","dataFilePrefix"],["mat-header-cell","","mat-sort-header","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-right px-2",4,"matCellDef"],["matColumnDef","dataFileName"],["mat-cell","","class","align-middle text-center px-2",4,"matCellDef"],["matColumnDef","dataFileSuffix"],["mat-cell","","class","align-middle text-left px-2",4,"matCellDef"],["matColumnDef","dataFileStatus"],["mat-cell","","class","align-middle text-center",4,"matCellDef"],["matColumnDef","dataFileCreationTime"],["mat-header-cell","","mat-sort-header","","class","align-middle  text-center",4,"matHeaderCellDef"],["matColumnDef","dataFileOwner"],["matColumnDef","dataFileTags"],["mat-header-cell","","class","align-middle text-center",4,"matHeaderCellDef"],["mat-cell","","class","align-middle text-left p-3",4,"matCellDef"],["matColumnDef","dataFileDetail"],["mat-cell","","style","background-color: rgba(122, 168, 255, 0.1);","class","px-3",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"table-primary","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","datafile-detail-row",4,"matRowDef","matRowDefColumns"],[1,"badge","link",2,"float","left",3,"click"],[1,"fa","fa-angle-double-right","ml-4","fa-lg"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"fas","fa-download","fa-lg","fa-fw"],["mat-icon-button","","color","warn",3,"click"],[2,"width","100%"],["placeholder","select a project to import"],["projectSelect",""],[4,"ngFor","ngForOf"],["isCopying",""],[1,"text-muted","m1-3"],["mat-raised-button","",3,"disabled","click"],[3,"value",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"align-middle","text-center",2,"padding","2px"],[3,"checked","indeterminate","change"],["allCheckBox",""],["mat-cell","",1,"align-middle","text-center",2,"padding","2px"],["color","primary",3,"checked","change","click"],["mat-header-cell","","mat-sort-header","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-right","px-2"],["class","text-muted",4,"ngIf"],["style","width: 100%;",4,"ngIf"],[1,"text-muted"],["matInput","","type","text","maxlength","36","size","36","placeholder","The prefix",3,"ngModel","ngModelChange"],[2,"align-self","center"],["mat-cell","",1,"align-middle","text-center","px-2"],["class","fas fa-folder mr-2",4,"ngIf"],["target","_blank",1,"ml-3",3,"routerLink"],[1,"fas","fa-external-link-alt"],[1,"fas","fa-folder","mr-2"],["matInput","","type","text","maxlength","80","size","80","placeholder","The DataFile name (length must be smaller or equal than 80 characters)",3,"ngModel","ngModelChange"],["mat-cell","",1,"align-middle","text-left","px-2"],["matInput","","type","text","maxlength","36","size","36","placeholder","The suffix",3,"ngModel","ngModelChange"],["mat-cell","",1,"align-middle","text-center"],[3,"ngSwitch"],["class","fas fa-circle-notch fa-spin text-primary",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","fas fa-hourglass-half text-secondary",4,"ngSwitchCase"],["class","fas fa-trash-alt fa-fw text-warning",4,"ngSwitchCase"],["class","fas fa-times fa-fw text-danger",4,"ngSwitchCase"],[1,"fas","fa-circle-notch","fa-spin","text-primary"],[1,"text-success"],[1,"fas","fa-check","fa-fw"],[1,"fas","fa-hourglass-half","text-secondary"],[1,"fas","fa-trash-alt","fa-fw","text-warning"],[1,"fas","fa-times","fa-fw","text-danger"],["mat-header-cell","",1,"align-middle","text-center"],["mat-cell","",1,"align-middle","text-left","p-3"],[3,"packages","tasks","tags","disabled","highlightTags","tagChange","tagClicked"],["mat-cell","",1,"px-3",2,"background-color","rgba(122, 168, 255, 0.1)"],[1,"datafile-details","my-3"],[1,"fas","fa-angle-right","mr-2"],[1,"table","table-sm","table-hover","table-bordered","table-striped"],[1,"fa","text-success",2,"font-size","14px",3,"ngClass"],["class","badge link",3,"badge-primary","badge-success",4,"ngFor","ngForOf"],["class","badge badge-warning",4,"ngIf"],[1,"text-center"],["colspan","3"],[1,"badge","link"],[1,"badge","badge-warning"],["mat-header-row",""],["mat-row","",3,"click"],["mat-row","",1,"datafile-detail-row"],[1,"chi-right-menu"],[1,"chi-rbtn",3,"click"],["class","fa fa-angle-right fa-fw",4,"ngIf"],["class","fa fa-angle-left fa-fw",4,"ngIf"],[1,"chi-rbtn-content","ml-2"],[1,"chi-rbtn-arrow"],["class","chi-rbtn",3,"active","click",4,"ngIf"],[1,"chi-rbtn",3,"routerLink"],[1,"far","fa-folder-open"],[1,"chi-rbtn-content"],[1,"fa","fa-angle-right","fa-fw"],[1,"fa","fa-angle-left","fa-fw"],["aria-hidden","true",1,"fas","fa-fw",3,"ngClass"],["aria-hidden","true",1,"far","fa-fw","fa-window-close"],[1,"fa","fa-upload","fa-fw"]],template:function(e,t){1&e&&(D.Ub(0,"ol",0),D.Ub(1,"li",1),D.Ub(2,"a",2),D.Lc(3,"Home"),D.Tb(),D.Tb(),D.Ub(4,"li",1),D.Ub(5,"a",2),D.Lc(6,"Project List"),D.Tb(),D.Tb(),D.Ub(7,"li",1),D.Jc(8,qe,3,4,"a",3),D.Tb(),D.Jc(9,Ye,5,6,"li",4),D.Jc(10,Ke,2,0,"li",4),D.Tb(),D.Ub(11,"div",5),D.Ub(12,"h3",6),D.Lc(13,"Data Files in the Project "),D.Tb(),D.Pb(14,"br"),D.Pb(15,"br"),D.Ub(16,"div",7),D.Ub(17,"div",8),D.Ub(18,"strong"),D.Lc(19,"Project name"),D.Tb(),D.Tb(),D.Ub(20,"div",9),D.Ub(21,"span",10),D.Lc(22),D.Tb(),D.Tb(),D.Tb(),D.Pb(23,"br"),D.Ub(24,"div",7),D.Ub(25,"div",8),D.Ub(26,"strong"),D.Lc(27,"Project description"),D.Tb(),D.Tb(),D.Ub(28,"div",9),D.Ub(29,"span",10),D.Lc(30),D.Tb(),D.Tb(),D.Tb(),D.Pb(31,"br"),D.Ub(32,"div",7),D.Ub(33,"div",8),D.Ub(34,"strong"),D.Lc(35,"Data file number"),D.Tb(),D.Tb(),D.Ub(36,"div",9),D.Ub(37,"span",10),D.Lc(38),D.Tb(),D.Tb(),D.Tb(),D.Pb(39,"br"),D.Pb(40,"mat-divider",11),D.Jc(41,qt,49,23,"div",12),D.Tb(),D.Jc(42,ti,22,14,"div",13)),2&e&&(D.Cb(2),D.nc("routerLink",D.qc(11,ni)),D.Cb(3),D.nc("routerLink",D.qc(12,ci)),D.Cb(3),D.nc("ngIf",t.currentProject),D.Cb(1),D.nc("ngIf",t.currentProject),D.Cb(1),D.nc("ngIf",!t.currentProject),D.Cb(12),D.Mc(null!=t.currentProject&&t.currentProject.name?null==t.currentProject?null:t.currentProject.name:"Unnamed"),D.Cb(8),D.Mc(null!=t.currentProject&&t.currentProject.desc?null==t.currentProject?null:t.currentProject.desc:"No description"),D.Cb(8),D.Oc("",null==t.currentProject?null:t.currentProject.dataFileNumber," record(s), (",null==t.currentProject?null:t.currentProject.dataFiles.length," including intermediate files)"),D.Cb(3),D.nc("ngIf",t.currentProject),D.Cb(1),D.nc("ngIf",t.currentProject))},directives:[T.f,n.n,h.a,n.m,u.a,f.n,p.a,f.c,f.i,f.b,f.k,f.m,s.b,b.a,E.b,l.a,g.a,R.k,f.h,f.a,p.b,o.a,a.b,a.e,a.i,a.l,n.p,n.q,O.a,n.l,f.j,f.l],pipes:[n.v],styles:[".badge[_ngcontent-%COMP%]{margin:2px}.datafile-details[_ngcontent-%COMP%]{overflow:hidden;display:none}tr.datafile-detail-row[_ngcontent-%COMP%]{height:0;max-height:0}[_nghost-%COMP%]     .mat-sort-header-container{display:flex;justify-content:center}"],data:{animation:[F.a,Object(Ae.n)("detailExpand",[Object(Ae.k)("collapsed",Object(Ae.l)({height:"0px",minHeight:"0",display:"none"})),Object(Ae.k)("expanded",Object(Ae.l)({height:"*",display:"block"})),Object(Ae.m)("expanded <=> collapsed",Object(Ae.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),ii),canActivate:[Ne.a]},{path:":dataId/info",component:Re,canActivate:[Ne.a]}]),oi=[],li=i("Bchi"),si=((ai=function e(){_classCallCheck(this,e)}).\u0275mod=D.Mb({type:ai}),ai.\u0275inj=D.Lb({factory:function(e){return new(e||ai)},providers:[oi],imports:[[a.d,n.c,o.b,s.c,l.b,r.e,b.b,c.b,h.b,d.c,f.o,g.b,u.b,p.c,m.a,C.a,li.a,v.a,ri]]}),ai)}}]);